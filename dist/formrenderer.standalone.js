!function(a){var b,c;b=jQuery,c=_.str,rivets.inputEvent=document.addEventListener?"input":"keyup",rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(a){return b(a).bind(""+rivets.inputEvent+".rivets",this.publish)},unbind:function(a){return b(a).unbind(""+rivets.inputEvent+".rivets")}},rivets.binders.checkedarray={publishes:!0,routine:function(a,b){return a.checked=_.contains(b,a.value)},bind:function(a){return"radio"===a.type?b(a).bind("change.rivets",function(b){return function(){return b.model.set(b.keypath,[a.value])}}(this)):b(a).bind("change.rivets",function(b){return function(){var c,d;return d=b.model.get(b.keypath)||[],c=a.checked?_.uniq(d.concat(a.value)):_.without(d,a.value),b.model.set(b.keypath,c)}}(this))},unbind:function(a){return b(a).unbind("change.rivets")}},rivets.configure({prefix:"rv",adapter:{subscribe:function(a,b,c){return c.wrapped=function(a,b){return c(b)},a.on("change:"+b,c.wrapped)},unsubscribe:function(a,b,c){return a.off("change:"+b,c.wrapped)},read:function(a,b){return"cid"===b?a.cid:a.get(b)},publish:function(a,b,c){return a.cid?a.set(b,c):a[b]=c}}}),function(){var c;a.FormRenderer=c=Backbone.View.extend({defaults:{enablePages:!0,screendoorBase:"https://screendoor.dobt.co",target:"[data-formrenderer]",validateImmediately:!1,response:{},responderLanguage:void 0,preview:!1,skipValidation:void 0,saveParams:{},showLabels:!1,scrollToPadding:0,plugins:["Autosave","WarnBeforeUnload","BottomBar","ErrorBar","SavedSession"]},constructor:function(a){var d,e,f,g;for(this.fr=this,this.options=b.extend({},this.defaults,a),this.requests=0,this.state=new Backbone.Model({hasChanges:!1}),this.setElement(b(this.options.target)),this.$el.addClass("fr_form"),this.$el.data("formrenderer-instance",this),this.subviews={pages:{}},this.serverHeaders={"X-FR-Version":c.VERSION,"X-FR-URL":document.URL},this.plugins=_.map(this.options.plugins,function(a){return function(b){return new c.Plugins[b](a)}}(this)),g=this.plugins,e=0,f=g.length;f>e;e++)d=g[e],"function"==typeof d.beforeFormLoad&&d.beforeFormLoad();return this.$el.html(JST.main(this)),this.trigger("viewRendered",this),this.loadFromServer(function(a){return function(){var b,c,e,f;for(a.$el.find(".fr_loading").remove(),a.initFormComponents(a.options.response_fields,a.options.response.responses),a.initPages(),a.options.enablePages?a.initPagination():a.initNoPagination(),f=a.plugins,c=0,e=f.length;e>c;c++)d=f[c],"function"==typeof d.afterFormLoad&&d.afterFormLoad();return a.options.validateImmediately&&a.validate(),a.trigger("ready"),"function"==typeof(b=a.options).onReady?b.onReady():void 0}}(this)),this.$el.on("submit",function(a){return a.preventDefault()}),this},corsSupported:function(){return"withCredentials"in new XMLHttpRequest},projectUrl:function(){return""+this.options.screendoorBase+"/projects/"+this.options.project_id},loadFromServer:function(a){return null!=this.options.response_fields&&null!=this.options.response.responses?a():b.ajax({url:""+this.options.screendoorBase+"/api/form_renderer/load",type:"get",dataType:"json",data:this.loadParams(),headers:this.serverHeaders,success:function(b){return function(d){var e,f,g;return b.options.response.id=d.response_id,(e=b.options).response_fields||(e.response_fields=d.project.response_fields),(f=b.options.response).responses||(f.responses=(null!=(g=d.response)?g.responses:void 0)||{}),null==b.options.afterSubmit&&(b.options.afterSubmit={method:"page",html:d.project.after_response_page_html||"<p>"+c.t.thanks+"</p>"}),a()}}(this),error:function(a){return function(b){var d;return a.corsSupported()?(a.$el.find(".fr_loading").text(""+c.t.error_loading+': "'+((null!=(d=b.responseJSON)?d.error:void 0)||"Unknown")+'"'),a.trigger("errorSaving",b)):a.$el.find(".fr_loading").html(c.t.not_supported.replace(/\:url/g,a.projectUrl()))}}(this)})},initPages:function(){var a,b,d,e,f,g;a=function(a){return function(){return a.subviews.pages[b]=new c.Views.Page({form_renderer:a})}}(this),this.numPages=this.formComponents.where({field_type:"page_break"}).length+1,this.state.set("activePage",1),b=1,a(),this.formComponents.each(function(c){return function(d){return"page_break"===d.get("field_type")?(b++,a()):c.subviews.pages[b].models.push(d)}}(this)),f=this.subviews.pages,g=[];for(e in f)d=f[e],g.push(this.$el.append(d.render().el));return g},initPagination:function(){return this.subviews.pagination=new c.Views.Pagination({form_renderer:this}),this.$el.prepend(this.subviews.pagination.render().el),this.subviews.pages[this.state.get("activePage")].show()},initNoPagination:function(){var a,b,c,d;c=this.subviews.pages,d=[];for(b in c)a=c[b],d.push(a.show());return d},activatePage:function(b){return this.subviews.pages[this.state.get("activePage")].hide(),this.subviews.pages[b].show(),a.scrollTo(0,this.options.scrollToPadding),this.state.set("activePage",b)},validate:function(){var a,b,c;c=this.subviews.pages;for(b in c)a=c[b],a.validate();return this.trigger("afterValidate afterValidate:all"),this.areAllPagesValid()},isPageVisible:function(a){var b;return null!=(b=this.subviews.pages[a])?b.isVisible():void 0},isPageValid:function(a){var b;return null!=(b=this.subviews.pages[a])?b.isValid():void 0},focusFirstError:function(){var b,c;return b=this.invalidPages()[0],this.activatePage(b),c=this.subviews.pages[b].firstViewWithError(),a.scrollTo(0,c.$el.offset().top-this.options.scrollToPadding),c.focus()},invalidPages:function(){var a;return _.filter(function(){a=[];for(var b=1,c=this.numPages;c>=1?c>=b:b>=c;c>=1?b++:b--)a.push(b);return a}.apply(this),function(a){return function(b){return a.isPageValid(b)===!1}}(this))},areAllPagesValid:function(){return 0===this.invalidPages().length},visiblePages:function(){return _.tap([],function(a){return function(b){var c,d,e,f;e=a.subviews.pages,f=[];for(c in e)d=e[c],f.push(a.isPageVisible(c)?b.push(parseInt(c,10)):void 0);return f}}(this))},isFirstPage:function(){var a;return a=this.visiblePages()[0],!a||this.state.get("activePage")===a},isLastPage:function(){var a;return a=_.last(this.visiblePages()),!a||this.state.get("activePage")===a},previousPage:function(){return this.visiblePages()[_.indexOf(this.visiblePages(),this.state.get("activePage"))-1]},nextPage:function(){return this.visiblePages()[_.indexOf(this.visiblePages(),this.state.get("activePage"))+1]},handlePreviousPage:function(){return this.activatePage(this.previousPage())},handleNextPage:function(){return this.isLastPage()||!this.options.enablePages?this.submit():this.activatePage(this.nextPage())},loadParams:function(){return{v:0,response_id:this.options.response.id,project_id:this.options.project_id,responder_language:this.options.responderLanguage}},saveParams:function(){return _.extend(this.loadParams(),{skip_validation:this.options.skipValidation},this.options.saveParams)},responsesChanged:function(){return this.state.set("hasChanges",!0),this.isSaving?this.changedWhileSaving=!0:void 0},save:function(a){return null==a&&(a={}),this.isSaving?void 0:(this.requests+=1,this.isSaving=!0,this.changedWhileSaving=!1,b.ajax({url:""+this.options.screendoorBase+"/api/form_renderer/save",type:"post",contentType:"application/json",dataType:"json",data:JSON.stringify(_.extend(this.saveParams(),{raw_responses:this.getValue(),submit:a.submit?!0:void 0})),headers:this.serverHeaders,complete:function(a){return function(){return a.requests-=1,a.isSaving=!1,a.trigger("afterSave")}}(this),success:function(b){return function(c){var d;return b.state.set({hasChanges:b.changedWhileSaving,hasServerErrors:!1}),b.options.response.id=c.response_id,null!=(d=a.cb)?d.apply(b,arguments):void 0}}(this),error:function(a){return function(b){var c,d;return a.state.set({hasServerErrors:!0,serverErrorText:null!=(c=b.responseJSON)?c.error:void 0,serverErrorKey:null!=(d=b.responseJSON)?d.error_key:void 0,submitting:!1})}}(this)}))},waitForRequests:function(a){return this.requests>0?setTimeout(function(b){return function(){return b.waitForRequests(a)}}(this),100):a()},submit:function(a){return null==a&&(a={}),a.skipValidation||this.options.skipValidation||this.validate()?(this.state.set("submitting",!0),this.waitForRequests(function(a){return function(){return a.options.preview?a._preview():a.save({submit:!0,cb:function(){return a.trigger("afterSubmit"),a._afterSubmit()}})}}(this))):void 0},_afterSubmit:function(){var c,d;return d=this.options.afterSubmit,"function"==typeof d?d.call(this):"string"==typeof d?a.location=d.replace(":id",this.options.response.id.split(",")[0]):"object"==typeof d&&"page"===d.method?(c=b("<div class='fr_after_submit_page'>"+d.html+"</div>"),this.$el.replaceWith(c)):console.log("[FormRenderer] Not sure what to do...")},_preview:function(){var b;return b=function(b){return function(){return a.location=b.options.preview.replace(":id",b.options.response.id.split(",")[0])}}(this),!this.state.get("hasChanges")&&this.options.response.id?b():this.save({cb:b})},reflectConditions:function(){var a,b,c,d;c=this.subviews.pages;for(b in c)a=c[b],a.reflectConditions();return null!=(d=this.subviews.pagination)?d.render():void 0}}),c.INPUT_FIELD_TYPES=["identification","address","checkboxes","date","dropdown","email","file","number","paragraph","phone","price","radio","table","text","time","website","map_marker","confirm"],c.NON_INPUT_FIELD_TYPES=["block_of_text","page_break","section_break"],c.FIELD_TYPES=_.union(c.INPUT_FIELD_TYPES,c.NON_INPUT_FIELD_TYPES),c.BUTTON_CLASS="fr_button",c.DEFAULT_LAT_LNG=[40.7700118,-73.9800453],c.MAPBOX_URL="https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js",c.EMAIL_REGEX=/^\s*([^@\s]{1,64})@((?:[-a-z0-9]+\.)+[a-z]{2,})\s*$/i,c.ADD_ROW_ICON="+",c.REMOVE_ROW_ICON="-",c.Views={},c.Models={},c.Plugins={},c.addPlugin=function(a){return this.prototype.defaults.plugins.push(a)},c.removePlugin=function(a){return this.prototype.defaults.plugins=_.without(this.prototype.defaults.plugins,a)}}.call(this),function(){FormRenderer.formComponentViewClass=function(a){var b;return a.group?FormRenderer.Views.RepeatingGroup:(b=FormRenderer.Views["ResponseField"+c.classify(a.field_type)])?b:a.input_field?FormRenderer.Views.ResponseField:FormRenderer.Views.NonInputResponseField},FormRenderer.buildFormComponentView=function(a,b){var c;return new(c=FormRenderer.formComponentViewClass(a))({model:a,form_renderer:b})}}.call(this),function(){var a,b,c,d;a=function(a){var b;return b=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,a.replace(b,"$1<a href='$2' target='_blank'>$2</a>")},c=_.extend({},Sanitize.Config.RELAXED),c.attributes.a.push("target"),b=function(a,b){var c,d,e,f,g;try{return e=document.createElement("div"),e.innerHTML=a,g=new Sanitize(b||Sanitize.Config.RELAXED),c=g.clean_node(e),f=document.createElement("div"),f.appendChild(c.cloneNode(!0)),f.innerHTML}catch(h){return d=h,_.escape(a)}},d=function(a){return null==a&&(a=""),(""+a).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},FormRenderer.formatHTML=function(e){return b(a(d(e)),c)}}.call(this),function(){FormRenderer.getLength=function(a,b){var d;return d=c.trim(b),"words"===a?(d.replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||"").length:d.length}}.call(this),function(){FormRenderer.normalizeNumber=function(a,b){var c;return c=a.replace(/,/g,"").replace(/-/g,"").replace(/^\+/,"").trim(),b&&(c=c.replace(new RegExp(b+"$","i"),"").trim()),c}}.call(this),function(){FormRenderer.toBoolean=function(a){return _.contains(["True","Yes","true","1",1,"yes",!0],a)}}.call(this),function(){FormRenderer.VERSION="1.0.0"}.call(this),function(){var a;a=["US","GB","CA"],FormRenderer.ORDERED_COUNTRIES=_.uniq(_.union(a,[void 0],_.keys(ISOCountryNames))),FormRenderer.PROVINCES_CA=["Alberta","British Columbia","Labrador","Manitoba","New Brunswick","Newfoundland","Nova Scotia","Nunavut","Northwest Territories","Ontario","Prince Edward Island","Quebec","Saskatchewen","Yukon"],FormRenderer.PROVINCES_US=["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District Of Columbia","Federated States Of Micronesia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Marshall Islands","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palau","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Islands","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}.call(this),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=["present","blank"],FormRenderer.ConditionChecker=function(){function c(a,b){var c;this.responseField=a,this.condition=b,this.value=(null!=(c=this.responseField)?c.toText():void 0)||""}return c.prototype.method_eq=function(){return this.value.toLowerCase()===this.condition.value.toLowerCase()},c.prototype.method_contains=function(){return this.value.toLowerCase().indexOf(this.condition.value.toLowerCase())>-1},c.prototype.method_not=function(){return!this.method_eq()},c.prototype.method_does_not_contain=function(){return!this.method_contains()},c.prototype.method_gt=function(){return parseFloat(this.value)>parseFloat(this.condition.value)},c.prototype.method_lt=function(){return parseFloat(this.value)<parseFloat(this.condition.value)},c.prototype.method_shorter=function(){return this.length()<parseInt(this.condition.value,10)},c.prototype.method_longer=function(){return this.length()>parseInt(this.condition.value,10)},c.prototype.method_present=function(){return!!this.value.match(/\S/)},c.prototype.method_blank=function(){return!this.method_present()},c.prototype.length=function(){return FormRenderer.getLength(this.responseField.getLengthValidationUnits(),this.value)},c.prototype.isValid=function(){var c;return this.responseField&&_.all(["response_field_id","method"],function(a){return function(b){return a.condition[b]}}(this))&&(c=this.condition.method,b.call(a,c)>=0||this.condition.value)},c.prototype.isVisible=function(){var c;return this.isValid()?(c=this.condition.method,b.call(a,c)>=0?this["method_"+this.condition.method]():this.method_present()&&this["method_"+this.condition.method]()):!0},c}()}.call(this),function(){FormRenderer.Models.BaseFormComponent=Backbone.DeepModel.extend({initialize:function(a,b,c){return this.fr=b,this.parent=c,this.afterInitialize()},afterInitialize:function(){},sync:function(){},shouldPersistValue:function(){return this.isVisible&&(this.group||this.input_field)},getConditions:function(){return this.get("conditions")||[]},isRequired:function(){return this.get("required")},isConditional:function(){return this.getConditions().length>0},calculateVisibility:function(){var a;return a=!!this.isVisible,this.isVisible=this.fr&&this.isConditional()?_[this.conditionMethod()](this.getConditions(),function(a){return function(b){var c;return c=new FormRenderer.ConditionChecker(a.parent.formComponents.get(b.response_field_id),b),c.isVisible()}}(this)):!0,a!==this.isVisible},conditionMethod:function(){return"any"===this.get("condition_method")?"any":"all"}})}.call(this),function(){var a,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=function(a){return a&&(a.hasAttribute("data-fr-next-page")||a.hasAttribute("data-fr-previous-page"))},FormRenderer.Models.ResponseField=FormRenderer.Models.BaseFormComponent.extend({input_field:!0,wrapper:"label",field_type:void 0,validators:[],ignoreKeysWhenCheckingPresence:function(){return[]},afterInitialize:function(){return this.errors=[],this.calculateVisibility(),this.hasLengthValidation()?this.listenTo(this,"change:value",this.calculateLength):void 0},getError:function(){return this.errors.length>0?this.errors.join(" "):void 0},calculateLength:function(){return this.set("currentLength",FormRenderer.getLength(this.getLengthValidationUnits(),this.get("value")))},getLengthValidationUnits:function(){return this.get("min_max_length_units")||"characters"},setExistingValue:function(a){return a&&this.set("value",a),this.hasLengthValidation()?this.calculateLength():void 0},getValue:function(){return this.get("value")||this.defaultValue()},defaultValue:function(){return"hash"===this.valueType?{}:void 0},toText:function(){return this.getValue()},hasValue:function(){return"hash"===this.valueType?_.some(this.get("value")||{},function(a){return function(b,d){return!(c.call(a.ignoreKeysWhenCheckingPresence(),d)>=0||!b)}}(this)):!!this.get("value")},getOptions:function(){return this.get("options")||[]},getColumns:function(){return this.get("columns")||[]},getSize:function(){return this.get("size")||"small"},sizeToHeaderTag:function(){return{large:"h2",medium:"h3",small:"h4"}[this.getSize()]}}),FormRenderer.Views.ResponseField=Backbone.View.extend({className:"fr_response_field",events:{"blur input, textarea, select":"_onBlur"},initialize:function(a){return this.form_renderer=a.form_renderer,this.showLabels=this.form_renderer?this.form_renderer.options.showLabels:a.showLabels,this.model=a.model,this.listenTo(this.model,"afterValidate",this.render),this.listenTo(this.model,"change",this._onInput),this.listenTo(this.model,"change:currentLength",this.auditLength),this.listenTo(this.model,"change:error",this.toggleErrorModifier),this.$el.addClass("fr_response_field_"+this.model.field_type),this.model.id?this.$el.addClass("fr_response_field_"+this.model.id):void 0},getDomId:function(){return this.model.cid},reflectConditions:function(){return this.model.isVisible?this.$el.show():this.$el.hide()},_onBlur:function(){return this.model.hasValue()?setTimeout(function(c){return function(){var d;return d=document.activeElement,b.contains(c.el,d)?void 0:a(d)?b(document).one("mouseup",function(){return c.model.validate()}):c.model.validate()}}(this),1):void 0},_onInput:function(){return this.model.errors.length>0?this.model.validate({clearOnly:!0}):void 0},focus:function(){return this.$el.find(":input:eq(0)").focus()},auditLength:function(){var a,b;if(this.model.hasLengthValidation()&&(a=this.$el.find(".fr_length_counter"))[0])return b=this.model.validateLength(),"short"===b?a.addClass("is_short").removeClass("is_long"):"long"===b?a.addClass("is_long").removeClass("is_short"):a.removeClass("is_short is_long")},toggleErrorModifier:function(){return this.$el[this.model.getError()?"addClass":"removeClass"]("error")},render:function(){var a;return this.$el.html(JST["partials/response_field"](this)),rivets.bind(this.$el,{model:this.model}),this.auditLength(),null!=(a=this.form_renderer)&&a.trigger("viewRendered",this),this}})}.call(this),function(){var a,b,d,e,f,g,h;for(FormRenderer.Models.NonInputResponseField=FormRenderer.Models.ResponseField.extend({input_field:!1,validate:function(){},setExistingValue:function(){}}),g=FormRenderer.NON_INPUT_FIELD_TYPES,b=0,e=g.length;e>b;b++)a=g[b],FormRenderer.Models["ResponseField"+c.classify(a)]=FormRenderer.Models.NonInputResponseField.extend({field_type:a});for(FormRenderer.Views.NonInputResponseField=FormRenderer.Views.ResponseField.extend({render:function(){var a;return this.$el.html(JST["partials/non_input_response_field"](this)),null!=(a=this.form_renderer)&&a.trigger("viewRendered",this),this}}),h=FormRenderer.NON_INPUT_FIELD_TYPES,d=0,f=h.length;f>d;d++)a=h[d],FormRenderer.Views["ResponseField"+c.classify(a)]=FormRenderer.Views.NonInputResponseField.extend({field_type:a})}.call(this),function(){FormRenderer.Models.RepeatingGroup=FormRenderer.Models.BaseFormComponent.extend({group:!0,afterInitialize:function(){return this.calculateVisibility(),this.entries=[]},setExistingValue:function(a){return!this.isRequired()||a&&0!==a.length||(a=[{}]),!this.isRequired()&&_.isArray(a)&&_.isEmpty(a)&&this.set("skipped",!0),this.isRequired()||a||(a=[{}]),this.entries=_.map(a,function(a){return function(b){return new FormRenderer.Models.RepeatingGroupEntry({value:b},a.fr,a)}}(this))},addEntry:function(){return this.entries.push(new FormRenderer.Models.RepeatingGroupEntry({},this.fr,this))},removeEntry:function(a){return this.entries.splice(a,1),0===this.entries.length?this.set("skipped",!0):void 0},isSkipped:function(){return!!this.get("skipped")},getValue:function(){return this.isSkipped()?[]:_.invoke(this.entries,"getValue")},maxEntries:function(){return this.get("maxentries")?parseInt(this.get("maxentries"),10)||1/0:1/0},canAdd:function(){return this.entries.length<this.maxEntries()}}),FormRenderer.Models.RepeatingGroupEntry=Backbone.Model.extend({initialize:function(a,b,c){return this.fr=b,this.repeatingGroup=c,this.initFormComponents(this.repeatingGroup.get("children"),this.get("value")||{})},reflectConditions:function(){return this.view.reflectConditions()},canRemove:function(){return this.repeatingGroup.entries.length>1||!this.repeatingGroup.isRequired()}}),FormRenderer.Views.RepeatingGroup=Backbone.View.extend({attributes:{style:"border: 1px solid gray; padding: 10px;"},className:"fr_repeating_group",events:{"click .js-remove-entry":"removeEntry","click .js-add-entry":"addEntry","click .js-skip":"toggleSkip"},initialize:function(a){return this.form_renderer=a.form_renderer,this.model=a.model,this.model.id?this.$el.attr("id","fr_repeating_group_"+this.model.id):void 0},toggleSkip:function(){return this.model.set("skipped",!this.model.isSkipped()),this.model.isSkipped()||0!==this.model.entries.length?void 0:this.addEntry()},reflectConditions:function(){return this.model.isVisible?this.$el.show():this.$el.hide()},addEntry:function(){return this.model.addEntry(),this.render()},removeEntry:function(a){var b;return b=this.$el.find(".js-remove-entry").index(a.target),this.model.removeEntry(b),this.render()},render:function(){var a,b,c,d,e,f,g,h;for(this.$el.html(JST["partials/repeating_group"](this)),rivets.bind(this.$el,{model:this.model}),a=this.$el.find(".repeating_group_entries"),g=this.model.entries,c=e=0,f=g.length;f>e;c=++e)b=g[c],d=new FormRenderer.Views.RepeatingGroupEntry({entry:b,form_renderer:this.form_renderer,idx:c}),b.view=d,a.append(d.render().el);return null!=(h=this.form_renderer)&&h.trigger("viewRendered",this),this}}),FormRenderer.Views.RepeatingGroupEntry=Backbone.View.extend({attributes:{style:"border: 1px solid gray; padding: 10px; margin: 10px;"},className:"fr_repeating_group_entry",initialize:function(a){return this.entry=a.entry,this.form_renderer=a.form_renderer,this.idx=a.idx,this.views=[]},render:function(){var a;return this.$el.html(JST["partials/repeating_group_entry"](this)),a=this.$el.find(".repeating_group_entry_fields"),this.entry.formComponents.each(function(b){return function(c){var d;return d=FormRenderer.buildFormComponentView(c,b.form_renderer),a.append(d.render().el),d.reflectConditions(),b.views.push(d)}}(this)),this},reflectConditions:function(){var a,b,c,d,e;for(d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.reflectConditions());return e}})}.call(this),function(){FormRenderer.Models.ResponseFieldAddress=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"address",valueType:"hash",ignoreKeysWhenCheckingPresence:function(){return"country"===this.get("address_format")?[]:["country"]},setExistingValue:function(a){return FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments),(null!=a?a.country:void 0)?void 0:this.set("value.country","US")},toText:function(){return _.values(_.pick(this.getValue(),"street","city","state","zipcode","country")).join(" ")}}),FormRenderer.Views.ResponseFieldAddress=FormRenderer.Views.ResponseField.extend({initialize:function(){return FormRenderer.Views.ResponseField.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:value.country",this.render)}})}.call(this),function(){FormRenderer.Models.ResponseFieldCheckboxes=FormRenderer.Models.ResponseField.extend({field_type:"checkboxes",wrapper:"fieldset",setExistingValue:function(a){var b,c,d,e,f;if(null==a){for(b={checked:[]},f=this.getOptions(),d=0,e=f.length;e>d;d++)c=f[d],FormRenderer.toBoolean(c.checked)&&b.checked.push(c.label);return this.set("value",b)}return FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments)},toText:function(){var a,b;return a=(null!=(b=this.get("value.checked"))?b.slice(0):void 0)||[],this.get("value.other_checked")===!0&&a.push(this.get("value.other_text")),a.join(" ")},hasValue:function(){var a;return(null!=(a=this.get("value.checked"))?a.length:void 0)>0||this.get("value.other_checked")}})}.call(this),function(){FormRenderer.Models.ResponseFieldConfirm=FormRenderer.Models.ResponseField.extend({field_type:"confirm",wrapper:"none",getValue:function(){return this.get("value")||!1},setExistingValue:function(a){return this.set("value",!!a)},toText:function(){return this.get("value")?"Yes":"No"}})}.call(this),function(){FormRenderer.Models.ResponseFieldDate=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"date",valueType:"hash",toText:function(){return _.values(_.pick(this.getValue(),"month","day","year")).join("/")},validateType:function(){var a,b,c,d,e,f;return f=this.get("disable_year")?2e3:parseInt(this.get("value.year"),10)||0,a=parseInt(this.get("value.day"),10)||0,e=parseInt(this.get("value.month"),10)||0,c=1===new Date(f,1,29).getMonth()?29:28,b=[31,c,31,30,31,30,31,31,30,31,30,31],d=b[e-1],f>0&&e>0&&12>=e&&a>0&&d>=a?void 0:"date"}})}.call(this),function(){FormRenderer.Models.ResponseFieldDropdown=FormRenderer.Models.ResponseField.extend({field_type:"dropdown",setExistingValue:function(a){var b;return null!=a?FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments):(b=_.find(this.getOptions(),function(a){return FormRenderer.toBoolean(a.checked)}),b||this.get("include_blank_option")||(b=_.first(this.getOptions())),b?this.set("value",b.label):this.unset("value"))}})}.call(this),function(){FormRenderer.Models.ResponseFieldEmail=FormRenderer.Models.ResponseField.extend({field_type:"email",validateType:function(){return this.get("value").match(FormRenderer.EMAIL_REGEX)?void 0:"email"}})}.call(this),function(){FormRenderer.Models.ResponseFieldFile=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"file",addFile:function(a,b){var c;return c=this.getFiles().slice(0),c.push({id:a,filename:b}),this.set("value",c)},removeFile:function(a){var b;return b=this.getFiles().slice(0),b.splice(a,1),this.set("value",b)},getFiles:function(){return this.get("value")||[]},canAddFile:function(){return this.getFiles().length<this.maxFiles()},toText:function(){return _.compact(_.pluck(this.getFiles(),"filename")).join(" ")},hasValue:function(){return _.any(this.getFiles(),function(a){return!!a.id})},getAcceptedExtensions:function(){var a;return(a=FormRenderer.FILE_TYPES[this.get("file_types")])?_.map(a,function(a){return"."+a}):void 0},getValue:function(){return this.getFiles()},maxFiles:function(){return this.get("allow_multiple_files")?10:1}}),FormRenderer.Views.ResponseFieldFile=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click [data-fr-remove-file]":"doRemove"}),render:function(){var a;return FormRenderer.Views.ResponseField.prototype.render.apply(this,arguments),this.$input=this.$el.find("input"),this.$label=this.$el.find(".fr_add_file label"),this.$error=this.$el.find(".fr_add_file .fr_error"),a=void 0,this.$label.on("click",function(a){return b(this).hasClass("disabled")?a.preventDefault():void 0}),this.form_renderer&&this.$input.inlineFileUpload({method:"post",action:""+this.form_renderer.options.screendoorBase+"/api/form_renderer/file",ajaxOpts:{headers:this.form_renderer.serverHeaders},additionalParams:{project_id:this.form_renderer.options.project_id,response_field_id:this.model.get("id"),v:0},start:function(b){return function(c){return a=c.filename,b.$label.addClass("disabled"),b.$label.text(FormRenderer.t.uploading),b.form_renderer.requests+=1}}(this),progress:function(a){return function(b){return a.$label.text(100===b.percent?FormRenderer.t.finishing_up:""+FormRenderer.t.uploading+" ("+b.percent+"%)")}}(this),complete:function(a){return function(){return a.form_renderer.requests-=1}}(this),success:function(b){return function(c){return b.model.addFile(c.data.file_id,a),b.render()}}(this),error:function(a){return function(b){var c,d;return a.render(),c=null!=(d=b.xhr.responseJSON)?d.errors:void 0,a.$error.text(c||FormRenderer.t.error).show(),setTimeout(function(){return a.$error.hide()},2e3)}}(this)}),this},doRemove:function(a){var b;return b=this.$el.find("[data-fr-remove-file]").index(a.target),this.model.removeFile(b),this.render()}})}.call(this),function(){FormRenderer.Models.ResponseFieldIdentification=FormRenderer.Models.ResponseField.extend({field_type:"identification",valueType:"hash",isRequired:function(){return!0},validateType:function(){return this.get("value.email")&&this.get("value.name")?this.get("value.email").match(FormRenderer.EMAIL_REGEX)?void 0:"email":"identification"}})}.call(this),function(){FormRenderer.loadLeaflet=function(a){return null!=("undefined"!=typeof L&&null!==L?L.GeoJSON:void 0)?a():requireOnce(FormRenderer.MAPBOX_URL,a)},FormRenderer.initMap=function(a){return L.mapbox.accessToken="pk.eyJ1IjoiYWRhbWphY29iYmVja2VyIiwiYSI6Im1SVEQtSm8ifQ.ZgEOSXsv9eLfGQ-9yAmtIg",L.mapbox.map(a,"adamjacobbecker.ja7plkah")},FormRenderer.Models.ResponseFieldMapMarker=FormRenderer.Models.ResponseField.extend({field_type:"map_marker",latLng:function(){return this.get("value")},defaultLatLng:function(){var a,b;return(a=this.get("default_lat"))&&(b=this.get("default_lng"))?[a,b]:void 0}}),FormRenderer.Views.ResponseFieldMapMarker=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click .fr_map_cover":"enable","click [data-fr-clear-map]":"disable"}),initialize:function(){return FormRenderer.Views.ResponseField.prototype.initialize.apply(this,arguments),this.on("shown",function(){var a;return this.refreshing=!0,null!=(a=this.map)&&a._onResize(),setTimeout(function(a){return function(){return a.refreshing=!1}}(this),0)})},render:function(){return FormRenderer.Views.ResponseField.prototype.render.apply(this,arguments),this.$cover=this.$el.find(".fr_map_cover"),FormRenderer.loadLeaflet(function(a){return function(){return a.initMap(),a.model.latLng()?a.enable():void 0}}(this)),this},initMap:function(){return this.map=FormRenderer.initMap(this.$el.find(".fr_map_map")[0]),this.$el.find(".fr_map_map").data("map",this.map),this.map.setView(this.model.latLng()||this.model.defaultLatLng()||FormRenderer.DEFAULT_LAT_LNG,13),this.marker=L.marker([0,0]),this.map.on("move",b.proxy(this._onMove,this))},_onMove:function(){var a;if(!this.refreshing)return a=this.map.getCenter(),this.marker.setLatLng(a),this.model.set({value:[a.lat.toFixed(7),a.lng.toFixed(7)]}),this.model.trigger("change:value.0 change:value.1")},enable:function(){return this.map?(this.map.addLayer(this.marker),this.$cover.hide(),this._onMove()):void 0},disable:function(a){return a.preventDefault(),this.map.removeLayer(this.marker),this.$el.find(".fr_map_cover").show(),this.model.unset("value")}})}.call(this),function(){FormRenderer.Models.ResponseFieldNumber=FormRenderer.Models.ResponseField.extend({field_type:"number",calculateSize:function(){var a,b;return a=(b=parseInt(this.get("max"),10))?(""+b).length:6,this.get("integer_only")||(a+=2),a>6?"seven_plus":a>3?"four_six":"one_three"},validateType:function(){var a;return a=FormRenderer.normalizeNumber(this.get("value"),this.get("units")),a.match(/^-?\d*(\.\d+)?$/)?void 0:"number"}})}.call(this),function(){FormRenderer.Models.ResponseFieldParagraph=FormRenderer.Models.ResponseField.extend({field_type:"paragraph"})}.call(this),function(){FormRenderer.Models.ResponseFieldPhone=FormRenderer.Models.ResponseField.extend({field_type:"phone",validateType:function(){var a,b,c,d;
return b="us"===this.get("phone_format"),c=b?10:7,a=(null!=(d=this.get("value").match(/\d/g))?d.join(""):void 0)||"",a.length>=c?void 0:b?"us_phone":"phone"}}),FormRenderer.Views.ResponseFieldPhone=FormRenderer.Views.ResponseField.extend({phonePlaceholder:function(){return"us"===this.model.get("phone_format")?"(xxx) xxx-xxxx":void 0}})}.call(this),function(){FormRenderer.Models.ResponseFieldPrice=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"price",valueType:"hash",toText:function(){return""+(this.getValue().dollars||"0")+"."+(this.getValue().cents||"00")},validateType:function(){var a;return a=[],this.get("value.dollars")&&a.push(this.get("value.dollars").replace(/,/g,"").replace(/^\$/,"")),this.get("value.cents")&&a.push(this.get("value.cents")),_.every(a,function(a){return a.match(/^-?\d+$/)})?void 0:"price"}}),FormRenderer.Views.ResponseFieldPrice=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{'blur [data-rv-input="model.value.cents"]':"formatCents"}),formatCents:function(a){var c;return c=b(a.target).val(),c&&c.match(/^\d$/)?this.model.set("value.cents","0"+c):void 0}})}.call(this),function(){FormRenderer.Models.ResponseFieldRadio=FormRenderer.Models.ResponseFieldCheckboxes.extend({field_type:"radio",wrapper:"fieldset"})}.call(this),function(){FormRenderer.Models.ResponseFieldTable=FormRenderer.Models.ResponseField.extend({field_type:"table",initialize:function(){return FormRenderer.Models.ResponseField.prototype.initialize.apply(this,arguments),this.get("column_totals")?this.listenTo(this,"change:value.*",this.calculateColumnTotals):void 0},canAddRows:function(){return this.numRows<this.maxRows()},minRows:function(){return parseInt(this.get("minrows"),10)||0},maxRows:function(){return this.get("maxrows")?parseInt(this.get("maxrows"),10)||1/0:1/0},setExistingValue:function(a){var b,c;return b=(null!=(c=_.find(a,function(){return!0}))?c.length:void 0)||0,this.numRows=Math.max(this.minRows(),b,1),this.set("value",_.tap([],function(b){return function(c){var d,e,f,g,h,i,j,k,l,m;for(j=b.getColumns(),m=[],g=0,i=j.length;i>g;g++){for(e=j[g],d=[],f=h=0,k=b.numRows-1;k>=0?k>=h:h>=k;f=k>=0?++h:--h)d.push(b.getPresetValue(e.label,f)||(null!=a&&null!=(l=a[e.label])?l[f]:void 0));m.push(c.push(d))}return m}}(this)))},hasValue:function(){return _.some(this.getValue(),function(a){return function(b,c){return _.some(b,function(b,d){return!a.getPresetValue(c,d)&&!!b})}}(this))},getPresetValue:function(a,b){var c,d;return null!=(c=this.get("preset_values"))&&null!=(d=c[a])?d[b]:void 0},getValue:function(){return _.tap({},function(a){return function(b){var c,d,e,f,g,h,i;for(h=a.getColumns(),i=[],e=f=0,g=h.length;g>f;e=++f)c=h[e],b[c.label]=[],i.push(function(){var a,f,g;for(g=[],d=a=0,f=this.numRows-1;f>=0?f>=a:a>=f;d=f>=0?++a:--a)g.push(b[c.label].push(this.get("value."+e+"."+d)||""));return g}.call(a));return i}}(this))},toText:function(){return _.flatten(_.values(this.getValue())).join(" ")},calculateColumnTotals:function(){var a,b,c,d,e,f,g,h,i,j,k;for(i=this.getColumns(),k=[],e=f=0,h=i.length;h>f;e=++f){for(a=i[e],c=[],d=g=0,j=this.numRows-1;j>=0?j>=g:g>=j;d=j>=0?++g:--g)c.push(parseFloat((this.get("value."+e+"."+d)||"").replace(/\$?,?/g,"")));b=_.reduce(c,function(a,b){return _.isNaN(b)?a:a+b},0),k.push(this.set("columnTotals."+e,this.formatColumnSum(b)))}return k},formatColumnSum:function(a){var b,d,e;return a>0?(b=parseFloat(a.toFixed(10)),d=(null!=(e=(""+b).split(".")[1])?e.length:void 0)||0,c.numberFormat(b,d,".",",")):""}}),FormRenderer.Views.ResponseFieldTable=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click .js-add-row":"addRow","click .js-remove-row":"removeRow"}),initialize:function(){return FormRenderer.Views.ResponseField.prototype.initialize.apply(this,arguments),this.on("shown",function(){return this.initExpanding()})},render:function(){return FormRenderer.Views.ResponseField.prototype.render.apply(this,arguments),this.initExpanding(),this},initExpanding:function(){},canRemoveRow:function(a){var b;return b=Math.max(1,this.model.minRows()),a>b-1},addRow:function(a){return a.preventDefault(),this.model.numRows++,this.render()},removeRow:function(a){var c,d,e,f,g;a.preventDefault(),d=b(a.currentTarget).closest("[data-row-index]").data("row-index"),e=this.model.get("value"),f={};for(c in e)g=e[c],f[c]=_.tap({},function(a){var b,c,e;e=[];for(b in g)c=g[b],b=parseInt(b,10),e.push(d>b?a[b]=c:b>d?a[b-1]=c:void 0);return e});return this.model.numRows--,this.model.attributes.value=f,this.model.trigger("change change:value",this.model),this.render()}})}.call(this),function(){FormRenderer.Models.ResponseFieldText=FormRenderer.Models.ResponseField.extend({field_type:"text"})}.call(this),function(){FormRenderer.Models.ResponseFieldTime=FormRenderer.Models.ResponseField.extend({field_type:"time",wrapper:"fieldset",valueType:"hash",ignoreKeysWhenCheckingPresence:function(){return["am_pm"]},setExistingValue:function(a){return FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments),(null!=a?a.am_pm:void 0)?void 0:this.set("value.am_pm","AM")},toText:function(){return""+(this.getValue().hours||"00")+":"+(this.getValue().minutes||"00")+":"+(this.getValue().seconds||"00")+" "+this.getValue().am_pm},validateType:function(){var a,b,c;return a=parseInt(this.get("value.hours"),10)||0,b=parseInt(this.get("value.minutes"),10)||0,c=parseInt(this.get("value.seconds"),10)||0,a>=1&&12>=a&&b>=0&&59>=b&&c>=0&&59>=c?void 0:"time"}})}.call(this),function(){FormRenderer.Models.ResponseFieldWebsite=FormRenderer.Models.ResponseField.extend({field_type:"website"})}.call(this),function(){var a;a={validateType:function(){},validationFns:["validateType","validateInteger","validateLength","validateMinMax"],validate:function(a){var b,c,d,e,f,g,h;if(null==a&&(a={}),d=this.get("error"),this.errors=[],this.isVisible){if(this.hasValue())for(h=this.validationFns,f=0,g=h.length;g>f;f++)e=h[f],c=this[e](),c&&this.errors.push(FormRenderer.t.errors[c]);else this.isRequired()&&this.errors.push(FormRenderer.t.errors.blank);return b=this.getError(),a.clearOnly&&d!==b?this.set("error",null):this.set("error",this.getError()),this.fr.trigger("afterValidate afterValidate:one",this)}},hasIntegerValidation:function(){return"number"===this.field_type&&this.get("integer_only")},validateInteger:function(){var a;if(this.hasIntegerValidation())return a=FormRenderer.normalizeNumber(this.get("value"),this.get("units")),a.match(/^-?\d+$/)?void 0:"integer"},hasLengthValidation:function(){var a;return("text"===(a=this.field_type)||"paragraph"===a)&&(this.get("minlength")||this.get("maxlength"))},validateLength:function(){var a,b,c;if(this.hasLengthValidation())return c=parseInt(this.get("minlength"),10)||void 0,b=parseInt(this.get("maxlength"),10)||void 0,a=FormRenderer.getLength(this.getLengthValidationUnits(),this.get("value")),c&&c>a?"short":b&&a>b?"long":void 0},hasMinMaxValidation:function(){var a;return("number"===(a=this.field_type)||"price"===a)&&(this.get("min")||this.get("max"))},validateMinMax:function(){var a,b,c;if(this.hasMinMaxValidation())return b=this.get("min")&&parseFloat(this.get("min")),a=this.get("max")&&parseFloat(this.get("max")),c=parseFloat("price"===this.field_type?""+(this.get("value.dollars")||0)+"."+(this.get("value.cents")||0):this.get("value").replace(/,/g,"")),b&&b>c?"small":a&&c>a?"large":void 0}},_.extend(FormRenderer.Models.ResponseField.prototype,a)}.call(this),function(){var a;a={getValue:function(){return _.tap({},function(a){return function(b){return a.formComponents.each(function(a){return a.shouldPersistValue()?b[a.get("id")]=a.getValue():void 0})}}(this))},initFormComponents:function(a,b){var d,e,f,g,h;for(this.formComponents=new Backbone.Collection,g=0,h=a.length;h>g;g++)d=a[g],e="group"===d.type?FormRenderer.Models.RepeatingGroup:FormRenderer.Models["ResponseField"+c.classify(d.field_type)],f=new e(d,this.fr,this),f.setExistingValue(b[f.get("id")]),this.formComponents.add(f);return this.initConditions(),this.listenTo(this.formComponents,"change:value change:value.*",function(a){return this.runConditions(a),this.fr.responsesChanged()})},initConditions:function(){return this.allConditions=_.flatten(this.formComponents.map(function(a){return _.map(a.getConditions(),function(b){return _.extend({},b,{parent:a})})}))},conditionsForResponseField:function(a){return _.filter(this.allConditions,function(b){return""+b.response_field_id==""+a.id})},runConditions:function(a){var b;return b=!1,_.each(this.conditionsForResponseField(a),function(a){return a.parent.calculateVisibility()?b=!0:void 0}),b?this.reflectConditions():void 0}},_.extend(FormRenderer.prototype,a),_.extend(FormRenderer.Models.RepeatingGroupEntry.prototype,a)}.call(this),function(){FormRenderer.Plugins.Base=function(){function a(a){this.fr=a}return a}()}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Plugins.Autosave=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.afterFormLoad=function(){return setInterval(function(a){return function(){return a.fr.state.get("hasChanges")?a.fr.save():void 0}}(this),5e3)},c}(FormRenderer.Plugins.Base)}.call(this),function(){var b,c,d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};c="frDraft",b=function(b){var c,d,e;return e=a.location.href,b=b.replace(/[\[\]]/g,"\\$&"),c=new RegExp("[?&]"+b+"(=([^&#]*)|&|#|$)"),d=c.exec(e),d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},FormRenderer.Plugins.BookmarkDraft=function(a){function d(){return d.__super__.constructor.apply(this,arguments)}return e(d,a),d.prototype.beforeFormLoad=function(){var a;return(a=b(c))?this.fr.options.response.id=a:void 0},d.prototype.afterFormLoad=function(){return this.fr.subviews.bookmarkDraft=new FormRenderer.Plugins.BookmarkDraft.View({form_renderer:this.fr}),this.fr.$el.append(this.fr.subviews.bookmarkDraft.render().el)},d}(FormRenderer.Plugins.Base),FormRenderer.Plugins.BookmarkDraft.View=Backbone.View.extend({events:{"click .js-fr-bookmark":"requestBookmark"},initialize:function(a){return this.form_renderer=a.form_renderer},render:function(){return this.$el.html(JST["plugins/bookmark_draft"](this)),this.form_renderer.trigger("viewRendered",this),this},showBookmark:function(a){return prompt(FormRenderer.t.bookmark_hint,a)},getUrl:function(){var a;return a=new Url,a.query[c]=this.form_renderer.options.response.id,a.toString()},requestBookmark:function(a){var b;return a.preventDefault(),b=function(a){return function(){return a.render(),a.showBookmark(a.getUrl())}}(this),this.form_renderer.options.response.id?b():(this.$el.find("a").text(FormRenderer.t.saving),this.form_renderer.waitForRequests(function(a){return function(){return a.form_renderer.options.response.id?b():a.form_renderer.save({cb:b})}}(this)))}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Plugins.BottomBar=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.afterFormLoad=function(){return this.fr.subviews.bottomBar=new FormRenderer.Plugins.BottomBar.View({form_renderer:this.fr}),this.fr.$el.append(this.fr.subviews.bottomBar.render().el)},c}(FormRenderer.Plugins.Base),FormRenderer.Plugins.BottomBar.View=Backbone.View.extend({events:{"click [data-fr-previous-page]":function(a){return a.preventDefault(),this.form_renderer.handlePreviousPage()},"click [data-fr-next-page]":function(a){return a.preventDefault(),this.form_renderer.handleNextPage()}},initialize:function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage change:hasChanges change:submitting change:hasServerErrors",this.render)},render:function(){return this.$el.html(JST["plugins/bottom_bar"](this)),this.form_renderer.trigger("viewRendered",this),this}})}.call(this),function(){var b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};FormRenderer.Plugins.ErrorBar=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return c(b,a),b.prototype.afterFormLoad=function(){return this.fr.subviews.errorBar=new FormRenderer.Plugins.ErrorBar.View({form_renderer:this.fr}),this.fr.$el.prepend(this.fr.subviews.errorBar.render().el)},b}(FormRenderer.Plugins.Base),FormRenderer.Plugins.ErrorBar.View=Backbone.View.extend({events:{"click a":function(a){return a.preventDefault(),this.form_renderer.focusFirstError()}},initialize:function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer,"afterValidate:all",function(a){return function(){return a.render(),a.$el.find(".fr_error_alert_bar a").focus()}}(this)),this.listenTo(this.form_renderer,"afterValidate:one",function(){return this.form_renderer.areAllPagesValid()?this.render():void 0})},render:function(){return this.$el.html(JST["plugins/error_bar"](this)),this.form_renderer.trigger("viewRendered",this),this.form_renderer.areAllPagesValid()||a.scrollTo(0,this.$el.offset().top-this.form_renderer.options.scrollToPadding),this}})}.call(this),function(){var b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};FormRenderer.Plugins.PageState=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.afterFormLoad=function(){var b,c,d;return(b=null!=(d=a.location.hash.match(/page([0-9]+)/))?d[1]:void 0)&&(c=parseInt(b,10),this.fr.isPageVisible(c)&&this.fr.activatePage(c)),this.fr.state.on("change:activePage",function(b,c){return a.location.hash="page"+c})},d}(FormRenderer.Plugins.Base)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Plugins.SavedSession=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.beforeFormLoad=function(){var a,b;return a="project-"+this.fr.options.project_id+"-response-id",(b=this.fr.options.response).id||(b.id=Cookies.get(a)),this.fr.on("afterSave",function(){return this.state.get("submitting")?void 0:Cookies.set(a,this.options.response.id)}),this.fr.on("afterSubmit",function(){return Cookies.remove(a)}),this.fr.on("errorSaving",function(){return Cookies.remove(a)})},c}(FormRenderer.Plugins.Base)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Plugins.WarnBeforeUnload=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.afterFormLoad=function(){return BeforeUnload.enable({"if":function(a){return function(){return a.fr.state.get("hasChanges")}}(this)})},c}(FormRenderer.Plugins.Base)}.call(this),function(){FormRenderer.Views.Page=Backbone.View.extend({className:"fr_page",initialize:function(a){return this.form_renderer=a.form_renderer,this.models=[],this.views=[]},render:function(){var a,b,c,d,e;for(this.hide(),e=this.models,c=0,d=e.length;d>c;c++)a=e[c],b=FormRenderer.buildFormComponentView(a,this.form_renderer),this.$el.append(b.render().el),b.reflectConditions(),this.views.push(b);return this},hide:function(){var a,b,c,d,e;for(this.$el.hide(),d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.trigger("hidden"));return e},show:function(){var a,b,c,d,e;for(this.$el.show(),d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.trigger("shown"));return e},reflectConditions:function(){var a,b,c,d,e;for(d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.reflectConditions());return e},validate:function(){var a,b,c,d,e,f;for(e=this.models,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.input_field&&b.validate(),f.push(b.group?function(){var c,d,e,f;for(e=b.entries,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(a.formComponents.each(function(){return function(a){return a.validate()}}(this)));return f}.call(this):void 0);return f},firstViewWithError:function(){var a,b,c,d,e,f,g;e=this.views;for(d in e)if(c=e[d],c.model.group){if(!c.model.isSkipped()){f=c.model.entries;for(d in f){a=f[d],g=a.view.views;for(d in g)if(b=g[d],b.model.errors.length>0)return b}}}else if(c.model.errors.length>0)return c;return void 0},isVisible:function(){return!!_.find(this.models,function(a){return a.isVisible})},isValid:function(){return!this.firstViewWithError()}})}.call(this),function(){FormRenderer.Views.Pagination=Backbone.View.extend({events:{"click [data-activate-page]":function(a){return a.preventDefault(),this.form_renderer.activatePage(b(a.currentTarget).data("activate-page"))}},initialize:function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage",this.render),this.listenTo(this.form_renderer,"afterValidate",this.render)},render:function(){return this.$el.html(JST["partials/pagination"](this)),this.form_renderer.trigger("viewRendered",this),this}})}.call(this),FormRenderer.FILE_TYPES={images:["bmp","gif","jpg","jpeg","png","psd","tif","tiff"],videos:["m4v","mp4","mov","mpg"],audio:["m4a","mp3","wav"],docs:["doc","docx","pdf","rtf","txt"],spreadsheets:["csv","xls","xlsx"],presentations:["ppt","pptx"],pdfs:["pdf"]};var d={address:"Address",add_another_row:"Add another row",back_to_page:"Back to page :num",blind:"Blind",bookmark_hint:"To finish your response later, copy the link below.",cents:"Cents",characters:"characters",city:"City",clear:"Clear",click_to_set:"Click to set location",coordinates:"Coordinates",country:"Country",dollars:"Dollars",email:"Email",enter_at_least:"Enter at least :min",enter_between:"Enter between :min and :max",enter_exactly:"Enter :num",enter_up_to:"Enter up to :max",error:"Error",errors:{blank:"This field can't be blank.",date:"Please enter a valid date.",email:"Please enter a valid email address.",identification:"Please enter your name and email address.",integer:"Please enter a whole number.",large:"Your answer is too large.","long":"Your answer is too long.",number:"Please enter a valid number.",phone:"Please enter a valid phone number.",price:"Please enter a valid price.","short":"Your answer is too short.",small:"Your answer is too small.",time:"Please enter a valid time.",us_phone:"Please enter a valid 10-digit phone number."},error_bar:{errors:"Your response has <a href='#'>validation errors</a>."},error_filename:"Error reading filename",error_loading:"Error loading form",error_saving:"Error saving",finishing_up:"Finishing up...",finish_later:"Finish this later",hidden:"Hidden",hidden_until_rules_met:"Hidden until rules are met",loading_form:"Loading form...",na:"N/A",name:"Name",next_page:"Next page",not_supported:"Sorry, your browser does not support this embedded form. Please visit <a href=':url?fr_not_supported=t'>:url</a> to fill out this form.",other:"Other",postal_code:"Postal Code",province:"Province",remove:"Remove",saved:"Saved",saving:"Saving...",state:"State",state_province_region:"State / Province / Region",submit:"Submit",submitting:"Submitting",thanks:"Thanks for submitting our form!",upload:"Upload a file",uploading:"Uploading...",upload_another:"Upload another file",we_accept:"We'll accept",words:"words",write_here:"Write your answer here",zip_code:"ZIP Code"};"undefined"!=typeof FormRenderer&&(FormRenderer.t=d),a.JST||(a.JST={}),a.JST["fields/address"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j,k;if(a=this.model.get("address_format"),d(b("\n\n")),"city_state"!==a&&"city_state_zip"!==a&&"country"!==a&&(d(b("\n  <div class='fr_grid'>\n    <div class='fr_full has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),d(this.getDomId()),d(b("_street'>")),d(FormRenderer.t.address),d(b('</label>\n      <input type="text"\n             id="')),d(this.getDomId()),d(b("_street\"\n             data-rv-input='model.value.street' />\n    </div>\n  </div>\n"))),d(b("\n\n")),"country"!==a){if(d(b("\n  <div class='fr_grid'>\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),d(this.getDomId()),d(b("_city'>")),d(FormRenderer.t.city),d(b("</label>\n      <input type=\"text\"\n             data-rv-input='model.value.city'\n             id='")),d(this.getDomId()),d(b("_city' />\n    </div>\n\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),d(this.getDomId()),d(b("_state'>\n        ")),"US"===this.model.get("value.country")?(d(b("\n          ")),d(FormRenderer.t.state),d(b("\n        "))):"CA"===this.model.get("value.country")?(d(b("\n          ")),d(FormRenderer.t.province),d(b("\n        "))):(d(b("\n          ")),d(FormRenderer.t.state_province_region),d(b("\n        "))),d(b("\n      </label>\n\n      ")),"US"===(i=this.model.get("value.country"))||"CA"===i){for(d(b("\n        <select data-rv-value='model.value.state' data-width='100%' id='")),d(this.getDomId()),d(b("_state'>\n          <option></option>\n          ")),j=FormRenderer["PROVINCES_"+this.model.get("value.country")],e=0,g=j.length;g>e;e++)c=j[e],d(b("\n            <option value='")),d(c),d(b("'>")),d(c),d(b("</option>\n          "));d(b("\n        </select>\n      "))}else d(b("\n        <input type=\"text\" data-rv-input='model.value.state' id='")),d(this.getDomId()),d(b("_state' />\n      "));d(b("\n    </div>\n  </div>\n"))}if(d(b("\n\n<div class='fr_grid'>\n  ")),"city_state"!==a&&"country"!==a&&(d(b("\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),d(this.getDomId()),d(b("_zipcode'>\n        ")),"US"===this.model.get("value.country")?(d(b("\n          ")),d(FormRenderer.t.zip_code),d(b("\n        "))):(d(b("\n          ")),d(FormRenderer.t.postal_code),d(b("\n        "))),d(b("\n      </label>\n      <input type=\"text\"\n             data-rv-input='model.value.zipcode'\n             id='")),d(this.getDomId()),d(b("_zipcode' />\n    </div>\n  "))),d(b("\n\n  ")),"city_state"!==a&&"city_state_zip"!==a){for(d(b("\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),d(this.getDomId()),d(b("_country'>")),d(FormRenderer.t.country),d(b("</label>\n      <select data-rv-value='model.value.country' data-width='100%' id='")),d(this.getDomId()),d(b("_country'>\n        ")),k=FormRenderer.ORDERED_COUNTRIES,f=0,h=k.length;h>f;f++)c=k[f],d(b("\n          <option value='")),d(c),d(b("'>")),d(ISOCountryNames[c]||"---"),d(b("</option>\n        "));d(b("\n      </select>\n    </div>\n  "))}d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/block_of_text"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["partials/labels"](this))),d(b("\n\n<div class='fr_text size_")),d(this.model.getSize()),d(b("'>\n  ")),d(b(FormRenderer.formatHTML(this.model.get("description")))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/checkboxes"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["partials/options_field"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/confirm"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<label class='fr_option control'>\n  <input type='checkbox' data-rv-checked='model.value' />\n  ")),d(this.model.get("label")),d(b(JST["partials/required"](this))),d(b("\n</label>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/date"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_grid'>\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b('_month">MM</label>\n    <input type="text"\n           id="')),d(this.getDomId()),d(b("_month\"\n           data-rv-input='model.value.month'\n           maxlength='2'\n           size='2' />\n  </div>\n\n  <div class='fr_spacer'>/</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b("_day\">DD</label>\n    <input type=\"text\"\n           data-rv-input='model.value.day'\n           maxlength='2'\n           size='2'\n           id=\"")),d(this.getDomId()),d(b('_day" />\n  </div>\n\n  ')),this.model.get("disable_year")||(d(b("\n    <div class='fr_spacer'>/</div>\n\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b("_year\">YYYY</label>\n      <input type=\"text\"\n             data-rv-input='model.value.year'\n             maxlength='4'\n             size='4'\n             id=\"")),d(this.getDomId()),d(b('_year" />\n    </div>\n  '))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/dropdown"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;for(d(b('<select id="')),d(this.getDomId()),d(b("\" data-rv-value='model.value'>\n  ")),this.model.get("include_blank_option")&&d(b("\n    <option></option>\n  ")),d(b("\n\n  ")),f=this.model.getOptions(),c=0,e=f.length;e>c;c++)a=f[c],d(b('\n    <option value="')),d(a.label),d(b('">\n      ')),d(a.translated_label||a.label),d(b("\n    </option>\n  "));d(b("\n</select>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/email"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text" inputmode="email"\n       id="')),d(this.getDomId()),d(b("\"\n       data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/file"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],d=this,e=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:d.escape(b))};return function(){var a,d,f,g,h;for(e(b("<div class='fr_files'>\n  ")),h=this.model.getFiles(),f=0,g=h.length;g>f;f++)a=h[f],e(b("\n    <div class='fr_file'>\n      <span>")),e(a.filename),e(b("</span>\n      <button data-fr-remove-file class='")),e(FormRenderer.BUTTON_CLASS),e(b("'>")),e(FormRenderer.t.remove),e(b("</button>\n    </div>\n  "));e(b("\n</div>\n\n")),this.model.canAddFile()&&(e(b("\n  <div class='fr_add_file'>\n    <label for='")),e(this.getDomId()),e(b("' class='")),e(FormRenderer.BUTTON_CLASS),e(b("'>\n      ")),e(this.model.getFiles().length?FormRenderer.t.upload_another:FormRenderer.t.upload),e(b("\n    </label>\n\n    <input type='file'\n           id='")),e(this.getDomId()),e(b("'\n           ")),(d=this.model.getAcceptedExtensions())&&(e(b("\n            accept='")),e(d.join(",")),e(b("'\n           "))),e(b("\n           />\n\n    <span class='fr_error' style='display:none'></span>\n\n    ")),(d=this.model.getAcceptedExtensions())&&(e(b("\n      <div class='fr_description'>\n        ")),e(FormRenderer.t.we_accept),e(b(" ")),e(c.toSentence(d)),e(b("\n      </div>\n    "))),e(b("\n  </div>\n"))),e(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/identification"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_grid'>\n  <div class='fr_half'>\n    <label for='")),d(this.getDomId()),d(b("-name'>")),d(FormRenderer.t.name),d(b(" <abbr class='fr_required' title='required'>*</abbr></label>\n    <input type='text'\n           id='")),d(this.getDomId()),d(b("-name'\n           data-rv-input='model.value.name' />\n  </div>\n\n  <div class='fr_half'>\n    <label for='")),d(this.getDomId()),d(b("-email'>")),d(FormRenderer.t.email),d(b(" <abbr class='fr_required' title='required'>*</abbr></label>\n    <input type=\"text\"\n           id='")),d(this.getDomId()),d(b("-email'\n           data-rv-input='model.value.email' />\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/map_marker"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_map_wrapper'>\n  <div class='fr_map_map' />\n\n  <div class='fr_map_cover'>\n    ")),d(FormRenderer.t.click_to_set),d(b("\n  </div>\n\n  <div class='fr_map_toolbar'>\n    <div class='fr_map_coord'>\n      <strong>")),d(FormRenderer.t.coordinates),d(b(":</strong>\n      <span data-rv-show='model.value'>\n        <span data-rv-text='model.value.0' />,\n        <span data-rv-text='model.value.1' />\n      </span>\n      <span data-rv-hide='model.value' class='fr_map_no_location'>")),d(FormRenderer.t.na),d(b("</span>\n    </div>\n    <a class='fr_map_clear' data-fr-clear-map data-rv-show='model.value' href='#'>")),d(FormRenderer.t.clear),d(b("</a>\n  </div>\n</div>\n"))
}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/number"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b("\"\n       data-rv-input='model.value'\n       class=\"size_")),d(this.model.calculateSize()),d(b('" />\n\n')),this.model.get("units")&&(d(b("\n  <span class='fr_units'>\n    ")),d(this.model.get("units")),d(b("\n  </span>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/page_break"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_page_break_inner'>\n  Page break\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/paragraph"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<textarea\n   id="')),d(this.getDomId()),d(b('"\n   class="size_')),d(this.model.getSize()),d(b("\"\n   data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/phone"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       inputmode="tel"\n       id="')),d(this.getDomId()),d(b("\"\n       data-rv-input='model.value'\n       placeholder=\"")),d(this.phonePlaceholder()),d(b('" />\n'))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/price"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_grid'>\n  <div class='fr_spacer'>$</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b('_dollars">')),d(FormRenderer.t.dollars),d(b('</label>\n    <input type="text"\n           id="')),d(this.getDomId()),d(b("_dollars\"\n           data-rv-input='model.value.dollars'\n           size='6' />\n  </div>\n\n  ")),this.model.get("disable_cents")||(d(b("\n    <div class='fr_spacer'>.</div>\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b('_cents">')),d(FormRenderer.t.cents),d(b("</label>\n      <input type=\"text\"\n             data-rv-input='model.value.cents'\n             maxlength='2'\n             size='2'\n             id=\"")),d(this.getDomId()),d(b('_cents" />\n    </div>\n  '))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/radio"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["partials/options_field"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/section_break"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a;d(b(JST["partials/labels"](this))),d(b("\n\n")),a=FormRenderer.formatHTML(this.model.get("description")),d(b("\n<")),d(this.model.sizeToHeaderTag()),d(b(">")),d(this.model.get("label")),d(b("</")),d(this.model.sizeToHeaderTag()),d(b(">\n")),a&&(d(b("\n  <div class='fr_text size_")),d(this.model.getSize()),d(b("'>\n    ")),d(b(a)),d(b("\n  </div>\n"))),d(b("\n\n<hr />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/table"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j,k,l,m,n,o,p;for(d(b("<table class='fr_table'>\n  <thead>\n    <tr>\n      ")),m=this.model.getColumns(),f=0,j=m.length;j>f;f++)a=m[f],d(b("\n        <th>")),d(a.translated_label||a.label),d(b("</th>\n      "));for(d(b("\n\n      <th class='fr_table_col_remove'></th>\n    </tr>\n  </thead>\n\n  <tbody>\n    ")),c=g=0,n=this.model.numRows-1;n>=0?n>=g:g>=n;c=n>=0?++g:--g){for(d(b('\n      <tr data-row-index="')),d(c),d(b('">\n        ')),o=this.model.getColumns(),e=h=0,k=o.length;k>h;e=++h)a=o[e],d(b("\n          ")),this.model.getPresetValue(a.label,c)?(d(b("\n            <td class='fr_table_preset'>\n              <span data-rv-text='model.value.")),d(e),d(b(".")),d(c),d(b("'></span>\n          "))):(d(b("\n            <td>\n              <textarea data-rv-input='model.value.")),d(e),d(b(".")),d(c),d(b("'\n                        rows='1'\n                        aria-label=\"")),d(a.translated_label||a.label),d(b(" #")),d(c+1),d(b('"\n                        ')),0===e&&0===c&&(d(b("id='")),d(this.getDomId()),d(b("'"))),d(b(" />\n          "))),d(b("\n          </td>\n        "));d(b("\n\n        <td class='fr_table_col_remove'>\n          ")),this.canRemoveRow(c)&&(d(b("\n            <a class='js-remove-row' href='#'>\n              ")),d(b(FormRenderer.REMOVE_ROW_ICON)),d(b("\n            </a>\n          "))),d(b("\n        </td>\n      </tr>\n    "))}if(d(b("\n  </tbody>\n\n  ")),this.model.get("column_totals")){for(d(b("\n    <tfoot>\n      <tr>\n        ")),p=this.model.getColumns(),e=i=0,l=p.length;l>i;e=++i)a=p[e],d(b("\n          <td data-rv-text='model.columnTotals.")),d(e),d(b("'></td>\n        "));d(b('\n        <td class="fr_table_col_remove"></td>\n      </tr>\n    </tfoot>\n  '))}d(b("\n</table>\n\n<div class='fr_table_add_row_wrapper'>\n  ")),this.model.canAddRows()&&(d(b("\n    <a class='js-add-row' href='#'>\n      ")),d(b(FormRenderer.ADD_ROW_ICON)),d(b("\n      ")),d(FormRenderer.t.add_another_row),d(b("\n    </a>\n  "))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/text"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b('"\n       class="size_')),d(this.model.getSize()),d(b("\"\n       data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/time"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_grid'>\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b('_hours">HH</label>\n    <input type="text"\n           id="')),d(this.getDomId()),d(b("_hours\"\n           data-rv-input='model.value.hours'\n           maxlength='2'\n           size='2' />\n  </div>\n\n  <div class='fr_spacer'>:</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b("_minutes\">MM</label>\n    <input type=\"text\"\n           data-rv-input='model.value.minutes'\n           maxlength='2'\n           size='2'\n           id=\"")),d(this.getDomId()),d(b('_minutes" />\n  </div>\n\n  ')),this.model.get("disable_seconds")||(d(b("\n    <div class='fr_spacer'>:</div>\n\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),d(this.getDomId()),d(b("_seconds\">SS</label>\n      <input type=\"text\"\n             data-rv-input='model.value.seconds'\n             maxlength='2'\n             size='2'\n             id=\"")),d(this.getDomId()),d(b('_seconds" />\n    </div>\n  '))),d(b("\n\n  <div class='has_sub_label'>\n    <select data-rv-value='model.value.am_pm' data-width='auto' aria-label='AM/PM'>\n      <option value='AM'>AM</option>\n      <option value='PM'>PM</option>\n    </select>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["fields/website"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text" inputmode="url"\n       id="')),d(this.getDomId()),d(b("\"\n       data-rv-input='model.value'\n       placeholder='http://' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST.main=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_loading'>\n  ")),d(FormRenderer.t.loading_form),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/description"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.get("description")&&(d(b("\n  <div class='fr_description'>\n    ")),d(b(FormRenderer.formatHTML(this.model.get("description")))),d(b("\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/error"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_error' data-rv-show='model.error' data-rv-text='model.error'></div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/label"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<label ")),this.usesFieldset?d(b('aria-hidden="true"')):(d(b('for="')),d(this.getDomId()),d(b('"'))),d(b(">\n  ")),d(this.model.get("label")),d(b(JST["partials/required"](this))),d(b("\n  ")),d(b(JST["partials/labels"](this))),d(b("\n</label>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/labels"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.showLabels&&(d(b("\n  ")),this.model.get("blind")&&(d(b("\n    <span class='label'>")),d(FormRenderer.t.blind),d(b("</span>\n  "))),d(b("\n  ")),this.model.get("admin_only")&&(d(b("\n    <span class='label'>")),d(FormRenderer.t.hidden),d(b("</span>\n  "))),d(b("\n  ")),this.model.isConditional()&&(d(b("\n    <span class='label'>")),d(FormRenderer.t.hidden_until_rules_met),d(b("</span>\n  "))),d(b("\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/length_counter"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<span class='fr_length_counter' data-rv-text='model.currentLength'></span>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/length_validations"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e;c=this.model.get("minlength"),d(b("\n")),a=this.model.get("maxlength"),d(b("\n")),e=this.model.getLengthValidationUnits(),d(b("\n\n")),this.model.hasLengthValidation()&&(d(b("\n  <div class='fr_min_max'>\n    <span class='fr_min_max_guide'>\n      ")),c&&a?(d(b("\n        ")),c===a?(d(b("\n          ")),d(FormRenderer.t.enter_exactly.replace(":num",c)),d(b(" ")),d(FormRenderer.t[e]),d(b(".\n        "))):(d(b("\n          ")),d(FormRenderer.t.enter_between.replace(":min",c).replace(":max",a)),d(b(" ")),d(FormRenderer.t[e]),d(b(".\n        "))),d(b("\n      "))):c?(d(b("\n        ")),d(FormRenderer.t.enter_at_least.replace(":min",c)),d(b(" ")),d(FormRenderer.t[e]),d(b(".\n      "))):a&&(d(b("\n        ")),d(FormRenderer.t.enter_up_to.replace(":max",a)),d(b(" ")),d(FormRenderer.t[e]),d(b(".\n      "))),d(b("\n    </span>\n\n    ")),d(b(JST["partials/length_counter"](this))),d(b("\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/min_max_validations"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c;this.model.hasMinMaxValidation()&&(d(b("\n  ")),c=this.model.get("min"),d(b("\n  ")),a=this.model.get("max"),d(b("\n\n  <div class='fr_min_max'>\n    ")),c&&a?(d(b("\n      ")),d(FormRenderer.t.enter_between.replace(":min",c).replace(":max",a)),d(b(".\n    "))):c?(d(b("\n      ")),d(FormRenderer.t.enter_at_least.replace(":min",c)),d(b(".\n    "))):a&&(d(b("\n      ")),d(FormRenderer.t.enter_up_to.replace(":max",a)),d(b(".\n    "))),d(b("\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/non_input_response_field"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["fields/"+this.model.field_type](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/options_field"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;for(a="radio"===this.model.field_type?"radio":"checkbox",d(b("\n\n")),g=this.model.getOptions(),e=0,f=g.length;f>e;e++)c=g[e],d(b("\n  <label class='fr_option control'>\n    <input type='")),d(a),d(b("' data-rv-checkedarray='model.value.checked' value=\"")),d(c.label),d(b('" />\n    ')),d(c.translated_label||c.label),d(b("\n  </label>\n"));d(b("\n\n")),this.model.get("include_other_option")&&(d(b("\n  <div class='fr_option fr_other_option'>\n    <label class='control'>\n      <input type='")),d(a),d(b("' data-rv-checked='model.value.other_checked' />\n      ")),d(FormRenderer.t.other),d(b("\n    </label>\n\n    <input type='text' data-rv-show='model.value.other_checked' data-rv-input='model.value.other_text' placeholder='")),d(FormRenderer.t.write_here),d(b("' />\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/pagination"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;if(this.form_renderer.visiblePages().length>1){for(d(b("\n  <ul class='fr_pagination'>\n    ")),g=this.form_renderer.visiblePages(),c=e=0,f=g.length;f>e;c=++e)a=g[c],d(b("\n      <li class='")),this.form_renderer.isPageValid(a)||d(b("has_errors")),d(b("'>\n        ")),a===this.form_renderer.state.get("activePage")?(d(b("\n          <span>")),d(c+1),d(b("</span>\n        </li>\n        "))):(d(b('\n          <a data-activate-page="')),d(a),d(b("\" href='#'>\n            ")),d(c+1),d(b("\n          </a>\n        "))),d(b("\n      </li>\n    "));d(b("\n  </ul>\n"))}d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/repeating_group"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='repeating_group_label'>\n  ")),d(this.model.get("label")),d(b("\n  ")),d(b(JST["partials/required"](this))),d(b("\n</div>\n\n<div data-rv-hide='model.skipped'>\n  <div class='repeating_group_entries'>\n  </div>\n\n  ")),this.model.isRequired()||d(b("\n    <a href='#' class='js-skip'>Skip this question</a>\n  ")),d(b("\n\n  ")),this.model.canAdd()&&d(b("\n    <a href='#' class='js-add-entry'>Add another</a>\n  ")),d(b("\n</div>\n\n")),this.model.isRequired()||d(b("\n  <div data-rv-show='model.skipped'>\n    This field is skipped\n    <a href='#' class='js-skip'>Answer this question</a>\n  </div>\n")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/repeating_group_entry"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='repeating_group_entry_idx'>#")),d(this.idx+1),d(b("</div>\n\n<div class='repeating_group_entry_fields'>\n</div>\n\n")),this.entry.canRemove()&&d(b("\n  <a href='#' class='js-remove-entry'>Remove</a>\n")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/required"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.get("required")&&d(b("&nbsp;<abbr class='fr_required' title='required'>*</abbr>")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["partials/response_field"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){"fieldset"===this.model.wrapper?(d(b("\n  <fieldset class='fr_fieldset'>\n    <legend>")),d(this.model.get("label")),d(b("</legend>\n    ")),d(b(JST["partials/label"](this))),d(b("\n    <div class='fr_field_wrapper'>\n      ")),d(b(JST["fields/"+this.model.field_type](this))),d(b("\n    </div>\n  </fieldset>\n"))):"label"===this.model.wrapper?(d(b("\n  ")),d(b(JST["partials/label"](this))),d(b("\n  <div class='fr_field_wrapper'>\n    ")),d(b(JST["fields/"+this.model.field_type](this))),d(b("\n  </div>\n"))):(d(b("\n  <div class='fr_field_wrapper'>\n    ")),d(b(JST["fields/"+this.model.field_type](this))),d(b("\n  </div>\n"))),d(b("\n\n")),d(b(JST["partials/length_validations"](this))),d(b("\n")),d(b(JST["partials/min_max_validations"](this))),d(b("\n")),d(b(JST["partials/error"](this))),d(b("\n")),d(b(JST["partials/description"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["plugins/bookmark_draft"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='fr_bookmark'>\n  <a href='#' class='js-fr-bookmark'>")),d(FormRenderer.t.finish_later),d(b("</a>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["plugins/bottom_bar"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};d(b("<div class='fr_bottom'>\n  ")),a.call(this.form_renderer.options.plugins,"Autosave")>=0&&(d(b("\n    <div class='fr_bottom_l'>\n      ")),this.form_renderer.state.get("hasServerErrors")?(d(b("\n        ")),d(this.form_renderer.state.get("serverErrorText")||FormRenderer.t.error_saving),d(b("\n      "))):this.form_renderer.state.get("hasChanges")?(d(b("\n        ")),d(FormRenderer.t.saving),d(b("\n      "))):(d(b("\n        ")),d(FormRenderer.t.saved),d(b("\n      "))),d(b("\n    </div>\n  "))),d(b("\n\n  <div class='fr_bottom_r'>\n    ")),this.form_renderer.isFirstPage()||(d(b("\n      <button data-fr-previous-page class='")),d(FormRenderer.BUTTON_CLASS),d(b("'>\n        ")),d(FormRenderer.t.back_to_page.replace(":num",this.form_renderer.previousPage())),d(b("\n      </button>\n    "))),d(b("\n\n    ")),this.form_renderer.state.get("submitting")?(d(b("\n      <button disabled class='")),d(FormRenderer.BUTTON_CLASS),d(b("'>\n        ")),d(FormRenderer.t.submitting),d(b("\n      </button>\n    "))):(d(b("\n      <button data-fr-next-page class='")),d(FormRenderer.BUTTON_CLASS),d(b("'>\n        ")),d(this.form_renderer.isLastPage()||!this.form_renderer.options.enablePages?FormRenderer.t.submit:FormRenderer.t.next_page),d(b("\n      </button>\n    "))),d(b("\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},a.JST||(a.JST={}),a.JST["plugins/error_bar"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.form_renderer.areAllPagesValid()||(d(b("\n  <div class='fr_error_alert_bar' role='alert'>\n    ")),d(b(FormRenderer.t.error_bar.errors)),d(b("\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())}}(window);