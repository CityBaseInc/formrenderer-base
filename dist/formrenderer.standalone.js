!function(o){var u,a;u=jQuery,a=_.str,rivets.inputEvent=document.addEventListener?"input":"keyup",rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(e){return u(e).bind(rivets.inputEvent+".rivets",this.publish)},unbind:function(e){return u(e).unbind(rivets.inputEvent+".rivets")}},rivets.binders.checkedarray={publishes:!0,routine:function(e,n){return e.checked=_.contains(n,e.value)},bind:function(t){return u(t).bind("change.rivets",(r=this,function(){var e,n;return n=r.model.get(r.keypath)||[],e=t.checked?_.uniq(n.concat(t.value)):_.without(n,t.value),r.model.set(r.keypath,e)}));var r},unbind:function(e){return u(e).unbind("change.rivets")}},rivets.binders.dobtradiogroup={publishes:!0,routine:function(e,n){return e.checked=u(e).hasClass("js_other_option")?this.model.get("value.other_checked"):_.contains(n,e.value)},bind:function(e){return u(e).bind("change.rivets",(n=this,function(){return u(e).hasClass("js_other_option")?(n.model.set("value.other_checked",!0),n.model.set(n.keypath,[])):(n.model.unset("value.other_checked"),n.model.unset("value.other_text"),n.model.set(n.keypath,[e.value]))}));var n}},rivets.configure({prefix:"rv",adapter:{subscribe:function(e,n,t){return t.wrapped=function(e,n){return t(n)},e.on("change:"+n,t.wrapped)},unsubscribe:function(e,n,t){return e.off("change:"+n,t.wrapped)},read:function(e,n){return"cid"===n?e.cid:e.get(n)},publish:function(e,n,t){return e.cid?e.set(n,t):e[n]=t}}}),function(){var l;o.FormRenderer=l=Backbone.View.extend({defaults:{enablePages:!0,screendoorBase:"https://screendoor.dobt.co",target:"[data-formrenderer]",validateImmediately:!1,response:{},responderLanguage:void 0,preview:!1,skipValidation:void 0,skipConditions:void 0,saveParams:{},showLabels:!1,scrollToPadding:0,plugins:["Autosave","WarnBeforeUnload","BottomBar","ErrorBar","SavedSession"]},constructor:function(e){var n,t,i,r,o,s;for((this.fr=this).options=u.extend({},this.defaults,e),this.requests=0,this.state=new Backbone.Model({hasChanges:!1}),this.setElement(u(this.options.target)),this.$el.addClass("fr_form"),this.$el.data("formrenderer-instance",this),this.subviews={pages:{}},this.serverHeaders={"X-FR-Version":l.VERSION,"X-FR-URL":document.URL},this.plugins=_.map(this.options.plugins,(o=this,function(e){return new l.Plugins[e](o)})),n=0,t=(r=this.plugins).length;n<t;n++)"function"==typeof(i=r[n]).beforeFormLoad&&i.beforeFormLoad();return this.$el.html(JST.main(this)),this.trigger("viewRendered",this),this.loadFromServer((s=this,function(){var e,n,t,r;for(s.$el.find(".fr_loading").remove(),s.initFormComponents(s.options.response_fields,s.options.response.responses),s.initPages(),s.options.enablePages?s.initPagination():s.initNoPagination(),n=0,t=(r=s.plugins).length;n<t;n++)"function"==typeof(i=r[n]).afterFormLoad&&i.afterFormLoad();return s.options.validateImmediately&&s.validate(),s.trigger("ready"),"function"==typeof(e=s.options).onReady?e.onReady():void 0})),this.$el.on("submit",function(e){return e.preventDefault()}),this},corsSupported:function(){return"withCredentials"in new XMLHttpRequest},projectUrl:function(){return this.options.screendoorBase+"/projects/"+this.options.project_id},loadFromServer:function(i){return null!=this.options.response_fields&&null!=this.options.response.responses?i():u.ajax({url:this.options.screendoorBase+"/api/form_renderer/load",type:"get",dataType:"json",data:this.loadParams(),headers:this.serverHeaders,success:(o=this,function(e){var n,t,r;return(n=o.options).response_fields||(n.response_fields=e.project.response_fields),(t=o.options.response).responses||(t.responses=(null!=(r=e.response)?r.responses:void 0)||{}),null==o.options.afterSubmit&&(o.options.afterSubmit={method:"page",html:e.project.after_response_page_html||"<p>"+l.t.thanks+"</p>"}),i()}),error:(t=this,function(e){var n;return t.corsSupported()?(t.$el.find(".fr_loading").text(l.t.error_loading+': "'+((null!=(n=e.responseJSON)?n.error:void 0)||"Unknown")+'"'),t.trigger("errorSaving",e)):t.$el.find(".fr_loading").html(l.t.not_supported.replace(/\:url/g,t.projectUrl()))})});var t,o},initPages:function(){var n,t,e,r,i,o,s,a;for(r in n=function(){return s.subviews.pages[t]=new l.Views.Page({form_renderer:s})},(s=this).numPages=this.formComponents.where({field_type:"page_break"}).length+1,this.state.set("activePage",1),t=1,n(),this.formComponents.each((a=this,function(e){return"page_break"===e.get("field_type")?(t++,n()):a.subviews.pages[t].models.push(e)})),o=[],i=this.subviews.pages)e=i[r],o.push(this.$el.append(e.render().el));return o},initPagination:function(){return this.subviews.pagination=new l.Views.Pagination({form_renderer:this}),this.$el.prepend(this.subviews.pagination.render().el),this.subviews.pages[this.state.get("activePage")].show()},initNoPagination:function(){var e,n,t,r;for(n in r=[],t=this.subviews.pages)e=t[n],r.push(e.show());return r},activatePage:function(e){return this.subviews.pages[this.state.get("activePage")].hide(),this.subviews.pages[e].show(),o.scrollTo(0,this.options.scrollToPadding),this.state.set("activePage",e)},validate:function(){var e,n;for(e in n=this.subviews.pages)n[e].validate();return this.trigger("afterValidate afterValidate:all"),this.areAllPagesValid()},isPageVisible:function(e){var n;return null!=(n=this.subviews.pages[e])?n.isVisible():void 0},isPageValid:function(e){var n;return null!=(n=this.subviews.pages[e])?n.isValid():void 0},focusFirstError:function(){var e,n;return e=this.invalidPages()[0],this.activatePage(e),n=this.subviews.pages[e].firstViewWithError(),o.scrollTo(0,n.$el.offset().top-this.options.scrollToPadding),n.focus()},invalidPages:function(){var t,n;return _.filter(function(){t=[];for(var e=1,n=this.numPages;1<=n?e<=n:n<=e;1<=n?e++:e--)t.push(e);return t}.apply(this),(n=this,function(e){return!1===n.isPageValid(e)}))},areAllPagesValid:function(){return 0===this.invalidPages().length},visiblePages:function(){return _.tap([],(i=this,function(e){var n,t,r;for(n in r=[],t=i.subviews.pages)t[n],i.isPageVisible(n)?r.push(e.push(parseInt(n,10))):r.push(void 0);return r}));var i},isFirstPage:function(){var e;return!(e=this.visiblePages()[0])||this.state.get("activePage")===e},isLastPage:function(){var e;return!(e=_.last(this.visiblePages()))||this.state.get("activePage")===e},previousPage:function(){return this.visiblePages()[_.indexOf(this.visiblePages(),this.state.get("activePage"))-1]},nextPage:function(){return this.visiblePages()[_.indexOf(this.visiblePages(),this.state.get("activePage"))+1]},handlePreviousPage:function(){return this.activatePage(this.previousPage())},handleNextPage:function(){return this.isLastPage()||!this.options.enablePages?this.submit():this.activatePage(this.nextPage())},queryParams:function(){return l.queryParams(document.location.search)},loadParams:function(){return _.extend({v:0,response_id:this.options.response.id,project_id:this.options.project_id,responder_language:this.options.responderLanguage,query_params:this.queryParams()},this.followUpFormParams())},saveParams:function(){return _.extend(this.loadParams(),{skip_validation:this.options.skipValidation},this.options.saveParams)},followUpFormParams:function(){return this.isRenderingFollowUpForm()?{follow_up_form_id:this.options.follow_up_form_id,initial_response_id:this.options.initial_response_id}:{}},isRenderingFollowUpForm:function(){return!!this.options.follow_up_form_id},responsesChanged:function(){if(this.state.set("hasChanges",!0),this.isSaving)return this.changedWhileSaving=!0},save:function(t){var r,i,e;if(null==t&&(t={}),!this.isSaving)return this.requests+=1,this.isSaving=!0,this.changedWhileSaving=!1,u.ajax({url:this.options.screendoorBase+"/api/form_renderer/save",type:"post",contentType:"application/json",dataType:"json",data:JSON.stringify(_.extend(this.saveParams(),{raw_responses:this.getValue(),submit:!!t.submit||void 0})),headers:this.serverHeaders,complete:(e=this,function(){return e.requests-=1,e.isSaving=!1,e.trigger("afterSave")}),success:(i=this,function(e){var n;return i.state.set({hasChanges:i.changedWhileSaving,hasServerErrors:!1}),i.options.response.id=e.response_id,null!=(n=t.cb)?n.apply(i,arguments):void 0}),error:(r=this,function(e){var n,t;return r.state.set({hasServerErrors:!0,serverErrorText:null!=(n=e.responseJSON)?n.error:void 0,serverErrorKey:null!=(t=e.responseJSON)?t.error_key:void 0,submitting:!1})})})},waitForRequests:function(e){return 0<this.requests?setTimeout((n=this,function(){return n.waitForRequests(e)}),100):e();var n},submit:function(e){var n;if(null==e&&(e={}),e.skipValidation||this.options.skipValidation||this.validate())return this.state.set("submitting",!0),this.waitForRequests((n=this,function(){return n.options.preview?n._preview():n.save({submit:!0,cb:function(){return n.trigger("afterSubmit"),n._afterSubmit()}})}))},_afterSubmit:function(){var e,n;return"function"==typeof(n=this.options.afterSubmit)?n.call(this):"string"==typeof n?o.location=n.replace(":id",this.options.response.id.split(",")[0]):"object"==typeof n&&"page"===n.method?(e=u("<div class='fr_after_submit_page'>"+n.html+"</div>"),this.$el.replaceWith(e)):console.log("[FormRenderer] Not sure what to do...")},_preview:function(){var e,n;return e=function(){return o.location=n.options.preview.replace(":id",n.options.response.id.split(",")[0])},!(n=this).state.get("hasChanges")&&this.options.response.id?e():this.save({cb:e})},reflectConditions:function(){var e,n,t;for(e in n=this.subviews.pages)n[e].reflectConditions();return null!=(t=this.subviews.pagination)?t.render():void 0}}),l.BUTTON_CLASS="fr_button",l.DEFAULT_LAT_LNG=[40.7700118,-73.9800453],l.MAPBOX_URL="https://api.tiles.mapbox.com/mapbox.js/v2.1.4/mapbox.js",l.EMAIL_REGEX=/^\s*([^@\s]{1,64})@((?:[-a-z0-9]+\.)+[a-z]{2,})\s*$/i,l.ADD_ROW_ICON="+",l.REMOVE_ROW_ICON="-",l.REMOVE_ENTRY_LINK_CLASS="fr_group_entry_remove",l.REMOVE_ENTRY_LINK_HTML="Remove",l.Views={},l.Models={},l.Plugins={},l.Validators={EmailValidator:{VALID_REGEX:l.EMAIL_REGEX}},l.addPlugin=function(e){return this.prototype.defaults.plugins.push(e)},l.removePlugin=function(e){return this.prototype.defaults.plugins=_.without(this.prototype.defaults.plugins,e)}}.call(this),function(){FormRenderer.formComponentViewClass=function(e){var n;return e.group?FormRenderer.Views.ResponseFieldRepeatingGroup:(n=FormRenderer.Views["ResponseField"+a.classify(e.field_type)])?n:FormRenderer.Views.ResponseField},FormRenderer.buildFormComponentView=function(e,n){return new(FormRenderer.formComponentViewClass(e))({model:e,form_renderer:n})},FormRenderer.formComponentModelClass=function(e){return FormRenderer.Models["ResponseField"+a.classify(e.field_type)]},FormRenderer.buildFormComponentModel=function(e,n,t){return new(FormRenderer.formComponentModelClass(e))(e,n,t)}}.call(this),function(){var n,t,r,i,o;t=["a","p","br","b","strong","em","i"],n=["href","target"],r=function(e){var n;return n=/(^|[\s\n]|<br\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi,e.replace(n,"$1<a href='$2' target='_blank'>$2</a>")},o=function(e){return null==e&&(e=""),(""+e).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},i=function(e){return DOMPurify.sanitize(e,{ALLOWED_TAGS:t,ALLOWED_ATTR:n})},FormRenderer.formatAndSanitizeHTML=function(e){return i(r(o(e)))}}.call(this),function(){FormRenderer.getLength=function(e,n){var t;return t=a.trim(n),"words"===e?(t.replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||"").length:t.length}}.call(this),function(){FormRenderer.normalizeNumber=function(e,n){var t;return t=e.replace(/,/g,"").replace(/-/g,"").replace(/^\+/,"").trim(),n&&(t=t.replace(new RegExp(n+"$","i"),"").trim()),t}}.call(this),function(){FormRenderer.queryParams=function(e){return e.substring(1).split("&").filter(function(e){return""!==e}).reduce(function(e,n){return 2===(n=n.split("=")).length&&(e[n[0]]=n[1]),e},{})}}.call(this),function(){FormRenderer.toBoolean=function(e){return _.contains(["True","Yes","true","1",1,"yes",!0],e)}}.call(this),function(){FormRenderer.VERSION="1.3.12"}.call(this),function(){var e;e=["US","GB","CA"],FormRenderer.ORDERED_COUNTRIES=_.uniq(_.union(e,[void 0],_.keys(ISOCountryNames))),FormRenderer.PROVINCES_CA=["Alberta","British Columbia","Labrador","Manitoba","New Brunswick","Newfoundland","Nova Scotia","Nunavut","Northwest Territories","Ontario","Prince Edward Island","Quebec","Saskatchewen","Yukon"],FormRenderer.PROVINCES_US=["Alabama","Alaska","American Samoa","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","District Of Columbia","Federated States Of Micronesia","Florida","Georgia","Guam","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Marshall Islands","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Northern Mariana Islands","Ohio","Oklahoma","Oregon","Palau","Pennsylvania","Puerto Rico","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virgin Islands","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}.call(this),function(){var i,o=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};i=["present","blank"],FormRenderer.ConditionChecker=function(){function e(e,n){var t;this.responseField=e,this.condition=n,this.value=(null!=(t=this.responseField)?t.toText():void 0)||""}return e.prototype.method_eq=function(){return this.value.toLowerCase()===this.condition.value.toLowerCase()},e.prototype.method_contains=function(){return-1<this.value.toLowerCase().indexOf(this.condition.value.toLowerCase())},e.prototype.method_not=function(){return!this.method_eq()},e.prototype.method_does_not_contain=function(){return!this.method_contains()},e.prototype.method_gt=function(){return parseFloat(this.value)>parseFloat(this.condition.value)},e.prototype.method_lt=function(){return parseFloat(this.value)<parseFloat(this.condition.value)},e.prototype.method_shorter=function(){return this.length()<parseInt(this.condition.value,10)},e.prototype.method_longer=function(){return this.length()>parseInt(this.condition.value,10)},e.prototype.method_present=function(){return!!this.value.match(/\S/)},e.prototype.method_blank=function(){return!this.method_present()},e.prototype.length=function(){return FormRenderer.getLength(this.responseField.getLengthValidationUnits(),this.value)},e.prototype.isValid=function(){var e,n;return this.responseField&&_.all(["response_field_id","method"],(n=this,function(e){return n.condition[e]}))&&(e=this.condition.method,0<=o.call(i,e)||this.condition.value)},e.prototype.isVisible=function(){var e,n,t,r;return!(null==(e=this.responseField)||null==(n=e.fr)||null==(t=n.options)||!t.skipConditions)||(!this.isValid()||(r=this.condition.method,0<=o.call(i,r)?this["method_"+this.condition.method]():this.method_present()&&this["method_"+this.condition.method]()))},e}()}.call(this),function(){FormRenderer.Models.BaseFormComponent=Backbone.DeepModel.extend({initialize:function(e,n,t){return this.fr=n,this.parent=t,this.calculateVisibility()},sync:function(){},validateComponent:function(){},setExistingValue:function(){},shouldPersistValue:function(){return this.isVisible&&(this.group||this.input_field)},getConditions:function(){return this.get("conditions")||[]},isRequired:function(){return this.get("required")},isConditional:function(){return 0<this.getConditions().length},parentGroupIsHidden:function(){return null!=this.parent.repeatingGroup&&!this.parent.repeatingGroup.isVisible},calculateVisibilityIsChanged:function(){var e;return e=!!this.isVisible,this.calculateVisibility(),e!==this.isVisible},calculateVisibility:function(){return this.isVisible=this._calculateIsVisible()},_calculateIsVisible:function(){return!this.renderingRespondentForm()||this.satisfiesConditions(this.parent.formComponents)},satisfiesConditions:function(n){return!this.isConditional()||_[this.conditionMethod()](this.getConditions(),function(e){return new FormRenderer.ConditionChecker(n.get(e.response_field_id),e).isVisible()})},conditionMethod:function(){return"any"===this.get("condition_method")?"any":"all"},renderingRespondentForm:function(){return!!this.fr}})}.call(this),function(){var t,r=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};t=function(e){return e&&(e.hasAttribute("data-fr-next-page")||e.hasAttribute("data-fr-previous-page"))},FormRenderer.Models.ResponseField=FormRenderer.Models.BaseFormComponent.extend({input_field:!0,wrapper:"label",field_type:void 0,validators:[],ignoreKeysWhenCheckingPresence:function(){return[]},initialize:function(){if(FormRenderer.Models.BaseFormComponent.prototype.initialize.apply(this,arguments),this.errors=[],this.hasLengthValidation())return this.listenTo(this,"change:value",this.calculateLength)},getError:function(){if(0<this.errors.length)return this.errors.join(" ")},calculateLength:function(){return this.set("currentLength",FormRenderer.getLength(this.getLengthValidationUnits(),this.get("value")))},getLengthValidationUnits:function(){return this.get("min_max_length_units")||"characters"},setExistingValue:function(e){if(e&&this.set("value",e),this.hasLengthValidation())return this.calculateLength()},getValue:function(){return this.get("value")||this.defaultValue()},defaultValue:function(){return"hash"===this.valueType?{}:"string"===this.valueType?"":void 0},toText:function(){return this.getValue()},hasValue:function(){return"hash"===this.valueType?_.some(this.get("value")||{},(t=this,function(e,n){return!(0<=r.call(t.ignoreKeysWhenCheckingPresence(),n)||!e)})):!!this.get("value");var t},getOptions:function(){return this.get("options")||[]},getColumns:function(){return this.get("columns")||[]},getSize:function(){return this.get("size")||"small"},sizeToHeaderTag:function(){return{large:"h2",medium:"h3",small:"h4"}[this.getSize()]}}),FormRenderer.Views.ResponseField=Backbone.View.extend({className:"fr_response_field",events:{"blur input, textarea, select":"_onBlur"},initialize:function(e){return this._sharedInitialize(e),this.listenTo(this.model,"afterValidate",this.render),this.listenTo(this.model,"change",this._onInput),this.listenTo(this.model,"change:currentLength",this.auditLength),this.listenTo(this.model,"change:error",this.toggleErrorModifier),this.$el.addClass("fr_response_field_"+this.model.field_type)},_onBlur:function(e){if(this.model.hasValue())return setTimeout((n=this,function(){var e;if(e=document.activeElement,!u.contains(n.el,e))return t(e)?u(document).one("mouseup",function(){return n.model.validateComponent()}):n.model.validateComponent()}),1);var n},_onInput:function(){if(0<this.model.errors.length)return this.model.validateComponent({clearOnly:!0})},focus:function(){return this.$el.find(":input:eq(0)").focus()},auditLength:function(){var e,n;if(this.model.hasLengthValidation()&&(e=this.$el.find(".fr_length_counter"))[0])return"short"===(n=this.model.validateLength())?e.addClass("is_short").removeClass("is_long"):"long"===n?e.addClass("is_long").removeClass("is_short"):e.removeClass("is_short is_long")},toggleErrorModifier:function(){return this.$el[this.model.getError()?"addClass":"removeClass"]("error")},partialName:function(){return this.model.input_field?"response_field":"non_input_response_field"},render:function(){var e;return this.$el.html(JST["partials/"+this.partialName()](this)),rivets.bind(this.$el,{model:this.model}),this.auditLength(),null!=(e=this.form_renderer)&&e.trigger("viewRendered",this),this}})}.call(this),function(){FormRenderer.Models.NonInputResponseField=FormRenderer.Models.ResponseField.extend({input_field:!1,validateComponent:function(){}})}.call(this),function(){FormRenderer.Models.ResponseFieldRepeatingGroup=FormRenderer.Models.BaseFormComponent.extend({group:!0,field_type:"repeating_group",initialize:function(){return FormRenderer.Models.BaseFormComponent.prototype.initialize.apply(this,arguments),this.entries=[]},validateComponent:function(){var e,n,t,r,i;for(i=[],n=0,t=(r=this.entries).length;n<t;n++)e=r[n],i.push(e.formComponents.invoke("validateComponent"));return i},setExistingValue:function(e){return this.isRequired()?e&&0!==e.length||(e=[{}]):e?_.isArray(e)&&_.isEmpty(e)&&this.set("skipped",!0):e=[{}],this.entries=_.map(e,(n=this,function(e){return new FormRenderer.Models.ResponseFieldRepeatingGroupEntry({value:e},n.fr,n)}));var n},addEntry:function(){return this.entries.push(new FormRenderer.Models.ResponseFieldRepeatingGroupEntry({},this.fr,this)),this.fr.responsesChanged()},removeEntry:function(e){return this.entries.splice(e,1),0===this.entries.length&&this.set("skipped",!0),this.fr.responsesChanged()},isSkipped:function(){return!!this.get("skipped")},getValue:function(){return this.isSkipped()?[]:_.invoke(this.entries,"getValue")},getTruncatedDescription:function(){var e;return 140,(e=this.get("description"))&&140<e.length&&(e=e.substr(0,140).trim()+"…"),e},maxEntries:function(){return this.get("maxentries")&&parseInt(this.get("maxentries"),10)||1/0},canAdd:function(){return this.entries.length<this.maxEntries()}}),FormRenderer.Models.ResponseFieldRepeatingGroupEntry=Backbone.Model.extend({field_type:"repeating_group_entry",initialize:function(e,n,t){var r;return this.fr=n,this.repeatingGroup=t,null==(r=this.repeatingGroup.get("children"))&&(r=[]),this.initFormComponents(r,this.get("value")||{})},reflectConditions:function(){return this.view.reflectConditions()},canRemove:function(){return 1<this.repeatingGroup.entries.length}}),FormRenderer.Views.ResponseFieldRepeatingGroup=Backbone.View.extend({className:"fr_response_field fr_response_field_group",events:{"click .js-remove-entry":"removeEntry","click .js-add-entry":"addEntry","click .js-skip":"toggleSkip"},initialize:function(e){var o,s;return this._sharedInitialize(e),this.on("shown",(o=this,function(){var e,n,t,r,i;for(r=[],e=0,n=(t=o.views).length;e<n;e++)i=t[e],r.push(i.trigger("shown"));return r})),this.on("hidden",(s=this,function(){var e,n,t,r,i;for(r=[],e=0,n=(t=s.views).length;e<n;e++)i=t[e],r.push(i.trigger("hidden"));return r}))},toggleSkip:function(){return this.model.set("skipped",!this.model.isSkipped()),this.model.isSkipped()||0!==this.model.entries.length||this.addEntry(),this.form_renderer.responsesChanged(),this.render()},addEntry:function(){return this.model.addEntry(),this.render(),_.last(this.views).focus()},removeEntry:function(e){var n;return n=this.$el.find(".js-remove-entry").index(e.target.closest(".js-remove-entry")),this.model.removeEntry(n),this.render()},render:function(){var e,n,t,r,i,o,s,a;for(this.views=[],e=u(),r=t=0,i=(o=this.model.entries||[]).length;t<i;r=++t)n=o[r],a=new FormRenderer.Views.ResponseFieldRepeatingGroupEntry({entry:n,form_renderer:this.form_renderer,idx:r}),n.view=a,e=e.add(a.render().el),this.views.push(a);return this.$el.html(JST["partials/repeating_group"](this)),this.$el.removeClass("is_truncated"),this.model.entries.length&&0<this.model.entries[0].formComponents.length&&this.$el.addClass("is_truncated"),rivets.bind(this.$el,{model:this.model}),this.$el.find(".fr_group_entries").append(e),null!=(s=this.form_renderer)&&s.trigger("viewRendered",this),this}}),FormRenderer.Views.ResponseFieldRepeatingGroupEntry=Backbone.View.extend({className:"fr_group_entry",initialize:function(e){var o,s;return this.entry=e.entry,this.form_renderer=e.form_renderer,this.idx=e.idx,this.views=[],this.on("shown",(o=this,function(){var e,n,t,r,i;for(r=[],e=0,n=(t=o.views).length;e<n;e++)i=t[e],r.push(i.trigger("shown"));return r})),this.on("hidden",(s=this,function(){var e,n,t,r,i;for(r=[],e=0,n=(t=s.views).length;e<n;e++)i=t[e],r.push(i.trigger("hidden"));return r}))},render:function(){var t,e,r;return this.$el.html(JST["partials/repeating_group_entry"](this)),null!=(e=this.form_renderer)&&e.trigger("viewRendered",this),t=this.$el.find(".fr_group_entry_fields"),this.entry.formComponents.each((r=this,function(e){var n;return n=FormRenderer.buildFormComponentView(e,r.form_renderer),t.append(n.render().el),n.reflectConditions(),r.views.push(n)})),this},reflectConditions:function(){var e,n,t,r,i;for(r=[],e=0,n=(t=this.views).length;e<n;e++)i=t[e],r.push(i.reflectConditions());return r},focus:function(){return this.views[0].focus()}})}.call(this),function(){FormRenderer.Models.ResponseFieldAddress=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"address",valueType:"hash",ignoreKeysWhenCheckingPresence:function(){return"country"===this.get("address_format")?[]:["country"]},setExistingValue:function(e){if(FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments),!(null!=e?e.country:void 0))return this.set("value.country","US")},toText:function(){return _.values(_.pick(this.getValue(),"street","city","state","zipcode","country")).join(" ")}}),FormRenderer.Views.ResponseFieldAddress=FormRenderer.Views.ResponseField.extend({initialize:function(){return FormRenderer.Views.ResponseField.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:value.country",this.render)}})}.call(this),function(){FormRenderer.Models.ResponseFieldBlockOfText=FormRenderer.Models.NonInputResponseField.extend({field_type:"block_of_text"}),FormRenderer.Views.ResponseFieldBlockOfText=FormRenderer.Views.ResponseField.extend({field_type:"block_of_text"})}.call(this),function(){FormRenderer.Models.ResponseFieldCheckboxes=FormRenderer.Models.ResponseField.extend({field_type:"checkboxes",wrapper:"fieldset",setExistingValue:function(e){var n,t,r,i,o;if(null!=e)return FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments);for(n={checked:[]},t=0,r=(o=this.getOptions()).length;t<r;t++)i=o[t],FormRenderer.toBoolean(i.checked)&&n.checked.push(i.label);return this.set("value",n)},toText:function(){var e,n;return e=(null!=(n=this.get("value.checked"))?n.slice(0):void 0)||[],!0===this.get("value.other_checked")&&e.push(this.get("value.other_text")),e.join(" ")},hasValue:function(){var e;return 0<(null!=(e=this.get("value.checked"))?e.length:void 0)||this.get("value.other_checked")}}),FormRenderer.Views.ResponseFieldCheckboxes=FormRenderer.Views.ResponseField.extend({wrapper:"fieldset",field_type:"checkboxes"})}.call(this),function(){FormRenderer.Models.ResponseFieldConfirm=FormRenderer.Models.ResponseField.extend({field_type:"confirm",wrapper:"none",getValue:function(){return this.get("value")||!1},setExistingValue:function(e){return this.set("value",!!e)},toText:function(){return this.get("value")?"Yes":"No"}}),FormRenderer.Views.ResponseFieldConfirm=FormRenderer.Views.ResponseField.extend({wrapper:"none",field_type:"confirm"})}.call(this),function(){FormRenderer.Models.ResponseFieldDate=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"date",valueType:"hash",toText:function(){return _.values(_.pick(this.getValue(),"month","day","year")).join("/")},validateType:function(){var e,n,t,r;if(r=this.get("disable_year")?2e3:parseInt(this.get("value.year"),10)||0,e=parseInt(this.get("value.day"),10)||0,t=parseInt(this.get("value.month"),10)||0,n=1===new Date(r,1,29).getMonth()?29:28,!(0<r&&0<t&&t<=12&&0<e&&e<=[31,n,31,30,31,30,31,31,30,31,30,31][t-1]))return"date"}}),FormRenderer.Views.ResponseFieldDate=FormRenderer.Views.ResponseField.extend({wrapper:"fieldset",field_type:"date"})}.call(this),function(){FormRenderer.Models.ResponseFieldDropdown=FormRenderer.Models.ResponseField.extend({field_type:"dropdown",setExistingValue:function(e){var n;return null!=e?FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments):((n=_.find(this.getOptions(),function(e){return FormRenderer.toBoolean(e.checked)}))||this.get("include_blank_option")||(n=_.first(this.getOptions())),n?this.set("value",n.label):this.unset("value"))}}),FormRenderer.Views.ResponseFieldDropdown=FormRenderer.Views.ResponseField.extend({field_type:"dropdown"})}.call(this),function(){FormRenderer.Models.ResponseFieldEmail=FormRenderer.Models.ResponseField.extend({valueType:"string",field_type:"email",validateType:function(){if(!this.get("value").match(FormRenderer.EMAIL_REGEX))return"email"}}),FormRenderer.Views.ResponseFieldEmail=FormRenderer.Views.ResponseField.extend({field_type:"email"})}.call(this),function(){FormRenderer.Models.ResponseFieldFile=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"file",addFile:function(e,n){var t;return(t=this.getFiles().slice(0)).push({id:e,filename:n}),this.set("value",t)},removeFile:function(e){var n;return(n=this.getFiles().slice(0)).splice(e,1),this.set("value",n)},getFiles:function(){return this.get("value")||[]},canAddFile:function(){return this.getFiles().length<this.maxFiles()},toText:function(){return _.compact(_.pluck(this.getFiles(),"filename")).join(" ")},hasValue:function(){return _.any(this.getFiles(),function(e){return!!e.id})},getAcceptedExtensions:function(){var e;if(e=FormRenderer.FILE_TYPES[this.get("file_types")])return _.map(e,function(e){return"."+e})},getValue:function(){return this.getFiles()},maxFiles:function(){return this.get("allow_multiple_files")?10:1}}),FormRenderer.Views.ResponseFieldFile=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click [data-fr-remove-file]":"doRemove"}),render:function(){var n,r,t,e,i,o;return FormRenderer.Views.ResponseField.prototype.render.apply(this,arguments),this.$input=this.$el.find("input"),this.$label=this.$el.find(".fr_add_file label"),this.$error=this.$el.find(".fr_add_file .fr_error"),n=void 0,this.$label.on("click",function(e){if(u(this).hasClass("disabled"))return e.preventDefault()}),this.form_renderer&&this.$input.inlineFileUpload({method:"post",action:this.form_renderer.options.screendoorBase+"/api/form_renderer/file",ajaxOpts:{headers:this.form_renderer.serverHeaders},additionalParams:{project_id:this.form_renderer.options.project_id,response_field_id:this.model.get("id"),v:0},start:(o=this,function(e){return n=e.filename,o.$label.addClass("disabled"),o.$label.text(FormRenderer.t.uploading),o.form_renderer.requests+=1}),progress:(i=this,function(e){return i.$label.text(100===e.percent?FormRenderer.t.finishing_up:FormRenderer.t.uploading+" ("+e.percent+"%)")}),complete:(e=this,function(){return e.form_renderer.requests-=1}),success:(t=this,function(e){return t.model.addFile(e.data.file_id,n),t.render()}),error:(r=this,function(e){var n,t;return r.render(),n=null!=(t=e.xhr.responseJSON)?t.errors:void 0,r.$error.text(n||FormRenderer.t.error).show(),setTimeout(function(){return r.$error.hide()},2e3)})}),this},doRemove:function(e){var n;return n=this.$el.find("[data-fr-remove-file]").index(e.target),this.model.removeFile(n),this.render()}})}.call(this),function(){FormRenderer.Models.ResponseFieldIdentification=FormRenderer.Models.ResponseField.extend({field_type:"identification",valueType:"hash",isRequired:function(){return!0},validateType:function(){return this.get("value.email")&&this.get("value.name")?this.get("value.email").match(FormRenderer.EMAIL_REGEX)?void 0:"email":"identification"},shouldPersistValue:function(){var e;return(null==(e=this.fr)||!e.isRenderingFollowUpForm())&&FormRenderer.Models.ResponseField.prototype.shouldPersistValue.apply(this,arguments)},getValue:function(){var e;return(null!=(e=this.fr)?e.isRenderingFollowUpForm():void 0)?null:FormRenderer.Models.ResponseField.prototype.getValue.apply(this,arguments)}}),FormRenderer.Views.ResponseFieldIdentification=FormRenderer.Views.ResponseField.extend({field_type:"identification",disableInput:function(){return this.isInputDisabled=!0},dontRenderInputs:function(){var e;return!!this.isInputDisabled||(null!=(e=this.form_renderer)?e.isRenderingFollowUpForm():void 0)}})}.call(this),function(){FormRenderer.loadLeaflet=function(e){return null!=("undefined"!=typeof L&&null!==L?L.GeoJSON:void 0)?e():requireOnce(FormRenderer.MAPBOX_URL,e)},FormRenderer.initMap=function(e){return L.mapbox.accessToken="pk.eyJ1IjoiYWRhbWphY29iYmVja2VyIiwiYSI6Im1SVEQtSm8ifQ.ZgEOSXsv9eLfGQ-9yAmtIg",L.mapbox.map(e,"adamjacobbecker.ja7plkah")},FormRenderer.Models.ResponseFieldMapMarker=FormRenderer.Models.ResponseField.extend({field_type:"map_marker",latLng:function(){return this.get("value")},defaultLatLng:function(){var e,n;if((e=this.get("default_lat"))&&(n=this.get("default_lng")))return[e,n]}}),FormRenderer.Views.ResponseFieldMapMarker=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click .fr_map_cover":"enable","click [data-fr-clear-map]":"disable"}),initialize:function(){return FormRenderer.Views.ResponseField.prototype.initialize.apply(this,arguments),this.on("shown",function(){var e,n;return this.refreshing=!0,null!=(e=this.map)&&e._onResize(),setTimeout((n=this,function(){return n.refreshing=!1}),0)})},render:function(){var e;return FormRenderer.Views.ResponseField.prototype.render.apply(this,arguments),this.$cover=this.$el.find(".fr_map_cover"),FormRenderer.loadLeaflet((e=this,function(){if(e.initMap(),e.model.latLng())return e.enable()})),this},initMap:function(){return this.map=FormRenderer.initMap(this.$el.find(".fr_map_map")[0]),this.$el.find(".fr_map_map").data("map",this.map),this.map.setView(this.model.latLng()||this.model.defaultLatLng()||FormRenderer.DEFAULT_LAT_LNG,13),this.marker=L.marker([0,0]),this.map.on("move",u.proxy(this._onMove,this))},_onMove:function(){var e;if(!this.refreshing)return e=this.map.getCenter(),this.marker.setLatLng(e),this.model.set({value:[e.lat.toFixed(7),e.lng.toFixed(7)]}),this.model.trigger("change:value.0 change:value.1")},enable:function(){if(this.map)return this.map.addLayer(this.marker),this.$cover.hide(),this._onMove()},disable:function(e){return e.preventDefault(),this.map.removeLayer(this.marker),this.$el.find(".fr_map_cover").show(),this.model.unset("value")}})}.call(this),function(){FormRenderer.Models.ResponseFieldNumber=FormRenderer.Models.ResponseField.extend({field_type:"number",valueType:"string",validateType:function(){if(!FormRenderer.normalizeNumber(this.get("value"),this.get("units")).match(/^-?\d*(\.\d+)?$/))return"number"}}),FormRenderer.Views.ResponseFieldNumber=FormRenderer.Views.ResponseField.extend({calculateSize:function(){var e,n;return e=(n=parseInt(this.model.get("max"),10))?(""+n).length:6,this.model.get("integer_only")||(e+=2),6<e?"seven_plus":3<e?"four_six":"one_three"}})}.call(this),function(){FormRenderer.Models.ResponseFieldPageBreak=FormRenderer.Models.NonInputResponseField.extend({field_type:"page_break"}),FormRenderer.Views.ResponseFieldPageBreak=FormRenderer.Views.ResponseField.extend({field_type:"page_break"})}.call(this),function(){FormRenderer.Models.ResponseFieldParagraph=FormRenderer.Models.ResponseField.extend({field_type:"paragraph"}),FormRenderer.Views.ResponseFieldParagraph=FormRenderer.Views.ResponseField.extend({field_type:"paragraph"})}.call(this),function(){FormRenderer.Models.ResponseFieldPhone=FormRenderer.Models.ResponseField.extend({field_type:"phone",valueType:"string",validateType:function(){var e,n,t;if(n=(e="us"===this.get("phone_format"))?10:7,!(((null!=(t=this.get("value").match(/\d/g))?t.join(""):void 0)||"").length>=n))return e?"us_phone":"phone"}}),FormRenderer.Views.ResponseFieldPhone=FormRenderer.Views.ResponseField.extend({phonePlaceholder:function(){if("us"===this.model.get("phone_format"))return"(xxx) xxx-xxxx"}})}.call(this),function(){FormRenderer.Models.ResponseFieldPrice=FormRenderer.Models.ResponseField.extend({wrapper:"fieldset",field_type:"price",valueType:"hash",toText:function(){return(this.getValue().dollars||"0")+"."+(this.getValue().cents||"00")},validateType:function(){var e;if(e=[],this.get("value.dollars")&&e.push((""+this.get("value.dollars")).replace(/,/g,"").replace(/^\$/,"")),this.get("value.cents")&&e.push(""+this.get("value.cents")),!_.every(e,function(e){return e.match(/^-?\d+$/)}))return"price"}}),FormRenderer.Views.ResponseFieldPrice=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{'blur [data-rv-input="model.value.cents"]':"formatCents"}),formatCents:function(e){var n;if((n=u(e.target).val())&&n.match(/^\d$/))return this.model.set("value.cents","0"+n)}})}.call(this),function(){FormRenderer.Models.ResponseFieldRadio=FormRenderer.Models.ResponseFieldCheckboxes.extend({field_type:"radio",wrapper:"fieldset"}),FormRenderer.Views.ResponseFieldRadio=FormRenderer.Views.ResponseField.extend({wrapper:"fieldset",field_type:"radio"})}.call(this),function(){FormRenderer.Models.ResponseFieldSectionBreak=FormRenderer.Models.NonInputResponseField.extend({field_type:"section_break"}),FormRenderer.Views.ResponseFieldSectionBreak=FormRenderer.Views.ResponseField.extend({field_type:"section_break"})}.call(this),function(){FormRenderer.Models.ResponseFieldTable=FormRenderer.Models.ResponseField.extend({field_type:"table",initialize:function(){if(FormRenderer.Models.ResponseField.prototype.initialize.apply(this,arguments),this.get("column_totals"))return this.listenTo(this,"change:value.*",this.calculateColumnTotals)},canAddRows:function(){return this.numRows()<this.maxRows()},minRows:function(){return parseInt(this.get("minrows"),10)||0},maxRows:function(){return this.get("maxrows")&&parseInt(this.get("maxrows"),10)||1/0},setExistingValue:function(l){var u,e,d;return u=Math.max(this.minRows(),(null!=(e=_.values(l)[0])?e.length:void 0)||0,1),this.set("value",_.tap([],(d=this,function(e){var n,t,r,i,o,s,a;for(s=[],r=0,i=(o=d.getColumns()).length;r<i;r++)t=o[r],n=_.map(function(){a=[];for(var e=0,n=u-1;0<=n?e<=n:n<=e;0<=n?e++:e--)a.push(e);return a}.apply(this),function(e){var n;return d.getPresetValue(t.label,e)||(null!=l&&null!=(n=l[t.label])?n[e]:void 0)}),s.push(e.push(n));return s})))},numRows:function(){var e;return null!=(e=this.get("value"))&&e.length?Math.max(this.minRows(),e[0].length||0,1):0},hasValue:function(){return _.some(this.getValue(),(r=this,function(e,t){return _.some(e,function(e,n){return!r.getPresetValue(t,n)&&!!e})}));var r},getPresetValue:function(e,n){var t,r;return null!=(t=this.get("preset_values"))&&null!=(r=t[e])?r[n]:void 0},getValue:function(){return _.tap({},(l=this,function(r){var i,o,s,e,n,t,a;for(t=l.getColumns(),a=[],s=e=0,n=t.length;e<n;s=++e)i=t[s],r[i.label]=[],a.push(function(){var e,n,t;for(t=[],o=e=0,n=this.numRows()-1;0<=n?e<=n:n<=e;o=0<=n?++e:--e)t.push(r[i.label].push(this.get("value."+s+"."+o)||""));return t}.call(l));return a}));var l},toText:function(){return _.flatten(_.values(this.getValue())).join(" ")},calculateColumnTotals:function(){var e,n,t,r,i,o,s,a,l,u;for(u=[],r=i=0,s=(a=this.getColumns()).length;i<s;r=++i){for(a[r],n=[],t=o=0,l=this.numRows()-1;0<=l?o<=l:l<=o;t=0<=l?++o:--o)n.push(parseFloat((this.get("value."+r+"."+t)||"").replace(/\$?,?/g,"")));e=_.reduce(n,function(e,n){return _.isNaN(n)?e:e+n},0),u.push(this.set("columnTotals."+r,this.formatColumnSum(e)))}return u},formatColumnSum:function(e){var n,t,r;return 0<e?(t=(null!=(r=(""+(n=parseFloat(e.toFixed(10)))).split(".")[1])?r.length:void 0)||0,a.numberFormat(n,t,".",",")):""}}),FormRenderer.Views.ResponseFieldTable=FormRenderer.Views.ResponseField.extend({events:_.extend({},FormRenderer.Views.ResponseField.prototype.events,{"click .js-add-row":"addRow","click .js-remove-row":"removeRow"}),canRemoveRow:function(e){return Math.max(1,this.model.minRows())-1<e},addRow:function(e){var n,t,r,i;for(n in e.preventDefault(),t={},r=this.model.get("value"))i=r[n],t[n]=i.concat("");return this.model.set("value",t),this.render()},removeRow:function(e){var n,i,t,r,o;for(n in e.preventDefault(),i=u(e.currentTarget).closest("[data-row-index]").data("row-index"),t={},r=this.model.get("value"))o=r[n],t[n]=_.tap([],function(e){var n,t,r;for(n in t=[],o)r=o[n],parseInt(n,10)!==i?t.push(e.push(r)):t.push(void 0);return t});return this.model.set("value",t),this.render()}})}.call(this),function(){FormRenderer.Models.ResponseFieldText=FormRenderer.Models.ResponseField.extend({field_type:"text",valueType:"string"}),FormRenderer.Views.ResponseFieldText=FormRenderer.Views.ResponseField.extend({field_type:"text"})}.call(this),function(){FormRenderer.Models.ResponseFieldTime=FormRenderer.Models.ResponseField.extend({field_type:"time",wrapper:"fieldset",valueType:"hash",ignoreKeysWhenCheckingPresence:function(){return["am_pm"]},setExistingValue:function(e){if(FormRenderer.Models.ResponseField.prototype.setExistingValue.apply(this,arguments),!(null!=e?e.am_pm:void 0))return this.set("value.am_pm","AM")},toText:function(){return(this.getValue().hours||"00")+":"+(this.getValue().minutes||"00")+":"+(this.getValue().seconds||"00")+" "+this.getValue().am_pm},validateType:function(){var e,n,t;if(e=parseInt(this.get("value.hours"),10),n=parseInt(this.get("value.minutes"),10),t=parseInt(this.get("value.seconds"),10)||0,!(1<=e&&e<=12&&0<=n&&n<=59&&0<=t&&t<=59))return"time"}}),FormRenderer.Views.ResponseFieldTime=FormRenderer.Views.ResponseField.extend({wrapper:"fieldset",field_type:"time"})}.call(this),function(){FormRenderer.Models.ResponseFieldWebsite=FormRenderer.Models.ResponseField.extend({field_type:"website",valueType:"string"}),FormRenderer.Views.ResponseFieldWebsite=FormRenderer.Views.ResponseField.extend({field_type:"website"})}.call(this),function(){var e;e={validateType:function(){},validationFns:["validateType","validateInteger","validateLength","validateMinMax"],validateComponent:function(e){var n,t,r,i,o,s;if(null==e&&(e={}),r=this.get("error"),this.errors=[],this.isVisible&&!this.parentGroupIsHidden()){if(this.hasValue())for(i=0,o=(s=this.validationFns).length;i<o;i++)(t=this[s[i]]())&&this.errors.push(FormRenderer.t.errors[t]);else this.isRequired()&&this.errors.push(FormRenderer.t.errors.blank);return n=this.getError(),e.clearOnly&&r!==n?this.set("error",null):this.set("error",this.getError()),this.fr.trigger("afterValidate afterValidate:one",this)}},hasIntegerValidation:function(){return"number"===this.field_type&&this.get("integer_only")},validateInteger:function(){if(this.hasIntegerValidation())return FormRenderer.normalizeNumber(this.get("value"),this.get("units")).match(/^-?\d+$/)?void 0:"integer"},hasLengthValidation:function(){var e;return("text"===(e=this.field_type)||"paragraph"===e)&&(this.get("minlength")||this.get("maxlength"))},validateLength:function(){var e,n,t;if(this.hasLengthValidation())return t=parseInt(this.get("minlength"),10)||void 0,n=parseInt(this.get("maxlength"),10)||void 0,e=FormRenderer.getLength(this.getLengthValidationUnits(),this.get("value")),t&&e<t?"short":n&&n<e?"long":void 0},hasMinMaxValidation:function(){var e;return("number"===(e=this.field_type)||"price"===e)&&(this.get("min")||this.get("max"))},validateMinMax:function(){var e,n,t;if(this.hasMinMaxValidation())return n=this.get("min")&&parseFloat(this.get("min")),e=this.get("max")&&parseFloat(this.get("max")),t="price"===this.field_type?parseFloat((this.get("value.dollars")||0)+"."+(this.get("value.cents")||0)):parseFloat(this.get("value").replace(/,/g,"")),n&&t<n?"small":e&&e<t?"large":void 0}},_.extend(FormRenderer.Models.ResponseField.prototype,e)}.call(this),function(){var e;e={_sharedInitialize:function(e){return this.form_renderer=e.form_renderer,this.model=e.model,this.model.id&&this.$el.addClass("fr_response_field_"+this.model.id),this.showLabels=this.form_renderer?this.form_renderer.options.showLabels:this.showLabels=e.showLabels},reflectConditions:function(){return this.model.isVisible?this.$el.show():this.$el.hide()},domId:function(){return this.model.cid},getDomId:function(){return domId}},_.extend(FormRenderer.Views.ResponseFieldRepeatingGroup.prototype,e),_.extend(FormRenderer.Views.ResponseField.prototype,e)}.call(this),function(){var e;e={getValue:function(){return _.tap({},(e=this,function(n){return e.formComponents.each(function(e){if(e.shouldPersistValue())return n[e.get("id")]=e.getValue()})}));var e},initFormComponents:function(e,n){var t,r,i,o;for(this.formComponents=new Backbone.Collection,this.response_fields=this.formComponents,r=0,i=e.length;r<i;r++)t=e[r],(o=FormRenderer.buildFormComponentModel(t,this.fr,this)).setExistingValue(n[o.get("id")]),this.formComponents.add(o);return this.initConditions(),this.listenTo(this.formComponents,"change:value change:value.*",function(e){return this.runConditions(e),this.fr.responsesChanged()})},initConditions:function(){return this.allConditions=_.flatten(this.formComponents.map(function(n){return _.map(n.getConditions(),function(e){return _.extend({},e,{parent:n})})}))},conditionsForResponseField:function(n){return _.filter(this.allConditions,function(e){return""+e.response_field_id==""+n.id})},runConditions:function(e){var n;if(n=!1,_.each(this.conditionsForResponseField(e),function(e){if(e.parent.calculateVisibilityIsChanged())return n=!0}),n)return this.reflectConditions()}},_.extend(FormRenderer.prototype,e),_.extend(FormRenderer.Models.ResponseFieldRepeatingGroupEntry.prototype,e)}.call(this),function(){FormRenderer.Plugins.Base=function(e){this.fr=e}}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.Autosave=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.afterFormLoad=function(){return setInterval((e=this,function(){if(e.fr.state.get("hasChanges"))return e.fr.save()}),5e3);var e},n}()}.call(this),function(){var t,r,i={}.hasOwnProperty;r="frDraft",t=function(e){var n,t;return t=o.location.href,e=e.replace(/[\[\]]/g,"\\$&"),(n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t))?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},FormRenderer.Plugins.BookmarkDraft=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.beforeFormLoad=function(){var e;if(e=t(r))return this.fr.options.response.id=e},n.prototype.afterFormLoad=function(){return this.fr.subviews.bookmarkDraft=new FormRenderer.Plugins.BookmarkDraft.View({form_renderer:this.fr}),this.fr.$el.append(this.fr.subviews.bookmarkDraft.render().el)},n}(),FormRenderer.Plugins.BookmarkDraft.View=Backbone.View.extend({events:{"click .js-fr-bookmark":"requestBookmark"},initialize:function(e){return this.form_renderer=e.form_renderer},render:function(){return this.$el.html(JST["plugins/bookmark_draft"](this)),this.form_renderer.trigger("viewRendered",this),this},showBookmark:function(e){return prompt(FormRenderer.t.bookmark_hint,e)},getUrl:function(){var e;return(e=new Url).query[r]=this.form_renderer.options.response.id,e.toString()},requestBookmark:function(e){var n,t,r;return e.preventDefault(),n=function(){return t.render(),t.showBookmark(t.getUrl())},(t=this).form_renderer.options.response.id?n():(this.$el.find("a").text(FormRenderer.t.saving),this.form_renderer.waitForRequests((r=this,function(){return r.form_renderer.options.response.id?n():r.form_renderer.save({cb:n})})))}})}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.BottomBar=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.afterFormLoad=function(){return this.fr.subviews.bottomBar=new FormRenderer.Plugins.BottomBar.View({form_renderer:this.fr}),this.fr.$el.append(this.fr.subviews.bottomBar.render().el)},n}(),FormRenderer.Plugins.BottomBar.View=Backbone.View.extend({events:{"click [data-fr-previous-page]":function(e){return e.preventDefault(),this.form_renderer.handlePreviousPage()},"click [data-fr-next-page]":function(e){return e.preventDefault(),this.form_renderer.handleNextPage()}},initialize:function(e){return this.form_renderer=e.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage change:hasChanges change:submitting change:hasServerErrors",this.render)},render:function(){return this.$el.html(JST["plugins/bottom_bar"](this)),this.form_renderer.trigger("viewRendered",this),this}})}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.ErrorBar=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.afterFormLoad=function(){return this.fr.subviews.errorBar=new FormRenderer.Plugins.ErrorBar.View({form_renderer:this.fr}),this.fr.$el.prepend(this.fr.subviews.errorBar.render().el)},n}(),FormRenderer.Plugins.ErrorBar.View=Backbone.View.extend({events:{"click a":function(e){return e.preventDefault(),this.form_renderer.focusFirstError()}},initialize:function(e){var n;return this.form_renderer=e.form_renderer,this.listenTo(this.form_renderer,"afterValidate:all",(n=this,function(){return n.render(),n.$el.find(".fr_error_alert_bar a").focus()})),this.listenTo(this.form_renderer,"afterValidate:one",function(){if(this.form_renderer.areAllPagesValid())return this.render()})},render:function(){return this.$el.html(JST["plugins/error_bar"](this)),this.form_renderer.trigger("viewRendered",this),this.form_renderer.areAllPagesValid()||o.scrollTo(0,this.$el.offset().top-this.form_renderer.options.scrollToPadding),this}})}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.PageState=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.afterFormLoad=function(){var e,n,t;return(e=null!=(t=o.location.hash.match(/page([0-9]+)/))?t[1]:void 0)&&(n=parseInt(e,10),this.fr.isPageVisible(n)&&this.fr.activatePage(n)),this.fr.state.on("change:activePage",function(e,n){return o.location.hash="page"+n})},n}()}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.SavedSession=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.beforeFormLoad=function(){var e,n,t;return t="project-"+this.fr.options.project_id+"-response-id",null==this.fr.options.response.id&&(n=Cookies.get(t)),null!=n&&(-1!==n.indexOf(",")?(e=this.fr.options.response).id||(e.id=n):Cookies.remove(t)),this.fr.on("afterSave",function(){if(!this.state.get("submitting"))return Cookies.set(t,this.options.response.id)}),this.fr.on("afterSubmit",function(){return Cookies.remove(t)}),this.fr.on("errorSaving",function(){return Cookies.remove(t)})},n}()}.call(this),function(){var i={}.hasOwnProperty;FormRenderer.Plugins.WarnBeforeUnload=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var t in n)i.call(n,t)&&(e[t]=n[t]);function r(){this.constructor=e}r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype}(n,FormRenderer.Plugins.Base),n.prototype.afterFormLoad=function(){return BeforeUnload.enable({if:(e=this,function(){return e.fr.state.get("hasChanges")})});var e},n}()}.call(this),function(){FormRenderer.Views.Page=Backbone.View.extend({className:"fr_page",initialize:function(e){return this.form_renderer=e.form_renderer,this.models=[],this.views=[]},render:function(){var e,n,t,r,i;for(this.hide(),e=0,n=(t=this.models).length;e<n;e++)r=t[e],i=FormRenderer.buildFormComponentView(r,this.form_renderer),this.$el.append(i.render().el),i.reflectConditions(),this.views.push(i);return this},hide:function(){var e,n,t,r,i;for(this.$el.hide(),r=[],e=0,n=(t=this.views).length;e<n;e++)i=t[e],r.push(i.trigger("hidden"));return r},show:function(){var e,n,t,r,i;for(this.$el.show(),r=[],e=0,n=(t=this.views).length;e<n;e++)i=t[e],r.push(i.trigger("shown"));return r},reflectConditions:function(){var e,n,t,r,i;for(r=[],e=0,n=(t=this.views).length;e<n;e++)i=t[e],r.push(i.reflectConditions());return r},validate:function(){var e,n,t,r,i;for(i=[],n=0,t=(r=this.models).length;n<t;n++)e=r[n],i.push(e.validateComponent());return i},fieldViews:function(){return _.tap([],(l=this,function(i){var o,s,e,n,t,r,a;for(r=[],e=0,n=(t=l.views).length;e<n;e++)(a=t[e]).model.group?a.model.isSkipped()?r.push(void 0):r.push(function(){var e,n,t,r;for(r=[],e=0,n=(t=a.model.entries).length;e<n;e++)o=t[e],r.push(function(){var e,n,t,r;for(r=[],e=0,n=(t=o.view.views).length;e<n;e++)s=t[e],r.push(i.push(s));return r}());return r}()):r.push(i.push(a));return r}));var l},firstViewWithError:function(){return _.find(this.fieldViews(),function(e){return 0<e.model.errors.length})},isVisible:function(){return _.any(this.models,function(e){return e.isVisible})},isValid:function(){return!this.firstViewWithError()}})}.call(this),function(){FormRenderer.Views.Pagination=Backbone.View.extend({events:{"click [data-activate-page]":function(e){return e.preventDefault(),this.form_renderer.activatePage(u(e.currentTarget).data("activate-page"))}},initialize:function(e){return this.form_renderer=e.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage",this.render),this.listenTo(this.form_renderer,"afterValidate",this.render)},render:function(){return this.$el.html(JST["partials/pagination"](this)),this.form_renderer.trigger("viewRendered",this),this}})}.call(this),FormRenderer.FILE_TYPES={images:["bmp","gif","jpg","jpeg","png","psd","tif","tiff"],videos:["m4v","mp4","mov","mpg"],audio:["m4a","mp3","wav"],docs:["doc","docx","pdf","rtf","txt"],spreadsheets:["csv","xls","xlsx"],presentations:["ppt","pptx"],pdfs:["pdf"]};"undefined"!=typeof FormRenderer&&(FormRenderer.t={address:"Address",add_another:"Add another",answer:"Answer this question",back_to_page:"Back to page :num",blind:"Blind",bookmark_hint:"To finish your response later, copy the link below.",cents:"Cents",characters:"characters",choose_an_option:"Choose an option",city:"City",clear:"Clear",click_to_set:"Click to set location",coordinates:"Coordinates",country:"Country",dollars:"Dollars",email:"Email",enter_at_least:"Enter at least :min",enter_between:"Enter between :min and :max",enter_exactly:"Enter :num",enter_up_to:"Enter up to :max",error:"Error",errors:{blank:"This field can't be blank.",date:"Please enter a valid date.",email:"Please enter a valid email address.",identification:"Please enter your name and email address.",integer:"Please enter a whole number.",large:"Your answer is too large.",long:"Your answer is too long.",number:"Please enter a valid number.",phone:"Please enter a valid phone number.",price:"Please enter a valid price.",short:"Your answer is too short.",small:"Your answer is too small.",time:"Please enter a valid time.",us_phone:"Please enter a valid 10-digit phone number."},error_bar:{errors:"Your response has <a href='#'>validation errors</a>."},error_filename:"Error reading filename",error_loading:"Error loading form",error_saving:"Error saving",finishing_up:"Finishing up...",finish_later:"Finish this later",has_conditions:"Has conditions",hidden:"Hidden",loading_form:"Loading form...",na:"N/A",name:"Name",next_page:"Next page",not_supported:"Sorry, your browser does not support this embedded form. Please visit <a href=':url?fr_not_supported=t'>:url</a> to fill out this form.",other:"Other",postal_code:"Postal Code",province:"Province",remove:"Remove",saved:"Saved",saving:"Saving...",skip:"Skip this question",skipped:"This question is skipped.",state:"State",state_province_region:"State / Province / Region",submit:"Submit",submitting:"Submitting",thanks:"Thanks for submitting our form!",upload:"Upload a file",uploading:"Uploading...",upload_another:"Upload another file",we_accept:"We'll accept",words:"words",write_here:"Write your answer here",zip_code:"ZIP Code"}),o.JST||(o.JST={}),o.JST["fields/address"]=function(t){var d=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,u=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r,i,o,s,a,l;if(e=this.model.get("address_format"),u(d("\n\n")),"city_state"!==e&&"city_state_zip"!==e&&"country"!==e&&(u(d("\n  <div class='fr_grid'>\n    <div class='fr_full has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),u(this.domId()),u(d("_street'>")),u(FormRenderer.t.address),u(d('</label>\n      <input type="text"\n             id="')),u(this.domId()),u(d("_street\"\n             data-rv-input='model.value.street' />\n    </div>\n  </div>\n"))),u(d("\n\n")),"country"!==e){if(u(d("\n  <div class='fr_grid'>\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),u(this.domId()),u(d("_city'>")),u(FormRenderer.t.city),u(d("</label>\n      <input type=\"text\"\n             data-rv-input='model.value.city'\n             id='")),u(this.domId()),u(d("_city' />\n    </div>\n\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),u(this.domId()),u(d("_state'>\n        ")),"US"===this.model.get("value.country")?(u(d("\n          ")),u(FormRenderer.t.state)):"CA"===this.model.get("value.country")?(u(d("\n          ")),u(FormRenderer.t.province)):(u(d("\n          ")),u(FormRenderer.t.state_province_region)),u(d("\n        ")),u(d("\n      </label>\n\n      ")),"US"===(o=this.model.get("value.country"))||"CA"===o){for(u(d("\n        <select data-rv-value='model.value.state' data-width='100%' id='")),u(this.domId()),u(d("_state'>\n          <option></option>\n          ")),n=0,r=(s=FormRenderer["PROVINCES_"+this.model.get("value.country")]).length;n<r;n++)l=s[n],u(d("\n            <option value='")),u(l),u(d("'>")),u(l),u(d("</option>\n          "));u(d("\n        </select>\n      "))}else u(d("\n        <input type=\"text\" data-rv-input='model.value.state' id='")),u(this.domId()),u(d("_state' />\n      "));u(d("\n    </div>\n  </div>\n"))}if(u(d("\n\n<div class='fr_grid'>\n  ")),"city_state"!==e&&"country"!==e&&(u(d("\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),u(this.domId()),u(d("_zipcode'>\n        ")),"US"===this.model.get("value.country")?(u(d("\n          ")),u(FormRenderer.t.zip_code)):(u(d("\n          ")),u(FormRenderer.t.postal_code)),u(d("\n        ")),u(d("\n      </label>\n      <input type=\"text\"\n             data-rv-input='model.value.zipcode'\n             id='")),u(this.domId()),u(d("_zipcode' />\n    </div>\n  "))),u(d("\n\n  ")),"city_state"!==e&&"city_state_zip"!==e){for(u(d("\n    <div class='fr_half has_sub_label'>\n      <label class=\"fr_sub_label\" for='")),u(this.domId()),u(d("_country'>")),u(FormRenderer.t.country),u(d("</label>\n      <select data-rv-value='model.value.country' data-width='100%' id='")),u(this.domId()),u(d("_country'>\n        ")),t=0,i=(a=FormRenderer.ORDERED_COUNTRIES).length;t<i;t++)l=a[t],u(d("\n          <option value='")),u(l),u(d("'>")),u(ISOCountryNames[l]||"---"),u(d("</option>\n        "));u(d("\n      </select>\n    </div>\n  "))}u(d("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:d};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/block_of_text"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r(JST["partials/labels"](this))),e(r("\n\n<div class='fr_text size_")),e(this.model.getSize()),e(r("'>\n  ")),e(this.safe(FormRenderer.formatAndSanitizeHTML(this.model.get("description")))),e(r("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/checkboxes"]=function(t){var o=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,i=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r;for(e=0,n=(r=this.model.getOptions()).length;e<n;e++)t=r[e],i(o("\n  <label class='fr_option control'>\n    <input type='checkbox' data-rv-checkedarray='model.value.checked' value=\"")),i(t.label),i(o('" />\n    ')),i(t.translated_label||t.label),i(o("\n  </label>\n"));i(o("\n\n")),this.model.get("include_other_option")&&(i(o("\n  <div class='fr_option fr_other_option'>\n    <label class='control'>\n      <input type='checkbox' data-rv-checked='model.value.other_checked' />\n      ")),i(FormRenderer.t.other),i(o("\n    </label>\n\n    <input type='text'\n           data-rv-show='model.value.other_checked'\n           data-rv-input='model.value.other_text'\n           placeholder='")),i(FormRenderer.t.write_here),i(o("' />\n  </div>\n"))),i(o("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:o};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/confirm"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<label class='fr_option control'>\n  <input type='checkbox' data-rv-checked='model.value' />\n  ")),e(this.model.get("label")),e(r(JST["partials/required"](this))),e(r("\n</label>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/date"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_grid'>\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r('_month">MM</label>\n    <input type="text"\n           id="')),e(this.domId()),e(r("_month\"\n           data-rv-input='model.value.month'\n           maxlength='2'\n           size='2' />\n  </div>\n\n  <div class='fr_spacer'>/</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r("_day\">DD</label>\n    <input type=\"text\"\n           data-rv-input='model.value.day'\n           maxlength='2'\n           size='2'\n           id=\"")),e(this.domId()),e(r('_day" />\n  </div>\n\n  ')),this.model.get("disable_year")||(e(r("\n    <div class='fr_spacer'>/</div>\n\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r("_year\">YYYY</label>\n      <input type=\"text\"\n             data-rv-input='model.value.year'\n             maxlength='4'\n             size='4'\n             id=\"")),e(this.domId()),e(r('_year" />\n    </div>\n  '))),e(r("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/dropdown"]=function(t){var o=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,i=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r;for(i(o('<select id="')),i(this.domId()),i(o("\" data-rv-value='model.value'>\n  ")),this.model.get("include_blank_option")&&(i(o('\n    <option selected value="">\n      ')),i(FormRenderer.t.choose_an_option),i(o("\n    </option>\n  "))),i(o("\n\n  ")),e=0,n=(r=this.model.getOptions()).length;e<n;e++)t=r[e],i(o('\n    <option value="')),i(t.label),i(o('">\n      ')),i(t.translated_label||t.label),i(o("\n    </option>\n  "));i(o("\n</select>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:o};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/email"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<input type="text" inputmode="email"\n       id="')),e(this.domId()),e(r("\"\n       data-rv-input='model.value' />\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/file"]=function(t){var s=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,o=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r,i;for(o(s("<div class='fr_files'>\n  ")),t=0,r=(i=this.model.getFiles()).length;t<r;t++)e=i[t],o(s("\n    <div class='fr_file'>\n      <span>")),o(e.filename),o(s("</span>\n      <button data-fr-remove-file class='")),o(FormRenderer.BUTTON_CLASS),o(s("'>")),o(FormRenderer.t.remove),o(s("</button>\n    </div>\n  "));o(s("\n</div>\n\n")),this.model.canAddFile()&&(o(s("\n  <div class='fr_add_file'>\n    <label for='")),o(this.domId()),o(s("' class='")),o(FormRenderer.BUTTON_CLASS),o(s("'>\n      ")),o(this.model.getFiles().length?FormRenderer.t.upload_another:FormRenderer.t.upload),o(s("\n    </label>\n\n    <input type='file'\n           id='")),o(this.domId()),o(s("'\n           ")),(n=this.model.getAcceptedExtensions())&&(o(s("\n            accept='")),o(n.join(",")),o(s("'\n           "))),o(s("\n           />\n\n    <span class='fr_error' style='display:none'></span>\n\n    ")),(n=this.model.getAcceptedExtensions())&&(o(s("\n      <div class='fr_description'>\n        ")),o(FormRenderer.t.we_accept),o(s(" ")),o(a.toSentence(n)),o(s("\n      </div>\n    "))),o(s("\n  </div>\n"))),o(s("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:s};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/identification"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_grid'>\n  <div class='fr_half'>\n    <label for='")),e(this.domId()),e(r("-name'>\n      ")),e(FormRenderer.t.name),e(r("\n\n      ")),this.dontRenderInputs()||e(r("\n        <abbr class='fr_required' title='required'>*</abbr>\n      ")),e(r("\n    </label>\n\n    ")),this.dontRenderInputs()?(e(r("\n      <span>")),e(this.model.get("value.name")),e(r("</span>\n    "))):(e(r("\n      <input type='text'\n             id='")),e(this.domId()),e(r("-name'\n             data-rv-input='model.value.name' />\n    "))),e(r("\n  </div>\n\n  <div class='fr_half'>\n    <label for='")),e(this.domId()),e(r("-email'>\n      ")),e(FormRenderer.t.email),e(r("\n      ")),this.dontRenderInputs()||e(r("\n        <abbr class='fr_required' title='required'>*</abbr>\n      ")),e(r("\n    </label>\n\n    ")),this.dontRenderInputs()?(e(r("\n      <span>")),e(this.model.get("value.email")),e(r("</span>\n    "))):(e(r('\n      <input type="text"\n             id=\'')),e(this.domId()),e(r("-email'\n             data-rv-input='model.value.email' />\n    "))),e(r("\n  </div>\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/map_marker"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_map_wrapper'>\n  <div class='fr_map_map' />\n\n  <div class='fr_map_cover'>\n    ")),e(FormRenderer.t.click_to_set),e(r("\n  </div>\n\n  <div class='fr_map_toolbar'>\n    <div class='fr_map_coord'>\n      <strong>")),e(FormRenderer.t.coordinates),e(r(":</strong>\n      <span data-rv-show='model.value'>\n        <span data-rv-text='model.value.0' />,\n        <span data-rv-text='model.value.1' />\n      </span>\n      <span data-rv-hide='model.value' class='fr_map_no_location'>")),e(FormRenderer.t.na),e(r("</span>\n    </div>\n    <a class='fr_map_clear' data-fr-clear-map data-rv-show='model.value' href='#'>")),e(FormRenderer.t.clear),e(r("</a>\n  </div>\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/number"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<input type="text"\n       id="')),e(this.domId()),e(r("\"\n       data-rv-input='model.value'\n       class=\"size_")),e(this.calculateSize()),e(r('" />\n\n')),this.model.get("units")&&(e(r("\n  <span class='fr_units'>\n    ")),e(this.model.get("units")),e(r("\n  </span>\n"))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/page_break"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this;return function(){var e;void 0!==(e=r("<div class='fr_page_break_inner'>\n  Page break\n</div>\n"))&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/paragraph"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<textarea\n   id="')),e(this.domId()),e(r('"\n   class="size_')),e(this.model.getSize()),e(r("\"\n   data-rv-input='model.value' />\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/phone"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<input type="text"\n       inputmode="tel"\n       id="')),e(this.domId()),e(r("\"\n       data-rv-input='model.value'\n       placeholder=\"")),e(this.phonePlaceholder()),e(r('" />\n'))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/price"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_grid'>\n  <div class='fr_spacer'>$</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r('_dollars">')),e(FormRenderer.t.dollars),e(r('</label>\n    <input type="text"\n           id="')),e(this.domId()),e(r("_dollars\"\n           data-rv-input='model.value.dollars'\n           size='6' />\n  </div>\n\n  ")),this.model.get("disable_cents")||(e(r("\n    <div class='fr_spacer'>.</div>\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r('_cents">')),e(FormRenderer.t.cents),e(r("</label>\n      <input type=\"text\"\n             data-rv-input='model.value.cents'\n             maxlength='2'\n             size='2'\n             id=\"")),e(this.domId()),e(r('_cents" />\n    </div>\n  '))),e(r("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/radio"]=function(t){var o=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,i=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r;for(e=0,n=(r=this.model.getOptions()).length;e<n;e++)t=r[e],i(o("\n  <label class='fr_option control'>\n    <input type='radio'\n           data-rv-dobtradiogroup='model.value.checked'\n           value=\"")),i(t.label),i(o('"\n    />\n    ')),i(t.translated_label||t.label),i(o("\n  </label>\n"));i(o("\n\n")),this.model.get("include_other_option")&&(i(o("\n  <div class='fr_option fr_other_option'>\n    <label class='control'>\n      <input type='radio'\n             data-rv-dobtradiogroup='model.value.checked'\n             class=\"js_other_option\"\n      />\n      ")),i(FormRenderer.t.other),i(o("\n    </label>\n\n    <input type='text'\n           data-rv-show='model.value.other_checked'\n           data-rv-input='model.value.other_text'\n           placeholder='")),i(FormRenderer.t.write_here),i(o("'\n    />\n  </div>\n"))),i(o("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:o};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/section_break"]=function(t){var i=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,r=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e;r(i(JST["partials/labels"](this))),r(i("\n\n")),e=FormRenderer.formatAndSanitizeHTML(this.model.get("description")),r(i("\n<")),r(this.model.sizeToHeaderTag()),r(i(">")),r(this.model.get("label")),r(i("</")),r(this.model.sizeToHeaderTag()),r(i(">\n")),e&&(r(i("\n  <div class='fr_text size_")),r(this.model.getSize()),r(i("'>\n    ")),r(this.safe(e)),r(i("\n  </div>\n"))),r(i("\n\n<hr />\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:i};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/table"]=function(t){var m=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,f=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r,i,o,s,a,l,u,d,c,p,h;for(f(m("<table class='fr_table'>\n  <thead>\n    <tr>\n      ")),r=0,o=(d=this.model.getColumns()).length;r<o;r++)e=d[r],f(m("\n        <th>")),f(e.translated_label||e.label),f(m("</th>\n      "));for(f(m("\n\n      <th class='fr_table_col_remove'></th>\n    </tr>\n  </thead>\n\n  <tbody>\n    ")),n=i=0,c=this.model.numRows()-1;0<=c?i<=c:c<=i;n=0<=c?++i:--i){for(f(m('\n      <tr data-row-index="')),f(n),f(m('">\n        ')),t=l=0,s=(p=this.model.getColumns()).length;l<s;t=++l)e=p[t],f(m("\n          ")),this.model.getPresetValue(e.label,n)?(f(m("\n            <td class='fr_table_preset'>\n              <span data-rv-text='model.value.")),f(t),f(m(".")),f(n),f(m("'></span>\n          "))):(f(m("\n            <td>\n              <textarea data-rv-input='model.value.")),f(t),f(m(".")),f(n),f(m("'\n                        rows='1'\n                        aria-label=\"")),f(e.translated_label||e.label),f(m(" #")),f(n+1),f(m('"\n                        ')),0===t&&0===n&&(f(m("id='")),f(this.domId()),f(m("'"))),f(m(" />\n          "))),f(m("\n          </td>\n        "));f(m("\n\n        <td class='fr_table_col_remove'>\n          ")),this.canRemoveRow(n)&&(f(m("\n            <a class='js-remove-row' href='#'>\n              ")),f(m(FormRenderer.REMOVE_ROW_ICON)),f(m("\n            </a>\n          "))),f(m("\n        </td>\n      </tr>\n    "))}if(f(m("\n  </tbody>\n\n  ")),this.model.get("column_totals")){for(f(m("\n    <tfoot>\n      <tr>\n        ")),t=u=0,a=(h=this.model.getColumns()).length;u<a;t=++u)e=h[t],f(m("\n          <td data-rv-text='model.columnTotals.")),f(t),f(m("'></td>\n        "));f(m('\n        <td class="fr_table_col_remove"></td>\n      </tr>\n    </tfoot>\n  '))}f(m("\n</table>\n\n<div class='fr_table_add_row_wrapper'>\n  ")),this.model.canAddRows()&&(f(m("\n    <a class='js-add-row' href='#'>\n      ")),f(m(FormRenderer.ADD_ROW_ICON)),f(m("\n      ")),f(FormRenderer.t.add_another),f(m("\n    </a>\n  "))),f(m("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:m};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/text"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<input type="text"\n       id="')),e(this.domId()),e(r('"\n       class="size_')),e(this.model.getSize()),e(r("\"\n       data-rv-input='model.value' />\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/time"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_grid'>\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r('_hours">HH</label>\n    <input type="text"\n           id="')),e(this.domId()),e(r("_hours\"\n           data-rv-input='model.value.hours'\n           maxlength='2'\n           size='2' />\n  </div>\n\n  <div class='fr_spacer'>:</div>\n\n  <div class='has_sub_label'>\n    <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r("_minutes\">MM</label>\n    <input type=\"text\"\n           data-rv-input='model.value.minutes'\n           maxlength='2'\n           size='2'\n           id=\"")),e(this.domId()),e(r('_minutes" />\n  </div>\n\n  ')),this.model.get("disable_seconds")||(e(r("\n    <div class='fr_spacer'>:</div>\n\n    <div class='has_sub_label'>\n      <label class=\"fr_sub_label\" for=\"")),e(this.domId()),e(r("_seconds\">SS</label>\n      <input type=\"text\"\n             data-rv-input='model.value.seconds'\n             maxlength='2'\n             size='2'\n             id=\"")),e(this.domId()),e(r('_seconds" />\n    </div>\n  '))),e(r("\n\n  <div class='has_sub_label'>\n    <select data-rv-value='model.value.am_pm' data-width='auto' aria-label='AM/PM'>\n      <option value='AM'>AM</option>\n      <option value='PM'>PM</option>\n    </select>\n  </div>\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["fields/website"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r('<input type="text" inputmode="url"\n       id="')),e(this.domId()),e(r("\"\n       data-rv-input='model.value'\n       placeholder='http://' />\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST.main=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_loading'>\n  ")),e(FormRenderer.t.loading_form),e(r("\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/description"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){this.model.get("description")&&(e(r("\n  <div class='fr_description'>\n    ")),e(this.safe(FormRenderer.formatAndSanitizeHTML(this.model.get("description")))),e(r("\n  </div>\n"))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/error"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this;return function(){var e;void 0!==(e=r("<div class='fr_error' data-rv-show='model.error' data-rv-text='model.error'></div>\n"))&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/label"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<label ")),this.model.group||"fieldset"===this.model.wrapper?e(r('aria-hidden="true"')):(e(r('for="')),e(this.domId()),e(r('"'))),e(r(">\n  ")),e(this.model.get("label")),e(r(JST["partials/required"](this))),e(r("\n  ")),e(r(JST["partials/labels"](this))),e(r("\n</label>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/labels"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){this.showLabels&&(e(r("\n  ")),this.model.get("admin_only")&&(e(r("\n    <span class='label label_fb'><i class='fa fa-lock'></i>")),e(FormRenderer.t.hidden),e(r("</span>\n  "))),e(r("\n  ")),this.model.get("blind")&&(e(r("\n    <span class='label label_fb'><i class='fa fa-eye-slash'></i> ")),e(FormRenderer.t.blind),e(r("</span>\n  "))),e(r("\n  ")),this.model.isConditional()&&(e(r("\n    <span class='label label_fb'><i class='fa fa-code-fork'></i>")),e(FormRenderer.t.has_conditions),e(r("</span>\n  "))),e(r("\n"))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/length_counter"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this;return function(){var e;void 0!==(e=r("<span class='fr_length_counter' data-rv-text='model.currentLength'></span>\n"))&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/length_validations"]=function(t){var i=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,r=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t;n=this.model.get("minlength"),r(i("\n")),e=this.model.get("maxlength"),r(i("\n")),t=this.model.getLengthValidationUnits(),r(i("\n\n")),this.model.hasLengthValidation()&&(r(i("\n  <div class='fr_min_max'>\n    <span class='fr_min_max_guide'>\n      ")),n&&e?(r(i("\n        ")),n===e?(r(i("\n          ")),r(FormRenderer.t.enter_exactly.replace(":num",n))):(r(i("\n          ")),r(FormRenderer.t.enter_between.replace(":min",n).replace(":max",e))),r(i(" ")),r(FormRenderer.t[t]),r(i(".\n        ")),r(i("\n      "))):n?(r(i("\n        ")),r(FormRenderer.t.enter_at_least.replace(":min",n)),r(i(" ")),r(FormRenderer.t[t]),r(i(".\n      "))):e&&(r(i("\n        ")),r(FormRenderer.t.enter_up_to.replace(":max",e)),r(i(" ")),r(FormRenderer.t[t]),r(i(".\n      "))),r(i("\n    </span>\n\n    ")),r(i(JST["partials/length_counter"](this))),r(i("\n  </div>\n"))),r(i("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:i};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/min_max_validations"]=function(t){var i=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,r=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n;this.model.hasMinMaxValidation()&&(r(i("\n  ")),n=this.model.get("min"),r(i("\n  ")),e=this.model.get("max"),r(i("\n\n  <div class='fr_min_max'>\n    ")),n&&e?(r(i("\n      ")),r(FormRenderer.t.enter_between.replace(":min",n).replace(":max",e)),r(i(".\n    "))):n?(r(i("\n      ")),r(FormRenderer.t.enter_at_least.replace(":min",n)),r(i(".\n    "))):e&&(r(i("\n      ")),r(FormRenderer.t.enter_up_to.replace(":max",e)),r(i(".\n    "))),r(i("\n  </div>\n"))),r(i("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:i};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/non_input_response_field"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r(JST["fields/"+this.model.field_type](this))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/pagination"]=function(t){var s=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,o=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e,n,t,r,i;if(1<this.form_renderer.visiblePages().length){for(o(s("\n  <ul class='fr_pagination'>\n    ")),n=t=0,r=(i=this.form_renderer.visiblePages()).length;t<r;n=++t)e=i[n],o(s("\n      <li class='")),this.form_renderer.isPageValid(e)||o(s("has_errors")),o(s("'>\n        ")),e===this.form_renderer.state.get("activePage")?(o(s("\n          <span>")),o(n+1),o(s("</span>\n        </li>\n        "))):(o(s('\n          <a data-activate-page="')),o(e),o(s("\" href='#'>\n            ")),o(n+1),o(s("\n          </a>\n        "))),o(s("\n      </li>\n    "));o(s("\n  </ul>\n"))}o(s("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:s};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/repeating_group_entry"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_group_entry_idx'><span>")),e(this.idx+1),e(r("</span></div>\n\n<div class='fr_group_entry_fields'>\n</div>\n\n")),this.entry.canRemove()&&(e(r("\n  <a href='#' class='js-remove-entry ")),e(r(FormRenderer.REMOVE_ENTRY_LINK_CLASS)),e(r("'>")),e(r(FormRenderer.REMOVE_ENTRY_LINK_HTML)),e(r("</a>\n"))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/repeating_group"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<fieldset class='fr_fieldset'>\n  <legend>")),e(this.model.get("label")),e(r("</legend>\n\n  ")),e(r(JST["partials/label"](this))),e(r('\n\n  <div class="fr_description">\n    ')),this.model.renderingRespondentForm()?(e(r("\n      ")),e(this.model.get("description"))):(e(r("\n      ")),e(this.model.getTruncatedDescription())),e(r("\n    ")),e(r("\n  </div>\n\n  ")),this.model.isSkipped()?(e(r("\n    <a href='#' class='js-skip fr_group_answer'>")),e(FormRenderer.t.answer),e(r("</a>\n    <div class='fr_group_skipped' style='clear: both'>")),e(FormRenderer.t.skipped),e(r("</div>\n  "))):(e(r("\n    ")),this.model.isRequired()||(e(r("\n      <a href='#' class='js-skip fr_group_skip'>")),e(FormRenderer.t.skip),e(r("</a>\n    "))),e(r("\n\n    <div class='fr_group_entries'>\n    </div>\n\n    ")),this.model.canAdd()&&(e(r("\n      <a href='#' class='js-add-entry ")),e(FormRenderer.BUTTON_CLASS),e(r("'>")),e(FormRenderer.t.add_another),e(r("</a>\n    "))),e(r("\n  "))),e(r("\n</fieldset>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/required"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){this.model.get("required")&&e(r("&nbsp;<abbr class='fr_required' title='required'>*</abbr>")),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["partials/response_field"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){"fieldset"===this.model.wrapper?(e(r("\n  <fieldset class='fr_fieldset'>\n    <legend>")),e(this.model.get("label")),e(r("</legend>\n    ")),e(r(JST["partials/label"](this))),e(r("\n    <div class='fr_field_wrapper'>\n      ")),e(r(JST["fields/"+this.model.field_type](this))),e(r("\n    </div>\n  </fieldset>\n"))):("label"===this.model.wrapper&&(e(r("\n  ")),e(r(JST["partials/label"](this)))),e(r("\n  <div class='fr_field_wrapper'>\n    ")),e(r(JST["fields/"+this.model.field_type](this))),e(r("\n  </div>\n"))),e(r("\n\n")),e(r(JST["partials/length_validations"](this))),e(r("\n")),e(r(JST["partials/min_max_validations"](this))),e(r("\n")),e(r(JST["partials/error"](this))),e(r("\n")),e(r(JST["partials/description"](this))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["plugins/bookmark_draft"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){e(r("<div class='fr_bookmark'>\n  <a href='#' class='js-fr-bookmark'>")),e(FormRenderer.t.finish_later),e(r("</a>\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["plugins/bottom_bar"]=function(t){var i=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,r=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){var e=[].indexOf||function(e){for(var n=0,t=this.length;n<t;n++)if(n in this&&this[n]===e)return n;return-1};r(i("<div class='fr_bottom'>\n  ")),0<=e.call(this.form_renderer.options.plugins,"Autosave")&&(r(i("\n    <div class='fr_bottom_l'>\n      ")),this.form_renderer.state.get("hasServerErrors")?(r(i("\n        ")),r(this.form_renderer.state.get("serverErrorText")||FormRenderer.t.error_saving)):this.form_renderer.state.get("hasChanges")?(r(i("\n        ")),r(FormRenderer.t.saving)):(r(i("\n        ")),r(FormRenderer.t.saved)),r(i("\n      ")),r(i("\n    </div>\n  "))),r(i("\n\n  <div class='fr_bottom_r'>\n    ")),this.form_renderer.isFirstPage()||(r(i("\n      <button data-fr-previous-page class='")),r(FormRenderer.BUTTON_CLASS),r(i("'>\n        ")),r(FormRenderer.t.back_to_page.replace(":num",this.form_renderer.previousPage())),r(i("\n      </button>\n    "))),r(i("\n\n    ")),this.form_renderer.state.get("submitting")?(r(i("\n      <button disabled class='")),r(FormRenderer.BUTTON_CLASS),r(i("'>\n        ")),r(FormRenderer.t.submitting)):(r(i("\n      <button data-fr-next-page class='")),r(FormRenderer.BUTTON_CLASS),r(i("'>\n        ")),this.form_renderer.isLastPage()||!this.form_renderer.options.enablePages?r(FormRenderer.t.submit):r(FormRenderer.t.next_page)),r(i("\n      </button>\n    ")),r(i("\n  </div>\n</div>\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:i};for(e in t)n[e]=t[e];return n}())},o.JST||(o.JST={}),o.JST["plugins/error_bar"]=function(t){var r=function(e){void 0===e&&null==e&&(e="");var n=new String(e);return n.ecoSafe=!0,n};return function(){var n=[],t=this,e=function(e){void 0!==e&&null!=e&&n.push(e.ecoSafe?e:t.escape(e))};return function(){this.form_renderer.areAllPagesValid()||(e(r("\n  <div class='fr_error_alert_bar' role='alert'>\n    ")),e(r(FormRenderer.t.error_bar.errors)),e(r("\n  </div>\n"))),e(r("\n"))}.call(this),n.join("")}.call(function(){var e,n={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:r};for(e in t)n[e]=t[e];return n}())}}(window);