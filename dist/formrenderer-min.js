(function(){var a;a=document.addEventListener?"input":"keyup",rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(b){return $(b).bind(""+a+".rivets",this.publish)},unbind:function(b){return $(b).unbind(""+a+".rivets")}},rivets.formatters.prepend=function(a,b){return""+b+a},rivets.configure({prefix:"rv",adapter:{subscribe:function(a,b,c){return c.wrapped=function(a,b){return c(b)},a.on("change:"+b,c.wrapped)},unsubscribe:function(a,b,c){return a.off("change:"+b,c.wrapped)},read:function(a,b){return"cid"===b?a.cid:a.get(b)},publish:function(a,b,c){return a.cid?a.set(b,c):a[b]=c}}})}).call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};window.FormRenderer=a=function(a){function b(a){this.options=$.extend({},this.defaults,a),this.state=new Backbone.Model,this.state.set("hasChanges",!1),this.setElement($(this.options.target)),this.$el.html(""),this.$el.addClass("form_renderer_form"),this.$el.data("form-renderer",this),this.subviews={pages:{}},this.constructResponseFields(this.options.response_fields),this.constructPages(),this.constructPagination(),this.constructBottomStatusBar(),this.constructErrorAlertBar(),this.subviews.pages[this.state.get("activePage")].show(),this.initAutosave(),this.initBeforeUnload(),this.options.validateImmediately&&this.validateAllPages()}return c(b,a),b.INPUT_FIELD_TYPES=["address","checkboxes","date","dropdown","email","file","number","paragraph","price","radio","table","text","time","website","map_marker"],b.NON_INPUT_FIELD_TYPES=["block_of_text","page_break","section_break"],b.FIELD_TYPES=_.union(b.INPUT_FIELD_TYPES,b.NON_INPUT_FIELD_TYPES),b.Views={},b.Models={},b.Validators={},b.prototype.defaults={url:"/responses/save",target:"#form",afterSubmit:void 0,validateImmediately:!1,response_fields:[],response:{id:void 0,responses:{}},project_id:void 0,ignore_user:void 0,edit_in_place:!1},b.prototype.events={"click [data-activate-page]":function(a){return this.activatePage($(a.currentTarget).data("activate-page"),{silent:!0})}},b.prototype.constructResponseFields=function(a){var c,d,e,f;for(this.response_fields=new b.Collection,e=0,f=a.length;f>e;e++)d=a[e],c=new(b.Models["ResponseField"+_.str.classify(d.field_type)])(d),c.input_field&&c.setExistingValue(this.options.response.responses[c.get("id")]),this.response_fields.add(c);return this.listenTo(this.response_fields,"change",function(){return this.state.get("hasChanges")?void 0:this.state.set("hasChanges",!0)})},b.prototype.validateCurrentPage=function(){return this.trigger("beforeValidate beforeValidate:"+this.state.get("activePage")),this.subviews.pages[this.state.get("activePage")].validate(),this.trigger("afterValidate afterValidate:"+this.state.get("activePage")),this.isPageValid(this.state.get("activePage"))},b.prototype.validateAllPages=function(){var a,b,c;this.trigger("beforeValidate beforeValidate:all"),c=this.subviews.pages;for(b in c)a=c[b],a.validate();return this.trigger("afterValidate afterValidate:all"),this.areAllPagesValid()},b.prototype.isPageValid=function(a){return!_.find(this.subviews.pages[a].models,function(a){return a.input_field&&a.errors.length>0})},b.prototype.areAllPagesValid=function(){var a;return _.every(function(){a=[];for(var b=1,c=this.numPages;c>=1?c>=b:b>=c;c>=1?b++:b--)a.push(b);return a}.apply(this),function(a){return function(b){return a.isPageValid(b)}}(this))},b.prototype.numValidationErrors=function(){return this.response_fields.filter(function(a){return a.input_field&&a.errors.length>0}).length},b.prototype.constructPages=function(){var a,c,d,e,f,g;a=function(a){return function(){return a.subviews.pages[c]=new b.Views.Page({form_renderer:a})}}(this),this.numPages=this.response_fields.filter(function(a){return"page_break"===a.get("field_type")}).length+1,this.state.set("activePage",1),c=1,a(),this.response_fields.each(function(b){return function(d){return"page_break"===d.get("field_type")?(c++,a()):b.subviews.pages[c].models.push(d)}}(this)),f=this.subviews.pages,g=[];for(e in f)d=f[e],g.push(this.$el.append(d.render().el));return g},b.prototype.constructPagination=function(){return this.subviews.pagination=new b.Views.Pagination({form_renderer:this}),this.$el.prepend(this.subviews.pagination.render().el)},b.prototype.constructBottomStatusBar=function(){return this.subviews.bottomStatusBar=new b.Views.BottomStatusBar({form_renderer:this}),this.$el.append(this.subviews.bottomStatusBar.render().el)},b.prototype.constructErrorAlertBar=function(){return this.subviews.errorAlertBar=new b.Views.ErrorAlertBar({form_renderer:this}),this.$el.prepend(this.subviews.errorAlertBar.render().el)},b.prototype.activatePage=function(a,b){return null==b&&(b={}),b.silent||this.validateCurrentPage()?(this.subviews.pages[this.state.get("activePage")].hide(),this.subviews.pages[a].show(),this.state.set("activePage",a)):void 0},b.prototype.getValue=function(){return _.tap({},function(a){return function(b){return a.response_fields.each(function(a){var c;if(a.input_field)return c=a.getValue(),"object"==typeof c&&c.merge?(delete c.merge,_.extend(b,c)):b[a.get("id")]=c})}}(this))},b.prototype.saveParams=function(){return{response_id:this.options.response.id,project_id:this.options.project_id,edit_in_place:this.options.edit_in_place,ignore_user:this.options.ignore_user,background_submit:!0}},b.prototype.save=function(a){return null==a&&(a={}),this.isSaving=!0,$.ajax({url:this.options.url,type:"post",dataType:"json",data:_.extend(this.saveParams(),{raw_responses:this.getValue()}),complete:function(b){return function(){var c;return b.isSaving=!1,null!=(c=a.complete)&&c.apply(b,arguments),b.trigger("afterSave")}}(this),success:function(b){return function(c){var d;return b.state.set("hasChanges",!1),b.state.set("hasServerErrors",!1),b.options.response.id=c.response_id,null!=(d=a.success)?d.apply(b,arguments):void 0}}(this),error:function(b){return function(){var c;return b.state.set("hasServerErrors",!0),b.state.set("submitting",!1),null!=(c=a.error)?c.apply(b,arguments):void 0}}(this)})},b.prototype.initAutosave=function(){return setInterval(function(a){return function(){return a.state.get("hasChanges")&&!a.isSaving?a.save():void 0}}(this),5e3)},b.prototype.initBeforeUnload=function(){return BeforeUnload.enable(function(a){return function(){return a.state.get("hasChanges")}}(this),"You have unsaved changes. Are you sure you want to leave this page?")},b.prototype.submit=function(a){var b,c;return null==a&&(a={}),a.silent||this.validateAllPages()?(b=a.afterSubmit||this.options.afterSubmit,this.state.set("submitting",!0),c="function"==typeof b?b:"string"==typeof b?function(){return function(){return window.location=b}}(this):function(){return function(){return console.log("[FormRenderer] Not sure what to do...")}}(this),this.state.get("hasChanges")?this.save({success:c}):c.apply(this)):void 0},b}(Backbone.View)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Collection=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(Backbone.Collection)}.call(this),function(){FormRenderer.Validators.BaseValidator=function(){function a(a){this.model=a}return a}()}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.DateValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){var a,b,c;if("date"===this.model.field_type)return c=parseInt(this.model.get("value.year"),10)||0,a=parseInt(this.model.get("value.day"),10)||0,b=parseInt(this.model.get("value.month"),10)||0,c>0&&a>0&&31>=a&&b>0&&12>=b?void 0:"not a valid date"},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.EmailValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){return"email"===this.model.field_type?this.model.get("value").match("@")?void 0:"not a valid email":void 0},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.IntegerValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.VALID_REGEX=/^-?\d+$/,c.prototype.validate=function(){return this.model.get("field_options.integer_only")?this.model.get("value").match(this.constructor.VALID_REGEX)?void 0:"is not an integer":void 0},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.MinMaxLengthValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){var a;if(this.model.get("field_options.minlength")||this.model.get("field_options.maxlength"))return this.min=parseInt(this.model.get("field_options.minlength"),10)||void 0,this.max=parseInt(this.model.get("field_options.maxlength"),10)||void 0,a="words"===this.model.get("field_options.min_max_length_units")?this.countWords():this.countCharacters(),this.min&&a<this.min?"is too short":this.max&&a>this.max?"is too long":void 0},c.prototype.countWords=function(){return(_.trim(this.model.get("value")).replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||"").length},c.prototype.countCharacters=function(){return _.trim(this.model.get("value")).replace(/\s/g,"").length},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.MinMaxValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){var a;if(this.model.get("field_options.min")||this.model.get("field_options.max"))return this.min=this.model.get("field_options.min")&&parseFloat(this.model.get("field_options.min")),this.max=this.model.get("field_options.max")&&parseFloat(this.model.get("field_options.max")),a=parseFloat("price"===this.model.field_type?""+(this.model.get("value.dollars")||0)+"."+(this.model.get("value.cents")||0):this.model.get("value").replace(/,/g,"")),this.min&&a<this.min?"is too small":this.max&&a>this.max?"is too large":void 0},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.NumberValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.VALID_REGEX=/^-?\d*(\.\d+)?$/,c.prototype.validate=function(){var a;if("number"===this.model.field_type)return a=this.model.get("value"),a=a.replace(/,/g,"").replace(/-/g,"").replace(/^\+/,""),a.match(this.constructor.VALID_REGEX)?void 0:"not a valid number"},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.PriceValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){var a;if("price"===this.model.field_type)return a=[],this.model.get("value.dollars")&&a.push(this.model.get("value.dollars").replace(/,/g,"")),this.model.get("value.cents")&&a.push(this.model.get("value.cents")),_.every(a,function(a){return a.match(/^-?\d+$/)})?void 0:"isn't a valid price"},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};FormRenderer.Validators.TimeValidator=function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c.prototype.validate=function(){var a,b,c;if("time"===this.model.field_type)return a=parseInt(this.model.get("value.hours"),10)||0,b=parseInt(this.model.get("value.minutes"),10)||0,c=parseInt(this.model.get("value.seconds"),10)||0,a>=1&&12>=a&&b>=0&&60>=b&&c>=0&&60>=c?void 0:"isn't a valid time"},c}(FormRenderer.Validators.BaseValidator)}.call(this),function(){var a,b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};for(FormRenderer.Models.ResponseField=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.input_field=!0,b.prototype.field_type=void 0,b.prototype.validators=[],b.prototype.sync=function(){},b.prototype.initialize=function(){return this.errors=[],this.hasLengthValidations()?this.listenTo(this,"change:value",this.calculateLength):void 0},b.prototype.validate=function(){var a,b,c,d,e,f;if(this.errors=[],!this.hasValue())return void(this.get("required")&&this.errors.push("can't be blank"));e=this.validators,f=[];for(d in e)c=e[d],b=new c(this),a=b.validate(),f.push(a?this.errors.push(a):void 0);return f},b.prototype.getError=function(){return this.errors.length>0?this.errors.join(". "):void 0},b.prototype.hasLengthValidations=function(){return this.get("field_options.minlength")||this.get("field_options.maxlength")},b.prototype.calculateLength=function(){var a;return a=new FormRenderer.Validators.MinMaxLengthValidator(this),this.set("currentLength",a["words"===this.getLengthValidationUnits()?"countWords":"countCharacters"]())},b.prototype.hasMinMaxValidations=function(){return this.get("field_options.min")||this.get("field_options.max")},b.prototype.getLengthValidationUnits=function(){return this.get("field_options.min_max_length_units")||"characters"},b.prototype.setExistingValue=function(a){return a&&this.set("value",a),this.hasLengthValidations()?this.calculateLength():void 0},b.prototype.getValue=function(){return this.get("value")},b.prototype.hasValue=function(){return!!this.get("value")},b.prototype.hasAnyValueInHash=function(){return _.some(this.get("value"),function(a){return!!a})},b.prototype.hasValueHashKey=function(a){return _.some(a,function(a){return function(b){return!!a.get("value."+b)}}(this))},b.prototype.getOptions=function(){return this.get("field_options.options")||[]},b.prototype.getColumns=function(){return this.get("field_options.columns")||[]},b.prototype.columnOrOptionKeypath=function(){return"table"===this.field_type?"field_options.columns":"field_options.options"},b.prototype.addOptionOrColumnAtIndex=function(a){var b,c;return c="table"===this.field_type?this.getColumns():this.getOptions(),b={label:""},"table"!==this.field_type&&(b.checked=!1),-1===a?c.push(b):c.splice(a+1,0,b),this.set(this.columnOrOptionKeypath(),c),this.trigger("change")},b.prototype.removeOptionOrColumnAtIndex=function(a){var b;return b=this.get(this.columnOrOptionKeypath()),b.splice(a,1),this.set(this.columnOrOptionKeypath(),b),this.trigger("change")},b}(Backbone.DeepModel),FormRenderer.Models.NonInputResponseField=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.input_field=!1,b.prototype.field_type=void 0,b.prototype.sync=function(){},b}(Backbone.DeepModel),FormRenderer.Models.ResponseFieldMapMarker=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="map_marker",b.prototype.hasValue=function(){return _.every(["lat","lng"],function(a){return function(b){return!!a.get("value."+b)}}(this))},b.prototype.latLng=function(){return this.hasValue()?[this.get("value.lat"),this.get("value.lng")]:void 0},b.prototype.defaultLatLng=function(){var a,b;return(a=this.get("field_options.default_lat"))&&(b=this.get("field_options.default_lng"))?[a,b]:void 0},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldAddress=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="address",b.prototype.setExistingValue=function(a){return b.__super__.setExistingValue.apply(this,arguments),(null!=a?a.country:void 0)?void 0:this.set("value.country","US")},b.prototype.hasValue=function(){return this.hasValueHashKey(["street","city","state","zipcode"])},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldCheckboxes=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="checkboxes",b.prototype.setExistingValue=function(a){return this.set("value",_.tap({},function(b){return function(c){var d,e,f,g,h,i,j,k,l;if(_.isEmpty(a)){for(k=b.getOptions(),l=[],d=g=0,i=k.length;i>g;d=++g)e=k[d],l.push(c[""+d]=_.toBoolean(e.checked));return l}for(j=b.getOptions(),d=f=0,h=j.length;h>f;d=++f)e=j[d],c[""+d]=a[e.label];return a.Other?(c.other_checkbox=!0,c.other=a.Other):void 0}}(this)))},b.prototype.getValue=function(){var a,b,c,d;b={},d=this.get("value");for(a in d)c=d[a],b[a]=c===!0?"on":c;return b},b.prototype.hasValue=function(){return this.hasAnyValueInHash()},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldRadio=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="radio",b.prototype.setExistingValue=function(a){var b;return(null!=a?a.selected:void 0)?this.set("value",a):(b=_.find(this.getOptions(),function(a){return _.toBoolean(a.checked)}))?this.set("value.selected",b.label):this.set("value",{})},b.prototype.getValue=function(){return _.tap({merge:!0},function(a){return function(b){return b[""+a.get("id")]=a.get("value.selected"),b[""+a.get("id")+"_other"]=a.get("value.other")}}(this))},b.prototype.hasValue=function(){return!!this.get("value.selected")},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldDropdown=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="dropdown",b.prototype.setExistingValue=function(a){var c;return null!=a?b.__super__.setExistingValue.apply(this,arguments):(c=_.find(this.getOptions(),function(a){return _.toBoolean(a.checked)}),c||this.get("field_options.include_blank_option")||(c=_.first(this.getOptions())),c?this.set("value",c.label):this.unset("value"))},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldTable=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="table",b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.get("field_options.column_totals")?this.listenTo(this,"change:value.*",this.calculateColumnTotals):void 0},b.prototype.setExistingValue=function(a){var b,c,d;return b=(null!=(d=_.find(a,function(){return!0}))?d.length:void 0)||0,c=parseInt(this.get("field_options.minrows"),10)||0,this.numRows=Math.max(c,b,1),this.set("value",_.tap({},function(b){return function(c){var d,e,f,g,h,i;for(i=[],e=g=0,h=b.numRows-1;h>=0?h>=g:g>=h;e=h>=0?++g:--g)i.push(function(){var b,g,h,i,j,k;for(i=this.getColumns(),k=[],f=b=0,g=i.length;g>b;f=++b)d=i[f],c[h=""+f]||(c[h]={}),k.push(c[""+f][""+e]=this.getPresetValue(d.label,e)||(null!=a&&null!=(j=a[d.label])?j[e]:void 0));return k}.call(b));return i}}(this)))},b.prototype.hasValue=function(){return _.some(this.get("value"),function(a){return _.some(a,function(a){return!!a})})},b.prototype.getPresetValue=function(a,b){var c;return null!=(c=this.get("field_options.preset_values."+a))?c[b]:void 0},b.prototype.getValue=function(){var a,b,c,d,e,f,g,h,i;for(d={},b=e=0,h=this.numRows-1;h>=0?h>=e:e>=h;b=h>=0?++e:--e)for(i=this.getColumns(),c=f=0,g=i.length;g>f;c=++f)a=i[c],d[c]||(d[c]=[]),d[c].push(this.get("value."+c+"."+b)||"");return d},b.prototype.calculateColumnTotals=function(){var a,b,c,d,e,f,g,h,i,j,k;for(i=this.getColumns(),k=[],e=f=0,h=i.length;h>f;e=++f){for(a=i[e],c=[],d=g=0,j=this.numRows-1;j>=0?j>=g:g>=j;d=j>=0?++g:--g)c.push(parseFloat((this.get("value."+e+"."+d)||"").replace(/\$?,?/g,"")));b=_.reduce(c,function(a,b){return _.isNaN(b)?a:a+b},0),k.push(this.set("columnTotals."+e,b>0?parseFloat(b.toFixed(10)):""))}return k},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldFile=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="file",b.prototype.getValue=function(){return""},b.prototype.hasValue=function(){return this.hasValueHashKey(["id","filename"])},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldDate=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="date",b.prototype.validators=[FormRenderer.Validators.DateValidator],b.prototype.hasValue=function(){return this.hasValueHashKey(["month","day","year"])},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldEmail=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.validators=[FormRenderer.Validators.EmailValidator],b.prototype.field_type="email",b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldNumber=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.validators=[FormRenderer.Validators.NumberValidator,FormRenderer.Validators.MinMaxValidator,FormRenderer.Validators.IntegerValidator],b.prototype.field_type="number",b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldParagraph=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="paragraph",b.prototype.validators=[FormRenderer.Validators.MinMaxLengthValidator],b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldPrice=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.validators=[FormRenderer.Validators.PriceValidator,FormRenderer.Validators.MinMaxValidator],b.prototype.field_type="price",b.prototype.hasValue=function(){return this.hasValueHashKey(["dollars","cents"])},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldText=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="text",b.prototype.validators=[FormRenderer.Validators.MinMaxLengthValidator],b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldTime=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.validators=[FormRenderer.Validators.TimeValidator],b.prototype.field_type="time",b.prototype.hasValue=function(){return this.hasValueHashKey(["hours","minutes","seconds"])},b.prototype.setExistingValue=function(a){return b.__super__.setExistingValue.apply(this,arguments),(null!=a?a.am_pm:void 0)?void 0:this.set("value.am_pm","AM")},b}(FormRenderer.Models.ResponseField),FormRenderer.Models.ResponseFieldWebsite=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return f(b,a),b.prototype.field_type="website",b}(FormRenderer.Models.ResponseField),d=FormRenderer.NON_INPUT_FIELD_TYPES,b=0,c=d.length;c>b;b++)a=d[b],FormRenderer.Models["ResponseField"+_.str.classify(a)]=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return f(c,b),c.prototype.field_type=a,c}(FormRenderer.Models.NonInputResponseField)}.call(this),function(){var a,b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},j=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};for(FormRenderer.Views.Pagination=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage",this.render),this.listenTo(this.form_renderer,"afterValidate",this.render)},b.prototype.render=function(){return this.$el.html(JST["partials/pagination"](this)),this},b}(Backbone.View),FormRenderer.Views.ErrorAlertBar=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.initialize=function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer,"afterValidate",this.render)},b.prototype.render=function(){return this.$el.html(JST["partials/error_alert_bar"](this)),this.form_renderer.areAllPagesValid()||window.scrollTo(0,0),this},b}(Backbone.View),FormRenderer.Views.BottomStatusBar=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.events={"click .go_back_button":"handleBack","click .continue_button":"handleContinue"},b.prototype.initialize=function(a){return this.form_renderer=a.form_renderer,this.listenTo(this.form_renderer.state,"change:activePage change:hasChanges change:submitting change:hasServerErrors",this.render)},b.prototype.render=function(){return this.$el.html(JST["partials/bottom_status_bar"](this)),this},b.prototype.firstPage=function(){return 1===this.form_renderer.state.get("activePage")},b.prototype.lastPage=function(){return this.form_renderer.state.get("activePage")===this.form_renderer.numPages},b.prototype.previousPage=function(){return this.form_renderer.state.get("activePage")-1},b.prototype.nextPage=function(){return this.form_renderer.state.get("activePage")+1},b.prototype.handleBack=function(a){return a.preventDefault(),this.form_renderer.activatePage(this.previousPage(),{silent:!0})},b.prototype.handleContinue=function(a){return a.preventDefault(),this.lastPage()?this.form_renderer.submit():this.form_renderer.activatePage(this.nextPage())},b}(Backbone.View),FormRenderer.Views.Page=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.className="form_renderer_page",b.prototype.initialize=function(a){return this.form_renderer=a.form_renderer,this.models=[],this.views=[]},b.prototype.render=function(){var a,b,c,d,e;for(this.hide(),e=this.models,c=0,d=e.length;d>c;c++)a=e[c],b=new(FormRenderer.Views["ResponseField"+_.str.classify(a.field_type)])({model:a,form_renderer:this.form_renderer}),this.$el.append(b.render().el),this.views.push(b);return this},b.prototype.hide=function(){var a,b,c,d,e;for(this.$el.hide(),d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.trigger("hidden"));return e},b.prototype.show=function(){var a,b,c,d,e;for(this.$el.show(),d=this.views,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.trigger("shown"));return e},b.prototype.validate=function(){var a,b,c,d,e,f,g,h,i;for(g=_.filter(this.models,function(a){return a.input_field}),c=0,e=g.length;e>c;c++)a=g[c],a.validate();for(h=this.views,i=[],d=0,f=h.length;f>d;d++)b=h[d],i.push(b.render());return i},b}(Backbone.View),FormRenderer.Views.ResponseField=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.field_type=void 0,b.prototype.className="form_renderer_response_field",b.prototype.initialize=function(a){return this.form_renderer=a.form_renderer,this.model=a.model,this.$el.addClass("response_field_"+this.field_type)},b.prototype.getDomId=function(){return this.model.cid},b.prototype.render=function(){return this.$el[this.model.getError()?"addClass":"removeClass"]("error"),this.$el.html(JST["partials/response_field"](this)),rivets.bind(this.$el,{model:this.model}),this},b}(Backbone.View),FormRenderer.Views.NonInputResponseField=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.render=function(){return this.$el.addClass("response_field_"+this.field_type),this.$el.html(JST["partials/non_input_response_field"](this)),this},b}(FormRenderer.Views.ResponseField),FormRenderer.Views.ResponseFieldTable=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.KEY_DIRECTIONS={37:"left",38:"up",39:"right",40:"down"},b.prototype.field_type="table",b.prototype.events={"click .add_another_row":"addRow","keydown textarea":"handleKeydown"},b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this.on("shown",function(){return this.initExpanding()})},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.initExpanding(),this},b.prototype.initExpanding=function(){},b.prototype.addRow=function(){return this.model.numRows++,this.render()},b.prototype.handleKeydown=function(a){var b,c,d,e;if(e=a.which.toString(),!(j.call(_.keys(this.constructor.KEY_DIRECTIONS),e)<0)){switch(b=$(a.currentTarget),c=b.data("col"),d=b.data("row"),this.constructor.KEY_DIRECTIONS[a.which.toString()]){case"up":case"left":if(0!==b.caret())return;break;case"down":case"right":if(!(0===b[0].selectionStart&&b[0].selectionEnd>0||b.caret()===b.val().length))return}switch(this.constructor.KEY_DIRECTIONS[a.which.toString()]){case"up":d-=1;break;case"down":d+=1;break;case"left":c-=1;break;case"right":c+=1}if(!(0>c||0>d))return a.preventDefault(),b.closest("table").find("tbody tr:eq("+d+") td:eq("+c+") textarea").focus()}},b}(FormRenderer.Views.ResponseField),FormRenderer.Views.ResponseFieldFile=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.field_type="file",b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.form_renderer&&this.$el.find(".pretty_file_input").prettyFileInput({action:this.form_renderer.options.url,method:"post",name:"raw_responses["+this.model.get("id")+"][]",additional_parameters:this.form_renderer.saveParams(),beforeRemove:function(a){return function(){return a.model.set("value",{},{silent:!0})}}(this),beforeUpload:function(a){return function(b,c){return c.options.additional_parameters=a.form_renderer.saveParams(),a.model.set("value.filename",b,{silent:!0})}}(this),onUploadError:function(a){return function(){return a.model.set("value.filename","",{silent:!0})}}(this),onUploadSuccess:function(a){return function(b){return a.form_renderer.options.response.id=b.response_id,a.form_renderer.trigger("afterSave")}}(this)}),this},b}(FormRenderer.Views.ResponseField),FormRenderer.Views.ResponseFieldMapMarker=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.field_type="map_marker",b.prototype.events={"click .map_marker_field_cover":"enable","click .map_marker_field_disable":"disable"},b.prototype.render=function(){return b.__super__.render.apply(this,arguments),this.$cover=this.$el.find(".map_marker_field_cover"),requireOnce(App.MAP_JS_URL,function(a){return function(){return a.initMap(),a.model.latLng()?a.enable():void 0}}(this)),this},b.prototype.initMap=function(){return this.map=L.map(this.$el.find(".map_marker_field_map")[0]).setView(this.model.latLng()||this.model.defaultLatLng()||App.DEFAULT_LAT_LNG,13),this.$el.find(".map_marker_field_map").data("map",this.map),L.tileLayer(App.MAP_TILE_URL,{maxZoom:18}).addTo(this.map),this.marker=L.marker([0,0]),this.map.on("move",function(a){return function(){var b;
return b=a.map.getCenter(),a.marker.setLatLng(b),a.model.set("value.lat",b.lat.toFixed(7)),a.model.set("value.lng",b.lng.toFixed(7))}}(this))},b.prototype.enable=function(){return this.map.addLayer(this.marker),this.$cover.hide(),this.map.fire("move")},b.prototype.disable=function(){return this.map.removeLayer(this.marker),this.$el.find(".map_marker_field_cover").show(),this.model.set("value.lat",""),this.model.set("value.lng","")},b}(FormRenderer.Views.ResponseField),f=_.without(FormRenderer.INPUT_FIELD_TYPES,"table","file","map_marker"),b=0,d=f.length;d>b;b++)a=f[b],FormRenderer.Views["ResponseField"+_.str.classify(a)]=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return i(c,b),c.prototype.field_type=a,c}(FormRenderer.Views.ResponseField);for(g=FormRenderer.NON_INPUT_FIELD_TYPES,c=0,e=g.length;e>c;c++)a=g[c],FormRenderer.Views["ResponseField"+_.str.classify(a)]=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return i(c,b),c.prototype.field_type=a,c}(FormRenderer.Views.NonInputResponseField)}.call(this),window.JST||(window.JST={}),window.JST["fields/address"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c;d(b("<div class='input-line'>\n  <span class='street'>\n    <input type=\"text\"\n           id=\"")),d(this.getDomId()),d(b("\"\n           data-rv-input='model.value.street' />\n    <label>Address</label>\n  </span>\n</div>\n\n<div class='input-line'>\n  <span class='city'>\n    <input type=\"text\"\n           data-rv-input='model.value.city' />\n    <label>City</label>\n  </span>\n\n  <span class='state'>\n    <input type=\"text\"\n           data-rv-input='model.value.state' />\n    <label>State / Province / Region</label>\n  </span>\n</div>\n\n<div class='input-line'>\n  <span class='zip'>\n    <input type=\"text\"\n           data-rv-input='model.value.zipcode' />\n    <label>Zipcode</label>\n  </span>\n\n  <span class='country'>\n    <select data-rv-value='model.value.country'>\n      "));for(a in allCountries)c=allCountries[a],d(b("\n        <option value='")),d(a),d(b("'>")),d(c),d(b("</option>\n      "));d(b("\n    </select>\n    <label>Country</label>\n  </span>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/block_of_text"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='block-of-text block-of-text-size-")),d(this.model.get("field_options.size")),d(b("'>\n  ")),d(b(_.simpleFormat(this.model.get("label")))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/checkboxes"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;for(g=this.model.getOptions(),a=e=0,f=g.length;f>e;a=++e)c=g[a],d(b("\n  <label class='fb-option'>\n    <input type='checkbox' data-rv-checked='model.value.")),d(a),d(b("' />\n    ")),d(c.label),d(b("\n  </label>\n"));d(b("\n\n")),this.model.get("field_options.include_other_option")&&d(b("\n  <div class='fb-option'>\n    <label>\n      <input type='checkbox' data-rv-checked='model.value.other_checkbox' />\n      Other\n    </label>\n\n    <input type='text' data-rv-input='model.value.other' />\n  </div>\n")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/date"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='input-line'>\n  <span class='month'>\n    <input type=\"text\"\n           id=\"")),d(this.getDomId()),d(b("\"\n           data-rv-input='model.value.month'\n           maxlength='2' />\n    <label>MM</label>\n  </span>\n\n  <span class='above-line'>/</span>\n\n  <span class='day'>\n    <input type=\"text\"\n           data-rv-input='model.value.day'\n           maxlength='2' />\n    <label>DD</label>\n  </span>\n\n  <span class='above-line'>/</span>\n\n  <span class='year'>\n    <input type=\"text\"\n           data-rv-input='model.value.year'\n           maxlength='4' />\n    <label>YYYY</label>\n  </span>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/dropdown"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f;for(d(b('<select id="')),d(this.getDomId()),d(b("\" data-rv-value='model.value'>\n  ")),this.model.get("field_options.include_blank_option")&&d(b("\n    <option></option>\n  ")),d(b("\n\n  ")),f=this.model.getOptions(),c=0,e=f.length;e>c;c++)a=f[c],d(b('\n    <option value="')),d(a.label),d(b('">')),d(a.label),d(b("</option>\n  "));d(b("\n</select>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/email"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b('"\n       class="rf-size-')),d(this.model.get("field_options.size")),d(b("\"\n       data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/file"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='pretty_file_input cf ")),this.model.get("value.filename")&&d(b("existing")),d(b("'>\n  <div class='existing'>\n    <span class='pfi_existing_filename'>")),d(this.model.get("value.filename")),d(b("</span>\n    <a class='button mini' data-pfi='remove'>Remove</a>\n  </div>\n\n  <div class='not_existing'>\n    <input type='file' id='")),d(this.getDomId()),d(b("' name='file'>\n    <span class='pfi_status'></span>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/map_marker"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='map_marker_field_map_wrapper'>\n  <div class='map_marker_field_map' />\n\n  <div class='map_marker_field_cover'>\n    Click to set location\n  </div>\n\n  <div class='map_marker_field_toolbar cf'>\n    <strong>Coordinates:</strong>\n    <span data-rv-show='model.value.lat'>\n      <span data-rv-text='model.value.lat' />,\n      <span data-rv-text='model.value.lng' />\n    </span>\n    <span data-rv-hide='model.value.lat' class='none'>N/A</span>\n    <a class='map_marker_field_disable' data-rv-show='model.value.lat'>Clear</a>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/number"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b('"\n       class="rf-size-')),d(this.model.get("field_options.size")),d(b("\"\n       data-rv-input='model.value' />\n\n")),this.model.get("field_options.units")&&(d(b("\n  <span class='units'>\n    ")),d(this.model.get("field_options.units")),d(b("\n  </span>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/page_break"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='page-break-inner'>\n  Page break\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/paragraph"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<textarea\n   id="')),d(this.getDomId()),d(b('"\n   class="rf-size-')),d(this.model.get("field_options.size")),d(b("\"\n   data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/price"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='input-line'>\n  <span class='above-line'>$</span>\n  <span class='dollars'>\n    <input type=\"text\"\n           id=\"")),d(this.getDomId()),d(b("\"\n           data-rv-input='model.value.dollars' />\n    <label>Dollars</label>\n  </span>\n\n  ")),this.model.get("field_options.disable_cents")||d(b("\n    <span class='above-line'>.</span>\n    <span class='cents'>\n      <input type=\"text\"\n             data-rv-input='model.value.cents'\n             maxlength='2' />\n      <label>Cents</label>\n    </span>\n  ")),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/radio"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g;for(g=this.model.getOptions(),a=e=0,f=g.length;f>e;a=++e)c=g[a],d(b("\n  <label class='fb-option'>\n    <input type='radio' data-rv-checked='model.value.selected' id=\"")),d(this.getDomId()),d(b('" name="')),d(this.getDomId()),d(b('" value="')),d(c.label),d(b('" />\n    ')),d(c.label),d(b("\n  </label>\n"));d(b("\n\n")),this.model.get("field_options.include_other_option")&&(d(b("\n  <div class='fb-option'>\n    <label>\n    <input type='radio' data-rv-checked='model.value.selected' id=\"")),d(this.getDomId()),d(b('" name="')),d(this.getDomId()),d(b("\" value=\"Other\" />\n      Other\n    </label>\n\n    <input type='text' data-rv-input='model.value.other' />\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/section_break"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='section-break-inner section-break-size-")),d(this.model.get("field_options.size")),d(b("'>\n  <div class='section-name'>")),d(this.model.get("label")),d(b("</div>\n  ")),this.model.get("field_options.description")&&(d(b("\n    <p>")),d(b(_.sanitize(_.simpleFormat(this.model.get("field_options.description"),!1)))),d(b("</p>\n  "))),d(b("\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/table"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e,f,g,h,i,j,k,l,m,n,o,p;for(d(b("<table class='border_all'>\n  <thead>\n    <tr>\n      ")),m=this.model.getColumns(),f=0,j=m.length;j>f;f++)a=m[f],d(b("\n        <th>")),d(a.label),d(b("</th>\n      "));for(d(b("\n    </tr>\n  </thead>\n\n  <tbody>\n    ")),c=g=0,n=this.model.numRows-1;n>=0?n>=g:g>=n;c=n>=0?++g:--g){for(d(b("\n      <tr>\n        ")),o=this.model.getColumns(),e=h=0,k=o.length;k>h;e=++h)a=o[e],d(b("\n          <td>\n            <textarea ")),this.model.getPresetValue(a.label,c)&&d(b("readonly")),d(b("\n                      data-col='")),d(e),d(b("'\n                      data-row='")),d(c),d(b("'\n                      data-rv-input='model.value.")),d(e),d(b(".")),d(c),d(b("'\n                      rows='1' />\n          </td>\n        "));d(b("\n      </tr>\n    "))}if(d(b("\n  </tbody>\n\n  ")),this.model.get("field_options.column_totals")){for(d(b("\n    <tfoot>\n      <tr>\n        ")),p=this.model.getColumns(),e=i=0,l=p.length;l>i;e=++i)a=p[e],d(b("\n          <td data-rv-text='model.columnTotals.")),d(e),d(b("'></td>\n        "));d(b("\n      </tr>\n    </tfoot>\n  "))}d(b("\n</table>\n\n<div class='margin_th margin_bh'>\n  <a class='uppercase add_another_row'><i class='icon-plus-sign'></i> Add another row</a>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/text"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b('"\n       class="rf-size-')),d(this.model.get("field_options.size")),d(b("\"\n       data-rv-input='model.value' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/time"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='input-line'>\n  <span class='hours'>\n    <input type=\"text\"\n           id=\"")),d(this.getDomId()),d(b("\"\n           data-rv-input='model.value.hours'\n           maxlength='2' />\n    <label>HH</label>\n  </span>\n\n  <span class='above-line'>:</span>\n\n  <span class='minutes'>\n    <input type=\"text\"\n           data-rv-input='model.value.minutes'\n           maxlength='2' />\n    <label>MM</label>\n  </span>\n\n  ")),this.model.get("field_options.disable_seconds")||d(b("\n    <span class='above-line'>:</span>\n\n    <span class='seconds'>\n      <input type=\"text\"\n             data-rv-input='model.value.seconds'\n             maxlength='2' />\n      <label>SS</label>\n    </span>\n  ")),d(b("\n\n  <span class='am_pm'>\n    <select data-rv-value='model.value.am_pm'>\n      <option value='AM'>AM</option>\n      <option value='PM'>PM</option>\n    </select>\n  </span>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["fields/website"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<input type="text"\n       id="')),d(this.getDomId()),d(b('"\n       class="rf-size-')),d(this.model.get("field_options.size")),d(b("\"\n       data-rv-input='model.value'\n       placeholder='http://' />\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST.main=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[];return function(){}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/bottom_status_bar"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b("<div class='bottom_status_bar cf'>\n  <div class='ninety_wrapper'>\n    <div class='align_left'>\n      <div class='saved_status_indicator ")),this.form_renderer.state.get("hasServerErrors")?d(b("error")):this.form_renderer.state.get("hasChanges")&&d(b("saving")),d(b("'>\n        <span class='icon_wrapper'>\n          <i class='icon-cloud'></i>\n          <i class='icon-ok'></i>\n        </span>\n\n        <span class='status_wrapper'>\n          <span class='saving'>Saving...</span>\n          <span class='saved'>Saved</span>\n          <span class='error'>Error saving</span>\n        </span>\n      </div>\n    </div>\n\n    <div class='align_right'>\n      <div class='button_wrapper'>\n        ")),this.firstPage()?(d(b("\n          <a class='button arrow_l darker_gray lap_show_i' href='")),d(this.form_renderer.options.backToProjectUrl),d(b("'>\n            Back to project\n          </a>\n        "))):(d(b("\n          <a class='button arrow_l darker_gray go_back_button lap_show_i'>\n            Back to page ")),d(this.previousPage()),d(b("\n          </a>\n        "))),d(b("\n\n        ")),this.form_renderer.state.get("submitting")?d(b("\n          <a class='button arrow info continue_button disabled'>\n            Loading preview...\n          </a>\n        ")):(d(b("\n          <a class='button arrow info continue_button'>\n            ")),d(this.lastPage()?b("Preview and submit"):b("Next page")),d(b("\n          </a>\n        "))),d(b("\n      </div>\n    </div>\n  </div>\n</div>\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/description"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.get("field_options.description")&&(d(b("\n  <span class='help-block'>\n    ")),d(b(_.sanitize(_.simpleFormat(this.model.get("field_options.description"),!1)))),d(b("\n  </span>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/error"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.getError()&&(d(b("\n  <span class='help-block validation-message-wrapper'>\n    ")),d(this.model.getError()),d(b("\n  </span>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/error_alert_bar"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.form_renderer.areAllPagesValid()||d(b("\n  <div class='error_alert'>Your response has validation errors.</div>\n")),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/label"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b('<label for="')),d(this.getDomId()),d(b('">\n  ')),d(this.model.get("label")),d(b("\n  ")),this.model.get("required")&&d(b("<abbr title='required'>*</abbr>")),d(b("\n</label>"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/length_validations"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.hasLengthValidations()&&(d(b("\n  <div class='min_max'>\n    ")),this.model.get("field_options.minlength")&&this.model.get("field_options.maxlength")?(d(b("\n      Between ")),d(this.model.get("field_options.minlength")),d(b(" and ")),d(this.model.get("field_options.maxlength")),d(b(" ")),d(this.model.getLengthValidationUnits()),d(b(".\n    "))):this.model.get("field_options.minlength")?(d(b("\n      More than ")),d(this.model.get("field_options.minlength")),d(b(" ")),d(this.model.getLengthValidationUnits()),d(b(".\n    "))):this.model.get("field_options.maxlength")&&(d(b("\n      Less than ")),d(this.model.get("field_options.maxlength")),d(b(" ")),d(this.model.getLengthValidationUnits()),d(b(".\n    "))),d(b("\n\n    Current count:\n    <code class='min_max_counter' data-rv-text='model.currentLength'></code>\n    ")),d(this.model.getLengthValidationUnits()),d(b(".\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/min_max_validations"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){this.model.hasMinMaxValidations()&&(d(b("\n  <div class='min_max'>\n    ")),this.model.get("field_options.min")&&this.model.get("field_options.max")?(d(b("\n      Between ")),d(this.model.get("field_options.min")),d(b(" and ")),d(this.model.get("field_options.max")),d(b(".\n    "))):this.model.get("field_options.min")?(d(b("\n      More than ")),d(this.model.get("field_options.min")),d(b(".\n    "))):this.model.get("field_options.max")&&(d(b("\n      Less than ")),d(this.model.get("field_options.max")),d(b(".\n    "))),d(b("\n  </div>\n"))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/non_input_response_field"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["fields/"+this.field_type](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/pagination"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){var a,c,e;if(this.form_renderer.numPages>1){for(d(b("\n  <ul class='formbuilder_form_pages_list cf'>\n    ")),a=c=1,e=this.form_renderer.numPages;e>=1?e>=c:c>=e;a=e>=1?++c:--c)d(b("\n      ")),a===this.form_renderer.state.get("activePage")?(d(b("\n        <li class='")),this.form_renderer.isPageValid(a)||d(b("has_errors")),d(b("'><span>")),d(a),d(b("</span></li>\n      "))):(d(b("\n        <li class='")),this.form_renderer.isPageValid(a)||d(b("has_errors")),d(b("'><a data-activate-page=\"")),d(a),d(b('">')),d(a),d(b("</a></li>\n      "))),d(b("\n    "));d(b("\n  </ul>\n"))}d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())},window.JST||(window.JST={}),window.JST["partials/response_field"]=function(a){var b=function(a){"undefined"==typeof a&&null==a&&(a="");var b=new String(a);return b.ecoSafe=!0,b};return function(){var a=[],c=this,d=function(b){"undefined"!=typeof b&&null!=b&&a.push(b.ecoSafe?b:c.escape(b))};return function(){d(b(JST["partials/label"](this))),d(b("\n")),d(b(JST["fields/"+this.field_type](this))),d(b("\n\n<div class='clear' />\n\n")),d(b(JST["partials/length_validations"](this))),d(b("\n")),d(b(JST["partials/min_max_validations"](this))),d(b("\n")),d(b(JST["partials/error"](this))),d(b("\n")),d(b(JST["partials/description"](this))),d(b("\n"))}.call(this),a.join("")}.call(function(){var c,d={escape:function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},safe:b};for(c in a)d[c]=a[c];return d}())};